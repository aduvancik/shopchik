/*! For license information please see main.409034f1.js.LICENSE.txt */
(()=>{var e={464:(e,t,n)=>{"use strict";var r=n(791);function i(e){return Array.prototype.slice.call(e)}function s(e,t){var n=Math.floor(e);return n===t||n+1===t?e:t}function o(){return Date.now()}function a(e,t,n){if(t="data-keen-slider-"+t,null===n)return e.removeAttribute(t);e.setAttribute(t,n||"")}function c(e,t){return t=t||document,"function"==typeof e&&(e=e(t)),Array.isArray(e)?e:"string"==typeof e?i(t.querySelectorAll(e)):e instanceof HTMLElement?[e]:e instanceof NodeList?i(e):[]}function l(e){e.raw&&(e=e.raw),e.cancelable&&!e.defaultPrevented&&e.preventDefault()}function u(e){e.raw&&(e=e.raw),e.stopPropagation&&e.stopPropagation()}function h(){var e=[];return{add:function(t,n,r,i){t.addListener?t.addListener(r):t.addEventListener(n,r,i),e.push([t,n,r,i])},input:function(e,t,n,r){this.add(e,t,function(e){return function(t){t.nativeEvent&&(t=t.nativeEvent);var n=t.changedTouches||[],r=t.targetTouches||[],i=t.detail&&t.detail.x?t.detail:null;return e({id:i?i.identifier?i.identifier:"i":r[0]?r[0]?r[0].identifier:"e":"d",idChanged:i?i.identifier?i.identifier:"i":n[0]?n[0]?n[0].identifier:"e":"d",raw:t,x:i&&i.x?i.x:r[0]?r[0].screenX:i?i.x:t.pageX,y:i&&i.y?i.y:r[0]?r[0].screenY:i?i.y:t.pageY})}}(n),r)},purge:function(){e.forEach((function(e){e[0].removeListener?e[0].removeListener(e[2]):e[0].removeEventListener(e[1],e[2],e[3])})),e=[]}}}function d(e,t,n){return Math.min(Math.max(e,t),n)}function f(e){return(e>0?1:0)-(e<0?1:0)||+e}function p(e){var t=e.getBoundingClientRect();return{height:s(t.height,e.offsetHeight),width:s(t.width,e.offsetWidth)}}function m(e,t,n,r){var i=e&&e[t];return null==i?n:r&&"function"==typeof i?i():i}function g(e){return Math.round(1e6*e)/1e6}function v(e,t){if(e===t)return!0;var n=typeof e;if(n!==typeof t)return!1;if("object"!==n||null===e||null===t)return"function"===n&&e.toString()===t.toString();if(e.length!==t.length||Object.getOwnPropertyNames(e).length!==Object.getOwnPropertyNames(t).length)return!1;for(var r in e)if(!v(e[r],t[r]))return!1;return!0}var y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},y.apply(this,arguments)};function w(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function _(e){var t,n,r,i,s,a,c,l,u,h,p,v,y,_,b=1/0,I=[],E=null,S=0;function T(e){O(S+e)}function k(e){var t=C(S+e).abs;return A(t)?t:null}function C(e){var t=Math.floor(Math.abs(g(e/n))),r=g((e%n+n)%n);r===n&&(r=0);var i=f(e),s=c.indexOf(w([],c,!0).reduce((function(e,t){return Math.abs(t-r)<Math.abs(e-r)?t:e}))),o=s;return i<0&&t++,s===a&&(o=0,t+=i>0?1:-1),{abs:o+t*a*i,origin:s,rel:o}}function x(e,t,n){var r;if(t||!P())return N(e,n);if(!A(e))return null;var i=C(null!=n?n:S),s=i.abs,o=e-i.rel,c=s+o;r=N(c);var l=N(c-a*f(o));return(null!==l&&Math.abs(l)<Math.abs(r)||null===r)&&(r=l),g(r)}function N(e,t){if(null==t&&(t=g(S)),!A(e)||null===e)return null;e=Math.round(e);var r=C(t),i=r.abs,s=r.rel,o=r.origin,l=D(e),u=(t%n+n)%n,h=c[o],d=Math.floor((e-(i-s))/a)*n;return g(h-u-h+c[l]+d+(o===a?n:0))}function A(e){return R(e)===e}function R(e){return d(e,u,h)}function P(){return i.loop}function D(e){return(e%a+a)%a}function O(t){var n;n=t-S,I.push({distance:n,timestamp:o()}),I.length>6&&(I=I.slice(-6)),S=g(t);var r=L().abs;if(r!==E){var i=null!==E;E=r,i&&e.emit("slideChanged")}}function L(o){var c=o?null:function(){if(a){var e=P(),t=e?(S%n+n)%n:S,o=(e?S%n:S)-s[0][2],c=0-(o<0&&e?n-Math.abs(o):o),l=0,d=C(S),m=d.abs,g=d.rel,w=s[g][2],b=s.map((function(t,r){var s=c+l;(s<0-t[0]||s>1)&&(s+=(Math.abs(s)>n-1&&e?n:0)*f(-s));var o=r-g,u=f(o),h=o+m;e&&(-1===u&&s>w&&(h+=a),1===u&&s<w&&(h-=a),null!==p&&h<p&&(s+=n),null!==v&&h>v&&(s-=n));var d=s+t[0]+t[1],y=Math.max(s>=0&&d<=1?1:d<0||s>1?0:s<0?Math.min(1,(t[0]+s)/t[0]):(1-s)/t[0],0);return l+=t[0]+t[1],{abs:h,distance:i.rtl?-1*s+1-t[0]:s,portion:y,size:t[0]}}));return m=R(m),g=D(m),{abs:R(m),length:r,max:_,maxIdx:h,min:y,minIdx:u,position:S,progress:e?t/n:S/r,rel:g,slides:b,slidesLength:n}}}();return t.details=c,e.emit("detailsChanged"),c}return t={absToRel:D,add:T,details:null,distToIdx:k,idxToDist:x,init:function(t){if(function(){if(i=e.options,s=(i.trackConfig||[]).map((function(e){return[m(e,"size",1),m(e,"spacing",0),m(e,"origin",0)]})),a=s.length){n=g(s.reduce((function(e,t){return e+t[0]+t[1]}),0));var t,o=a-1;r=g(n+s[0][2]-s[o][0]-s[o][2]-s[o][1]),c=s.reduce((function(e,n){if(!e)return[0];var r=s[e.length-1],i=e[e.length-1]+(r[0]+r[2])+r[1];return i-=n[2],e[e.length-1]>i&&(i=e[e.length-1]),i=g(i),e.push(i),(!t||t<i)&&(l=e.length-1),t=i,e}),null),0===r&&(l=0),c.push(g(n))}}(),!a)return L(!0);var o;!function(){var t=e.options.range,n=e.options.loop;p=u=n?m(n,"min",-1/0):0,v=h=n?m(n,"max",b):l;var r=m(t,"min",null),i=m(t,"max",null);null!==r&&(u=r),null!==i&&(h=i),y=u===-1/0?u:e.track.idxToDist(u||0,!0,0),_=h===b?h:x(h,!0,0),null===i&&(v=h),m(t,"align",!1)&&h!==b&&0===s[D(h)][2]&&(_-=1-s[D(h)][0],h=k(_-S)),y=g(y),_=g(_)}(),o=t,Number(o)===o?T(N(R(t))):L()},to:O,velocity:function(){var e=o(),t=I.reduce((function(t,n){var r=n.distance,i=n.timestamp;return e-i>200||(f(r)!==f(t.distance)&&t.distance&&(t={distance:0,lastTimestamp:0,time:0}),t.time&&(t.distance+=r),t.lastTimestamp&&(t.time+=i-t.lastTimestamp),t.lastTimestamp=i),t}),{distance:0,lastTimestamp:0,time:0});return t.distance/t.time||0}}}function b(e){var t,n,r,i,s,o,a,c;function l(e){return 2*e}function u(e){return d(e,a,c)}function h(e){return 1-Math.pow(1-e,3)}function p(){return r?e.track.velocity():0}function m(e,t){void 0===t&&(t=1e3);var n=147e-9+(e=Math.abs(e))/t;return{dist:Math.pow(e,2)/n,dur:e/n}}function g(){var t=e.track.details;t&&(s=t.min,o=t.max,a=t.minIdx,c=t.maxIdx)}function v(){e.animator.stop()}e.on("updated",g),e.on("optionsChanged",g),e.on("created",g),e.on("dragStarted",(function(){r=!1,v(),t=n=e.track.details.abs})),e.on("dragChecked",(function(){r=!0})),e.on("dragEnded",(function(){var r=e.options.mode;"snap"===r&&function(){var r=e.track,i=e.track.details,a=i.position,c=f(p());(a>o||a<s)&&(c=0);var l=t+c;0===i.slides[r.absToRel(l)].portion&&(l-=c),t!==n&&(l=n),f(r.idxToDist(l,!0))!==c&&(l+=c),l=u(l);var h=r.idxToDist(l,!0);e.animator.start([{distance:h,duration:500,easing:function(e){return 1+--e*e*e*e*e}}])}(),"free"!==r&&"free-snap"!==r||function(){v();var t="free-snap"===e.options.mode,n=e.track,r=p();i=f(r);var a=e.track.details,c=[];if(r||!t){var d=m(r),g=d.dist,y=d.dur;if(y=l(y),g*=i,t){var w=n.idxToDist(n.distToIdx(g),!0);w&&(g=w)}c.push({distance:g,duration:y,easing:h});var _=a.position,b=_+g;if(b<s||b>o){var I=b<s?s-_:o-_,E=0,S=r;if(f(I)===i){var T=Math.min(Math.abs(I)/Math.abs(g),1),k=function(e){return 1-Math.pow(1-e,1/3)}(T)*y;c[0].earlyExit=k,S=r*(1-T)}else c[0].earlyExit=0,E+=I;var C=m(S,100),x=C.dist*i;e.options.rubberband&&(c.push({distance:x,duration:l(C.dur),easing:h}),c.push({distance:-x+E,duration:500,easing:h}))}e.animator.start(c)}else e.moveToIdx(u(a.abs),!0,{duration:500,easing:function(e){return 1+--e*e*e*e*e}})}()})),e.on("dragged",(function(){n=e.track.details.abs}))}function I(e){var t,n,r,i,s,o,a,p,m,g,v,y,w,_,b,I,E,S,T=h();function k(t){if(o&&p===t.id){var c=A(t);if(m){if(!N(t))return x(t);g=c,m=!1,e.emit("dragChecked")}if(I)return g=c;l(t);var h=function(t){if(E===-1/0&&S===1/0)return t;var r=e.track.details,o=r.length,a=r.position,c=d(t,E-a,S-a);if(0===o)return 0;if(!e.options.rubberband)return c;if(a<=S&&a>=E)return t;if(a<E&&n>0||a>S&&n<0)return t;var l=(a<E?a-E:a-S)/o,u=i*o,h=Math.abs(l*u),f=Math.max(0,1-h/s*2);return f*f*t}(a(g-c)/i*r);n=f(h);var w=e.track.details.position;(w>E&&w<S||w===E&&n>0||w===S&&n<0)&&u(t),v+=h,!y&&Math.abs(v*i)>5&&(y=!0),e.track.add(h),g=c,e.emit("dragged")}}function C(t){!o&&e.track.details&&e.track.details.length&&(v=0,o=!0,y=!1,m=!0,p=t.id,N(t),g=A(t),e.emit("dragStarted"))}function x(t){o&&p===t.idChanged&&(o=!1,e.emit("dragEnded"))}function N(e){var t=R(),n=t?e.y:e.x,r=t?e.x:e.y,i=void 0!==w&&void 0!==_&&Math.abs(_-r)<=Math.abs(w-n);return w=n,_=r,i}function A(e){return R()?e.y:e.x}function R(){return e.options.vertical}function P(){i=e.size,s=R()?window.innerHeight:window.innerWidth;var t=e.track.details;t&&(E=t.min,S=t.max)}function D(e){y&&(u(e),l(e))}function O(){if(T.purge(),e.options.drag&&!e.options.disabled){var n;n=e.options.dragSpeed||1,a="function"==typeof n?n:function(e){return e*n},r=e.options.rtl?-1:1,P(),t=e.container,function(){var e="data-keen-slider-clickable";c("[".concat(e,"]:not([").concat(e,"=false])"),t).map((function(e){T.add(e,"dragstart",u),T.add(e,"mousedown",u),T.add(e,"touchstart",u)}))}(),T.add(t,"dragstart",(function(e){l(e)})),T.add(t,"click",D,{capture:!0}),T.input(t,"ksDragStart",C),T.input(t,"ksDrag",k),T.input(t,"ksDragEnd",x),T.input(t,"mousedown",C),T.input(t,"mousemove",k),T.input(t,"mouseleave",x),T.input(t,"mouseup",x),T.input(t,"touchstart",C,{passive:!0}),T.input(t,"touchmove",k,{passive:!1}),T.input(t,"touchend",x),T.input(t,"touchcancel",x),T.add(window,"wheel",(function(e){o&&l(e)}));var i="data-keen-slider-scrollable";c("[".concat(i,"]:not([").concat(i,"=false])"),e.container).map((function(e){return function(e){var t;T.input(e,"touchstart",(function(e){t=A(e),I=!0,b=!0}),{passive:!0}),T.input(e,"touchmove",(function(n){var r=R(),i=r?e.scrollHeight-e.clientHeight:e.scrollWidth-e.clientWidth,s=t-A(n),o=r?e.scrollTop:e.scrollLeft,a=r&&"scroll"===e.style.overflowY||!r&&"scroll"===e.style.overflowX;if(t=A(n),(s<0&&o>0||s>0&&o<i)&&b&&a)return I=!0;b=!1,l(n),I=!1})),T.input(e,"touchend",(function(){I=!1}))}(e)}))}}e.on("updated",P),e.on("optionsChanged",O),e.on("created",O),e.on("destroyed",T.purge)}function E(e){var t,n,r=null;function i(t,n,r){e.animator.active?o(t,n,r):requestAnimationFrame((function(){return o(t,n,r)}))}function s(){i(!1,!1,n)}function o(n,i,s){var o=0,a=e.size,u=e.track.details;if(u&&t){var h=u.slides;t.forEach((function(e,t){if(n)!r&&i&&c(e,null,s),l(e,null,s);else{if(!h[t])return;var u=h[t].size*a;!r&&i&&c(e,u,s),l(e,h[t].distance*a-o,s),o+=u}}))}}function a(t){return"performance"===e.options.renderMode?Math.round(t):t}function c(e,t,n){var r=n?"height":"width";null!==t&&(t=a(t)+"px"),e.style["min-"+r]=t,e.style["max-"+r]=t}function l(e,t,n){if(null!==t){t=a(t);var r=n?t:0;t="translate3d(".concat(n?0:t,"px, ").concat(r,"px, 0)")}e.style.transform=t,e.style["-webkit-transform"]=t}function u(){t&&(o(!0,!0,n),t=null),e.on("detailsChanged",s,!0)}function h(){i(!1,!0,n)}function d(){u(),n=e.options.vertical,e.options.disabled||"custom"===e.options.renderMode||(r="auto"===m(e.options.slides,"perView",null),e.on("detailsChanged",s),(t=e.slides).length&&h())}e.on("created",d),e.on("optionsChanged",d),e.on("beforeOptionsChanged",(function(){u()})),e.on("updated",h),e.on("destroyed",u)}function S(e,t){return function(n){var r,i,s,o,l,u=h();function d(e){var t;a(n.container,"reverse","rtl"!==(t=n.container,window.getComputedStyle(t,null).getPropertyValue("direction"))||e?null:""),a(n.container,"v",n.options.vertical&&!e?"":null),a(n.container,"disabled",n.options.disabled&&!e?"":null)}function f(){g()&&I()}function g(){var e=null;if(o.forEach((function(t){t.matches&&(e=t.__media)})),e===r)return!1;r||n.emit("beforeOptionsChanged"),r=e;var t=e?s.breakpoints[e]:s;return n.options=y(y({},s),t),d(),C(),x(),S(),!0}function v(e){var t=p(e);return(n.options.vertical?t.height:t.width)/n.size||1}function w(){return n.options.trackConfig.length}function _(e){for(var a in r=!1,s=y(y({},t),e),u.purge(),i=n.size,o=[],s.breakpoints||[]){var c=window.matchMedia(a);c.__media=a,o.push(c),u.add(c,"change",f)}u.add(window,"orientationchange",k),u.add(window,"resize",T),g()}function b(e){n.animator.stop();var t=n.track.details;n.track.init(null!=e?e:t?t.abs:0)}function I(e){b(e),n.emit("optionsChanged")}function E(e,t){if(e)return _(e),void I(t);C(),x();var r=w();S(),w()!==r?I(t):b(t),n.emit("updated")}function S(){var e=n.options.slides;if("function"==typeof e)return n.options.trackConfig=e(n.size,n.slides);for(var t=n.slides,r=t.length,i="number"==typeof e?e:m(e,"number",r,!0),s=[],o=m(e,"perView",1,!0),a=m(e,"spacing",0,!0)/n.size||0,c="auto"===o?a:a/o,l=m(e,"origin","auto"),u=0,h=0;h<i;h++){var d="auto"===o?v(t[h]):1/o-a+c,f="center"===l?.5-d/2:"auto"===l?0:l;s.push({origin:f,size:d,spacing:a}),u+=d}if(u+=a*(i-1),"auto"===l&&!n.options.loop&&1!==o){var p=0;s.map((function(e){var t=u-p;return p+=e.size+a,t>=1||(e.origin=1-t-(u>1?0:1-u)),e}))}n.options.trackConfig=s}function T(){C();var e=n.size;n.options.disabled||e===i||(i=e,E())}function k(){T(),setTimeout(T,500),setTimeout(T,2e3)}function C(){var e=p(n.container);n.size=(n.options.vertical?e.height:e.width)||1}function x(){n.slides=c(n.options.selector,n.container)}n.container=(l=c(e,document)).length?l[0]:null,n.destroy=function(){u.purge(),n.emit("destroyed"),d(!0)},n.prev=function(){n.moveToIdx(n.track.details.abs-1,!0)},n.next=function(){n.moveToIdx(n.track.details.abs+1,!0)},n.update=E,_(n.options)}}var T=function(e,t,n){try{return function(e,t){var n,r={};return n={emit:function(e){r[e]&&r[e].forEach((function(e){e(n)}));var t=n.options&&n.options[e];t&&t(n)},moveToIdx:function(e,t,r){var i=n.track.idxToDist(e,t);if(i){var s=n.options.defaultAnimation;n.animator.start([{distance:i,duration:m(r||s,"duration",500),easing:m(r||s,"easing",(function(e){return 1+--e*e*e*e*e}))}])}},on:function(e,t,n){void 0===n&&(n=!1),r[e]||(r[e]=[]);var i=r[e].indexOf(t);i>-1?n&&delete r[e][i]:n||r[e].push(t)},options:e},function(){if(n.track=_(n),n.animator=function(e){var t,n,r,i,s,o;function a(t){o||(o=t),c(!0);var s=t-o;s>r&&(s=r);var h=i[n];if(h[3]<s)return n++,a(t);var d=h[2],f=h[4],p=h[0],m=h[1]*(0,h[5])(0===f?1:(s-d)/f);if(m&&e.track.to(p+m),s<r)return u();o=null,c(!1),l(null),e.emit("animationEnded")}function c(e){t.active=e}function l(e){t.targetIdx=e}function u(){var e;e=a,s=window.requestAnimationFrame(e)}function h(){var t;t=s,window.cancelAnimationFrame(t),c(!1),l(null),o&&e.emit("animationStopped"),o=null}return t={active:!1,start:function(t){if(h(),e.track.details){var s=0,o=e.track.details.position;n=0,r=0,i=t.map((function(e){var t,n=Number(o),i=null!==(t=e.earlyExit)&&void 0!==t?t:e.duration,a=e.easing,c=e.distance*a(i/e.duration)||0;o+=c;var l=r;return r+=i,s+=c,[n,e.distance,l,r,e.duration,a]})),l(e.track.distToIdx(s)),u(),e.emit("animationStarted")}},stop:h,targetIdx:null}}(n),t)for(var e=0,r=t;e<r.length;e++)(0,r[e])(n);n.track.init(n.options.initial||0),n.emit("created")}(),n}(t,w([S(e,{drag:!0,mode:"snap",renderMode:"precision",rubberband:!0,selector:".keen-slider__slide"}),E,I,b],n||[],!0))}catch(e){console.error(e)}};t.E=function(e,t){var n=r.useRef(null),i=r.useRef(!1),s=r.useRef(e),o=r.useCallback((function(r){r?(s.current=e,n.current=new T(r,e,t),i.current=!1):(n.current&&n.current.destroy&&n.current.destroy(),n.current=null)}),[]);return r.useEffect((function(){v(s.current,e)||(s.current=e,n.current&&n.current.update(s.current))}),[e]),[o,n]}},463:(e,t,n)=>{"use strict";var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),I=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case I:return"Portal";case T:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function $(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Ee=null,Se=null;function Te(e){if(e=wi(e)){if("function"!==typeof Ie)throw Error(s(280));var t=e.stateNode;t&&(t=bi(t),Ie(e.stateNode,e.type,t))}}function ke(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return xe(e,t,n)}finally{Ae=!1,(null!==Ee||null!==Se)&&(Ne(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,c){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,It,Et,St,Tt,kt=!1,Ct=[],xt=null,Nt=null,At=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&It(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&It(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(jt),Pt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=_.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&bt(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=be(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(ln),hn=F({},ln,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),vn=sn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),_n=sn(F({},ln,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return Sn}var kn=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Rn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){ke(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Wn=null;function Qn(e){Ur(e,0)}function Yn(e){if(W(_i(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Wn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Gn(t,Wn,e,be(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ir={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Er={},Sr={};function Tr(e){if(Er[e])return Er[e];if(!Ir[e])return e;var t,n=Ir[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);var kr=Tr("animationend"),Cr=Tr("animationiteration"),xr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),c(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(kr,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(xr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,c,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Gt;break;case 4:i=Kt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=be(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Nn;break;case kr:case Cr:case xr:c=vn;break;case Nr:c=An;break;case"scroll":c=dn;break;case"wheel":c=Pn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&u.push(Gr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===_e||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(h=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:_i(c),f=null==l?a:_i(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wr(u),d=Wr(d)}u=null}else u=null;null!==c&&Qr(o,a,c,u,!1),null!==l&&null!==h&&Qr(o,h,l,u,!0)}if("select"===(c=(a=r?_i(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Jn;else if(Hn(a))if(Xn)g=or;else{g=ir;var v=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?_i(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,_r(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":_r(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(y=en()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(v=Kr(r,w)).length&&(w=new _n(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=zn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=$t=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Pe(n,s))&&o.unshift(Gr(n,c,a)):i||null!=(c=Pe(n,s))&&o.push(Gr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function bi(e){return e[fi]||null}var Ii=[],Ei=-1;function Si(e){return{current:e}}function Ti(e){0>Ei||(e.current=Ii[Ei],Ii[Ei]=null,Ei--)}function ki(e,t){Ei++,Ii[Ei]=e.current,e.current=t}var Ci={},xi=Si(Ci),Ni=Si(!1),Ai=Ci;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ti(Ni),Ti(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(s(168));ki(xi,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=xi.current,ki(xi,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(xi),ki(xi,e)):Ti(Ni),ki(Ni,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Hi=0,Gi=null,Ki=0,Wi=[],Qi=0,Yi=null,Ji=1,Xi="";function $i(e,t){qi[Hi++]=Ki,qi[Hi++]=Gi,Gi=e,Ki=t}function Zi(e,t,n){Wi[Qi++]=Ji,Wi[Qi++]=Xi,Wi[Qi++]=Yi,Yi=e;var r=Ji;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else Ji=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===Gi;)Gi=qi[--Hi],qi[Hi]=null,Ki=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(cs(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(cs(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=_.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Si(null),ys=null,ws=null,_s=null;function bs(){_s=ws=ys=null}function Is(e){var t=vs.current;Ti(vs),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ss(e,t){ys=e,_s=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(_s!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===ys)throw Error(s(308));ws=e,ys.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function Cs(e){null===ks?ks=[e]:ks.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===o?s=l:o.next=l,o=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(o=0,u=l=c=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fc|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var js=(new r.Component).refs;function Vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Ds(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Ds(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Ds(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rl(t,e,r,n),Ls(t,e,r))}};function Bs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function qs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Pi(t)?Ai:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Hs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function Gs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=js,Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Pi(t)?Ai:xi.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ks(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ws(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Ks(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Ks(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ml(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Ks(e,null,t),n.return=e,n;case I:return(t=jl(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ml(t,e.mode,n,null)).return=e,t;Ws(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?l(e,t,n,r):null;case I:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ws(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ws(t,r)}return null}function m(i,s,a,c){for(var l=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],c);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===u?l=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),is&&$i(i,m),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(s=o(h,s,m),null===u?l=h:u.sibling=h,u=h);return is&&$i(i,m),l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&$i(i,m),l}function g(i,a,c,l){var u=L(c);if("function"!==typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,l);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),is&&$i(i,g),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=d(i,y.value,l))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return is&&$i(i,g),u}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),is&&$i(i,g),u}return function e(r,s,o,c){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var l=o.key,u=s;null!==u;){if(u.key===l){if((l=o.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===P&&Qs(l)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Ks(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((s=Ml(o.props.children,r.mode,c,o.key)).return=r,r=s):((c=Ll(o.type,o.key,o.props,null,r.mode,c)).ref=Ks(r,s,o),c.return=r,r=c)}return a(r);case I:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jl(o,r.mode,c)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),c)}if(te(o))return m(r,s,o,c);if(L(o))return g(r,s,o,c);Ws(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Ul(o,r.mode,c)).return=r,r=s),a(r)):n(r,s)}}var Js=Ys(!0),Xs=Ys(!1),$s={},Zs=Si($s),eo=Si($s),to=Si($s);function no(e){if(e===$s)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Zs),ki(Zs,t)}function io(){Ti(Zs),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no(Zs.current),n=ce(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Ti(Zs),Ti(eo))}var ao=Si(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function uo(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,po=0,mo=null,go=null,vo=null,yo=!1,wo=!1,_o=0,bo=0;function Io(){throw Error(s(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:ca,e=n(r,i),wo){o=0;do{if(wo=!1,_o=0,25<=o)throw Error(s(301));o+=1,vo=go=null,t.updateQueue=null,ho.current=la,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,vo=go=mo=null,yo=!1,t)throw Error(s(300));return e}function To(){var e=0!==_o;return _o=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function xo(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=a=null,l=null,u=o;do{var h=u.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,a=r):l=l.next=d,mo.lanes|=h,Fc|=h}u=u.next}while(null!==u&&u!==o);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=mo,r=Co(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,_a=!0),r=r.queue,Ho(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ac)throw Error(s(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=Ns(e,1);null!==t&&rl(t,e,1,-1)}function Uo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Co().memoizedState}function zo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=jo(t,n,s,r))}mo.flags|=e,i.memoizedState=jo(1|t,n,s,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ho(e,t){return Bo(2048,8,e,t)}function Go(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fc|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return Co().memoizedState}function ta(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=xs(e,t,n,r))){rl(n,e,r,tl()),sa(n,t,r)}}function na(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var c=t.interleaved;return null===c?(i.next=i,Cs(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=xs(e,t,i,r))&&(rl(n,e,r,i=tl()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:Ts,useCallback:Io,useContext:Io,useEffect:Io,useImperativeHandle:Io,useInsertionEffect:Io,useLayoutEffect:Io,useMemo:Io,useReducer:Io,useRef:Io,useState:Io,useDebugValue:Io,useDeferredValue:Io,useTransition:Io,useMutableSource:Io,useSyncExternalStore:Io,useId:Io,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ac)throw Error(s(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Ac.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:Jo,useContext:Ts,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ko,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(xo)},useDebugValue:Yo,useDeferredValue:function(e){return $o(Co(),go.memoizedState,e)},useTransition:function(){return[No(xo)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:Jo,useContext:Ts,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ko,useMemo:Xo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(xo)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:$o(t,go.memoizedState,e)},useTransition:function(){return[Ao(xo)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ds(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gc||(Gc=!0,Kc=r),da(0,t)},n}function ma(e,t,n){(n=Ds(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Wc?Wc=new Set([this]):Wc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kl.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ds(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=_.ReactCurrentOwner,_a=!1;function ba(e,t,n,r){t.child=null===e?Xs(t,null,n,r):Js(t,e.child,n,r)}function Ia(e,t,n,r,i){n=n.render;var s=t.ref;return Ss(t,i),r=So(e,t,n,r,s,i),n=To(),null===e||_a?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Ga(e,t,i)}return t.flags|=1,(e=Ol(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ga(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return Ca(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Oc,Dc),Dc|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Oc,Dc),Dc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Oc,Dc),Dc|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Oc,Dc),Dc|=r;return ba(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Pi(n)?Ai:xi.current;return s=Ri(t,s),Ss(t,i),n=So(e,t,n,r,s,i),r=To(),null===e||_a?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function xa(e,t,n,r,i){if(Pi(n)){var s=!0;Mi(t)}else s=!1;if(Ss(t,i),null===t.stateNode)Ha(e,t),qs(t,n,r),Gs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ts(l):l=Ri(t,l=Pi(n)?Ai:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&Hs(t,o,r,l),As=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),c=t.memoizedState,a!==r||d!==c||Ni.current||As?("function"===typeof u&&(Vs(t,n,u,r),c=t.memoizedState),(a=As||Bs(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ps(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:gs(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=Ts(c):c=Ri(t,c=Pi(n)?Ai:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&Hs(t,o,r,c),As=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||As?("function"===typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(l=As||Bs(t,n,l,r,d,p,c)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ga(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Js(t,e.child,null,s),t.child=Js(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ra(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Pa,Da,Oa,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Fl(c,i,0,null),e=Ml(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):ja(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fl({mode:"visible",children:r.children},i,0,null),(o=Ml(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Js(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(c=0!==(a&e.childLanes),_a||c){if(null!==(r=Ac)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),rl(r,e,i,-1))}return gl(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Qi++]=Ji,Wi[Qi++]=Xi,Wi[Qi++]=Yi,Ji=e.id,Xi=e.overflow,Yi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(a){a=i.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ol(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Ol(r,a):(a=Ml(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Fa(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Ol(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),Js(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Es(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===co(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Pi(t.type)&&Di(),Wa(t),null;case 3:return r=t.stateNode,io(),Ti(Ni),Ti(xi),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(al(ss),ss=null))),Da(e,t),Wa(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":J(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var c in ye(n,o),i=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&jr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ye(n,i),l=i)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&w(e,o,u,c))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Wa(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ss&&(al(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Lc&&(Lc=3):gl())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return io(),Da(e,t),null===e&&Br(t.stateNode.containerInfo),Wa(t),null;case 10:return Is(t.type._context),Wa(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(c=o.rendering))if(r)Ka(o,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,Ka(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qc&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=co(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!is)return Wa(t),null}else 2*Xe()-o.renderingStartTime>qc&&1073741824!==n&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dc)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ni),Ti(xi),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Is(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&jr("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ja=!1,Xa=!1,$a="function"===typeof WeakSet?WeakSet:Set,Za=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tl(e,t,r)}else n.current=null}function tc(e,t,n){try{n()}catch(r){Tl(e,t,r)}}var nc=!1;function rc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tc(t,n,s)}i=i.next}while(i!==r)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var hc=null,dc=!1;function fc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||ec(n,t);case 6:var r=hc,i=dc;hc=null,fc(e,t,n),dc=i,null!==(hc=r)&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hc.removeChild(n.stateNode));break;case 18:null!==hc&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Bt(e)):ci(hc,n.stateNode));break;case 4:r=hc,i=dc,hc=n.stateNode.containerInfo,dc=!0,fc(e,t,n),hc=r,dc=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tc(n,t,o),i=i.next}while(i!==r)}fc(e,t,n);break;case 1:if(!Xa&&(ec(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tl(n,t,a)}fc(e,t,n);break;case 21:fc(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,fc(e,t,n),Xa=r):fc(e,t,n);break;default:fc(e,t,n)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach((function(t){var r=Nl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:hc=c.stateNode,dc=!1;break e;case 3:case 4:hc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===hc)throw Error(s(160));pc(o,a,i),hc=null,dc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Tl(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vc(t,e),t=t.sibling}function vc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),yc(e),4&r){try{rc(3,e,e.return),ic(3,e)}catch(g){Tl(e,e.return,g)}try{rc(5,e,e.return)}catch(g){Tl(e,e.return,g)}}break;case 1:gc(t,e),yc(e),512&r&&null!==n&&ec(n,n.return);break;case 5:if(gc(t,e),yc(e),512&r&&null!==n&&ec(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&X(i,o),we(c,a);var u=we(c,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(c){case"input":$(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Tl(e,e.return,g)}}break;case 6:if(gc(t,e),yc(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tl(e,e.return,g)}}break;case 3:if(gc(t,e),yc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tl(e,e.return,g)}break;case 4:default:gc(t,e),yc(e);break;case 13:gc(t,e),yc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bc=Xe())),4&r&&mc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||h,gc(t,e),Xa=u):gc(t,e),yc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rc(4,f,f.return);break;case 1:ec(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tl(r,n,g)}}break;case 5:ec(f,f.return);break;case 22:if(null!==f.memoizedState){Ic(d);continue}}null!==p?(p.return=f,Za=p):Ic(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Tl(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tl(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(t,e),yc(e),4&r&&mc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),uc(e,cc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lc(e,cc(e),o);break;default:throw Error(s(161))}}catch(a){Tl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wc(e,t,n){Za=e,_c(e,t,n)}function _c(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ja;if(!o){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Xa;a=Ja;var l=Xa;if(Ja=o,(Xa=c)&&!l)for(Za=i;null!==Za;)c=(o=Za).child,22===o.tag&&null!==o.memoizedState?Ec(i):null!==c?(c.return=o,Za=c):Ec(i);for(;null!==s;)Za=s,_c(s,t,n),s=s.sibling;Za=i,Ja=a,Xa=l}bc(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):bc(e)}}function bc(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||ic(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Xa||512&t.flags&&sc(t)}catch(f){Tl(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Ic(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Ec(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ic(4,t)}catch(c){Tl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Tl(t,i,c)}}var s=t.return;try{sc(t)}catch(c){Tl(t,s,c)}break;case 5:var o=t.return;try{sc(t)}catch(c){Tl(t,o,c)}}}catch(c){Tl(t,t.return,c)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Sc,Tc=Math.ceil,kc=_.ReactCurrentDispatcher,Cc=_.ReactCurrentOwner,xc=_.ReactCurrentBatchConfig,Nc=0,Ac=null,Rc=null,Pc=0,Dc=0,Oc=Si(0),Lc=0,Mc=null,Fc=0,Uc=0,jc=0,Vc=null,zc=null,Bc=0,qc=1/0,Hc=null,Gc=!1,Kc=null,Wc=null,Qc=!1,Yc=null,Jc=0,Xc=0,$c=null,Zc=-1,el=0;function tl(){return 0!==(6&Nc)?Xe():-1!==Zc?Zc:Zc=Xe()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Nc)&&0!==Pc?Pc&-Pc:null!==ms.transition?(0===el&&(el=mt()),el):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rl(e,t,n,r){if(50<Xc)throw Xc=0,$c=null,Error(s(185));vt(e,n,r),0!==(2&Nc)&&e===Ac||(e===Ac&&(0===(2&Nc)&&(Uc|=n),4===Lc&&cl(e,Pc)),il(e,r),1===n&&0===Nc&&0===(1&t.mode)&&(qc=Xe()+500,ji&&Bi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,c=i[o];-1===c?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Ac?Pc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(ll.bind(null,e)):zi(ll.bind(null,e)),oi((function(){0===(6&Nc)&&Bi()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Al(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(Zc=-1,el=0,0!==(6&Nc))throw Error(s(327));var n=e.callbackNode;if(El()&&e.callbackNode!==n)return null;var r=dt(e,e===Ac?Pc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vl(e,r);else{t=r;var i=Nc;Nc|=2;var o=ml();for(Ac===e&&Pc===t||(Hc=null,qc=Xe()+500,fl(e,t));;)try{wl();break}catch(c){pl(e,c)}bs(),kc.current=o,Nc=i,null!==Rc?t=0:(Ac=null,Pc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Mc,fl(e,0),cl(e,r),il(e,Xe()),n;if(6===t)cl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vl(e,r))&&(0!==(o=pt(e))&&(r=o,t=ol(e,o))),1===t))throw n=Mc,fl(e,0),cl(e,r),il(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Il(e,zc,Hc);break;case 3:if(cl(e,r),(130023424&r)===r&&10<(t=Bc+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Il.bind(null,e,zc,Hc),t);break}Il(e,zc,Hc);break;case 4:if(cl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){e.timeoutHandle=ri(Il.bind(null,e,zc,Hc),r);break}Il(e,zc,Hc);break;default:throw Error(s(329))}}}return il(e,Xe()),e.callbackNode===n?sl.bind(null,e):null}function ol(e,t){var n=Vc;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=zc,zc=n,null!==t&&al(t)),e}function al(e){null===zc?zc=e:zc.push.apply(zc,e)}function cl(e,t){for(t&=~jc,t&=~Uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Nc))throw Error(s(327));El();var t=dt(e,0);if(0===(1&t))return il(e,Xe()),null;var n=vl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Mc,fl(e,0),cl(e,t),il(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Il(e,zc,Hc),il(e,Xe()),null}function ul(e,t){var n=Nc;Nc|=1;try{return e(t)}finally{0===(Nc=n)&&(qc=Xe()+500,ji&&Bi())}}function hl(e){null!==Yc&&0===Yc.tag&&0===(6&Nc)&&El();var t=Nc;Nc|=1;var n=xc.transition,r=wt;try{if(xc.transition=null,wt=1,e)return e()}finally{wt=r,xc.transition=n,0===(6&(Nc=t))&&Bi()}}function dl(){Dc=Oc.current,Ti(Oc)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rc)for(n=Rc.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ti(Ni),Ti(xi),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Is(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Ac=e,Rc=e=Ol(e.current,null),Pc=Dc=t,Lc=0,Mc=null,jc=Uc=Fc=0,zc=Vc=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pl(e,t){for(;;){var n=Rc;try{if(bs(),ho.current=oa,yo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=go=mo=null,wo=!1,_o=0,Cc.current=null,null===n||null===n.return){Lc=1,Mc=t,Rc=null;break}e:{var o=e,a=n.return,c=n,l=t;if(t=Pc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,c,0,t),1&p.mode&&ga(o,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ga(o,u,t),gl();break e}l=Error(s(426))}else if(is&&1&c.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,c,0,t),ps(ua(l,c));break e}}o=l=ua(l,c),4!==Lc&&(Lc=2),null===Vc?Vc=[o]:Vc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,l,t));break e;case 1:c=l;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Wc||!Wc.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,c,t));break e}}o=o.return}while(null!==o)}bl(n)}catch(_){t=_,Rc===n&&null!==n&&(Rc=n=n.return);continue}break}}function ml(){var e=kc.current;return kc.current=oa,null===e?oa:e}function gl(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Ac||0===(268435455&Fc)&&0===(268435455&Uc)||cl(Ac,Pc)}function vl(e,t){var n=Nc;Nc|=2;var r=ml();for(Ac===e&&Pc===t||(Hc=null,fl(e,t));;)try{yl();break}catch(i){pl(e,i)}if(bs(),Nc=n,kc.current=r,null!==Rc)throw Error(s(261));return Ac=null,Pc=0,Lc}function yl(){for(;null!==Rc;)_l(Rc)}function wl(){for(;null!==Rc&&!Ye();)_l(Rc)}function _l(e){var t=Sc(e.alternate,e,Dc);e.memoizedProps=e.pendingProps,null===t?bl(e):Rc=t,Cc.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Dc)))return void(Rc=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Rc=n);if(null===e)return Lc=6,void(Rc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rc=t);Rc=t=e}while(null!==t);0===Lc&&(Lc=5)}function Il(e,t,n){var r=wt,i=xc.transition;try{xc.transition=null,wt=1,function(e,t,n,r){do{El()}while(null!==Yc);if(0!==(6&Nc))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Ac&&(Rc=Ac=null,Pc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,Al(tt,(function(){return El(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xc.transition,xc.transition=null;var a=wt;wt=1;var c=Nc;Nc|=4,Cc.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(c=a),f===o&&++h===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(b){Tl(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nc,nc=!1}(e,n),vc(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,wc(n,e,i),Je(),Nc=c,wt=a,xc.transition=o}else e.current=n;if(Qc&&(Qc=!1,Yc=e,Jc=i),o=e.pendingLanes,0===o&&(Wc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gc)throw Gc=!1,e=Kc,Kc=null,e;0!==(1&Jc)&&0!==e.tag&&El(),o=e.pendingLanes,0!==(1&o)?e===$c?Xc++:(Xc=0,$c=e):Xc=0,Bi()}(e,t,n,r)}finally{xc.transition=i,wt=r}return null}function El(){if(null!==Yc){var e=_t(Jc),t=xc.transition,n=wt;try{if(xc.transition=null,wt=16>e?16:e,null===Yc)var r=!1;else{if(e=Yc,Yc=null,Jc=0,0!==(6&Nc))throw Error(s(331));var i=Nc;for(Nc|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rc(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(oc(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rc(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var _=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==_)_.return=a,Za=_;else e:for(a=w;null!==Za;){if(0!==(2048&(c=Za).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(I){Tl(c,c.return,I)}if(c===a){Za=null;break e}var b=c.sibling;if(null!==b){b.return=c.return,Za=b;break e}Za=c.return}}if(Nc=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(I){}r=!0}return r}finally{wt=n,xc.transition=t}}return!1}function Sl(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tl(),null!==e&&(vt(e,1,t),il(e,t))}function Tl(e,t,n){if(3===e.tag)Sl(e,e,n);else for(;null!==t;){if(3===t.tag){Sl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wc||!Wc.has(r))){t=Os(t,e=ma(t,e=ua(n,e),1),1),e=tl(),null!==t&&(vt(t,1,e),il(t,e));break}}t=t.return}}function kl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Ac===e&&(Pc&n)===n&&(4===Lc||3===Lc&&(130023424&Pc)===Pc&&500>Xe()-Bc?fl(e,0):jc|=n),il(e,t)}function Cl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tl();null!==(e=Ns(e,t))&&(vt(e,t,n),il(e,n))}function xl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cl(e,n)}function Nl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cl(e,n)}function Al(e,t){return We(e,t)}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new Rl(e,t,n,r)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Dl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Ml(n.children,i,o,t);case S:a=8,i|=8;break;case T:return(e=Pl(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Pl(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pl(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Fl(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pl(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ml(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Pl(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function jl(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,i,s,o,a,c){return e=new Vl(e,t,n,a,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function Bl(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function ql(e,t,n,r,i,s,o,a,c){return(e=zl(n,r,!0,e,0,s,0,a,c)).context=Bl(null),n=e.current,(s=Ds(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,vt(e,i,r),il(e,r),e}function Hl(e,t,n,r){var i=t.current,s=tl(),o=nl(i);return n=Bl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ds(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rl(e,i,o,s),Ls(e,i,o)),o}function Gl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wl(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}Sc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(ki(ao,1&ao.current),null!==(e=Ga(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Ga(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Ri(t,xi.current);Ss(t,n),i=So(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Rs(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,Gs(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===R)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Ia(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ps(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ga(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&ls(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Js(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ga(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Ds(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Es(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Es(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ss(t,n),r=r(i=Ts(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ea(e,t,r,i=gs(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ha(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ss(t,n),qs(t,r,i),Gs(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function Jl(e){this._internalRoot=e}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Gl(o);a.call(e)}}Hl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Gl(o);s.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Gl(c);a.call(e)}}var c=zl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=c,e[pi]=c.current,Br(8===e.nodeType?e.parentNode:e),hl((function(){Hl(t,c,n,r)})),c}(n,t,e,i,r);return Gl(o)}Jl.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hl(e,t,null,null)},Jl.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl((function(){Hl(null,e,null,null)})),t[pi]=null}},Jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),il(t,Xe()),0===(6&Nc)&&(qc=Xe()+500,Bi()))}break;case 13:hl((function(){var t=Ns(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Wl(e,1)}},It=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)rl(t,e,134217728,tl());Wl(e,134217728)}},Et=function(e){if(13===e.tag){var t=nl(e),n=Ns(e,t);if(null!==n)rl(n,e,t,tl());Wl(e,t)}},St=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ie=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(s(90));W(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=ul,Ne=hl;var tu={usingClientEntryPoint:!1,Events:[wi,_i,bi,ke,Ce,ul]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xl(e))throw Error(s(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!$l(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jl(t)},t.render=function(e,t,n){if(!$l(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$l(e))throw Error(s(40));return!!e._reactRootContainer&&(hl((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$l(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=l,t.jsxs=l},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var _=w.prototype=new y;_.constructor=w,m(_,v.prototype),_.isPureReactComponent=!0;var b=Array.isArray,I=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)I.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===s?"."+x(c,0):s,b(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",b(e))for(var l=0;l<e.length;l++){var u=s+x(a=e[l],l);c+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=N(a=a.value,t,i,u=s+x(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)I.call(t,l)&&!S.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,c=e[a],l=a+1,u=e[l];if(0>s(c,n))l<i&&0>s(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>s(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function b(e){if(g=!1,_(e),!m)if(null!==r(l))m=!0,D(I);else{var t=r(u);null!==t&&O(b,t.startTime-e)}}function I(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var s=f;try{for(_(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&i(l),_(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&O(b,h.startTime-n),c=!1}return c}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,T=null,k=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function A(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?E():(S=!1,T=null)}}else S=!1}if("function"===typeof w)E=function(){w(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,E=function(){P.postMessage(null)}}else E=function(){v(A,0)};function D(e){T=e,S||(S=!0,E())}function O(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(I))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(l)&&e===r(u)&&(g?(y(k),k=-1):g=!0,O(b,s-o))):(e.sortIndex=a,n(l,e),m||p||(m=!0,D(I))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)},628:(e,t,n)=>{var r={"./all.jpg":799,"./bird.jpg":440,"./cat.jpg":271,"./dog.jpg":573,"./fish.jpg":170,"./reptiles.jpg":145,"./rodents.jpg":253};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=s,e.exports=i,i.id=628},799:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/all.92d9ebf4e840b0ad1e55.jpg"},440:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/bird.eee181ebc037dfcfd292.jpg"},271:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/cat.67f0701f7c635a965b0f.jpg"},573:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/dog.dd1e98e3da1d7942d641.jpg"},170:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/fish.24fd24750d5a65699614.jpg"},145:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/reptiles.0772a93dc3a1f1546a40.jpg"},253:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/rodents.e82a1cda586352560b3d.jpg"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/";var r={};(()=>{"use strict";n.d(r,{_:()=>QC});var e={};n.r(e),n.d(e,{FirebaseError:()=>at,SDK_VERSION:()=>mn,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>rn,_addOrOverwriteComponent:()=>sn,_apps:()=>en,_clearComponents:()=>hn,_components:()=>nn,_getProvider:()=>an,_isFirebaseApp:()=>ln,_isFirebaseServerApp:()=>un,_registerComponent:()=>on,_removeServiceInstance:()=>cn,_serverApps:()=>tn,deleteApp:()=>_n,getApp:()=>yn,getApps:()=>wn,initializeApp:()=>gn,initializeServerApp:()=>vn,onLog:()=>In,registerVersion:()=>bn,setLogLevel:()=>En});var t,i=n(791),s=n.t(i,2),o=n(250),a=n(164),c=n.t(a,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const u="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,c=t.Pop,d=null,g=v();function v(){return(a.state||{idx:null}).idx}function y(){c=t.Pop;let e=v(),n=null==e?null:e-g;g=e,d&&d({action:c,location:_.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:m(e);return h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let _={get action(){return c},get location(){return e(s,a)},listen(e){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(u,y),d=e,()=>{s.removeEventListener(u,y),d=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){c=t.Push;let i=p(_.location,e,n);r&&r(i,e),g=v()+1;let l=f(i,g),u=_.createHref(i);try{a.pushState(l,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;s.location.assign(u)}o&&d&&d({action:c,location:_.location,delta:1})},replace:function(e,n){c=t.Replace;let i=p(_.location,e,n);r&&r(i,e),g=v();let s=f(i,g),l=_.createHref(i);a.replaceState(s,"",l),o&&d&&d({action:c,location:_.location,delta:0})},go:e=>a.go(e)};return _}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function w(e,t,n){void 0===n&&(n="/");let r=D(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;let i=_(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=A(i[o],P(r));return s}function _(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(h(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=U([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),_(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:N(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=b(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const I=/^:\w+$/,E=3,S=2,T=1,k=10,C=-2,x=e=>"*"===e;function N(e,t){let n=e.split("/"),r=n.length;return n.some(x)&&(r+=C),t&&(r+=S),n.filter((e=>!x(e))).reduce(((e,t)=>e+(I.test(t)?E:""===t?T:k)),r)}function A(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},c);if(!l)return null;Object.assign(r,l.params);let u=e.route;s.push({params:r,pathname:U([i,l.pathname]),pathnameBase:j(U([i,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(i=U([i,l.pathnameBase]))}return s}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=i&&!c?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return d(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c||"",r),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function P(e){try{return decodeURI(e)}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function O(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function M(e){return L(e).map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase))}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=l({},e),h(!i.pathname||!i.pathname.includes("?"),O("?","pathname","search",i)),h(!i.pathname||!i.pathname.includes("#"),O("#","pathname","hash",i)),h(!i.search||!i.search.includes("#"),O("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else if(r){let e=t[t.length-1].replace(/^\//,"").split("/");if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e.pop();i.pathname=t.join("/")}s="/"+e.join("/")}else{let e=t.length-1;if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?g(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:V(r),hash:z(i)}}(i,s),u=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}const U=e=>e.join("/").replace(/\/\/+/g,"/"),j=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],H=(new Set(q),["get",...q]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}const K=i.createContext(null);const W=i.createContext(null);const Q=i.createContext(null);const Y=i.createContext(null);const J=i.createContext({outlet:null,matches:[],isDataRoute:!1});const X=i.createContext(null);function $(){return null!=i.useContext(Y)}function Z(){return $()||h(!1),i.useContext(Y).location}function ee(e){i.useContext(Q).static||i.useLayoutEffect(e)}function te(){let{isDataRoute:e}=i.useContext(J);return e?function(){let{router:e}=de(ue.UseNavigateStable),t=pe(he.UseNavigateStable),n=i.useRef(!1);ee((()=>{n.current=!0}));let r=i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,G({fromRouteId:t},i)))}),[e,t]);return r}():function(){$()||h(!1);let e=i.useContext(K),{basename:t,navigator:n}=i.useContext(Q),{matches:r}=i.useContext(J),{pathname:s}=Z(),o=JSON.stringify(M(r)),a=i.useRef(!1);return ee((()=>{a.current=!0})),i.useCallback((function(r,i){if(void 0===i&&(i={}),!a.current)return;if("number"===typeof r)return void n.go(r);let c=F(r,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==t&&(c.pathname="/"===c.pathname?t:U([t,c.pathname])),(i.replace?n.replace:n.push)(c,i.state,i)}),[t,n,o,s,e])}()}const ne=i.createContext(null);function re(e,t){let{relative:n}=void 0===t?{}:t,{matches:r}=i.useContext(J),{pathname:s}=Z(),o=JSON.stringify(M(r));return i.useMemo((()=>F(e,JSON.parse(o),s,"path"===n)),[e,o,s,n])}function ie(e,n,r){$()||h(!1);let{navigator:s}=i.useContext(Q),{matches:o}=i.useContext(J),a=o[o.length-1],c=a?a.params:{},l=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let u,d=Z();if(n){var f;let e="string"===typeof n?g(n):n;"/"===l||(null==(f=e.pathname)?void 0:f.startsWith(l))||h(!1),u=e}else u=d;let p=u.pathname||"/",m=w(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});let v=le(m&&m.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:U([l,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:U([l,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,r);return n&&v?i.createElement(Y.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:t.Pop}},v):v}function se(){let e=function(){var e;let t=i.useContext(X),n=fe(he.UseRouteError),r=pe(he.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const oe=i.createElement(se,null);class ae extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?i.createElement(J.Provider,{value:this.props.routeContext},i.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(K);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(J.Provider,{value:t},r)}function le(e,t,n){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var s;if(null==(s=n)||!s.errors)return null;e=n.matches}let o=e,a=null==(r=n)?void 0:r.errors;if(null!=a){let e=o.findIndex((e=>e.route.id&&(null==a?void 0:a[e.route.id])));e>=0||h(!1),o=o.slice(0,Math.min(o.length,e+1))}return o.reduceRight(((e,r,s)=>{let c=r.route.id?null==a?void 0:a[r.route.id]:null,l=null;n&&(l=r.route.errorElement||oe);let u=t.concat(o.slice(0,s+1)),h=()=>{let t;return t=c?l:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(ce,{match:r,routeContext:{outlet:e,matches:u,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(ae,{location:n.location,revalidation:n.revalidation,component:l,error:c,children:h(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):h()}),null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function de(e){let t=i.useContext(K);return t||h(!1),t}function fe(e){let t=i.useContext(W);return t||h(!1),t}function pe(e){let t=function(e){let t=i.useContext(J);return t||h(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}s.startTransition;function me(e){let{to:t,replace:n,state:r,relative:s}=e;$()||h(!1);let{matches:o}=i.useContext(J),{pathname:a}=Z(),c=te(),l=F(t,M(o),a,"path"===s),u=JSON.stringify(l);return i.useEffect((()=>c(JSON.parse(u),{replace:n,state:r,relative:s})),[c,u,s,n,r]),null}function ge(e){return function(e){let t=i.useContext(J).outlet;return t?i.createElement(ne.Provider,{value:e},t):t}(e.context)}function ve(e){h(!1)}function ye(e){let{basename:n="/",children:r=null,location:s,navigationType:o=t.Pop,navigator:a,static:c=!1}=e;$()&&h(!1);let l=n.replace(/^\/*/,"/"),u=i.useMemo((()=>({basename:l,navigator:a,static:c})),[l,a,c]);"string"===typeof s&&(s=g(s));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:v="default"}=s,y=i.useMemo((()=>{let e=D(d,l);return null==e?null:{location:{pathname:e,search:f,hash:p,state:m,key:v},navigationType:o}}),[l,d,f,p,m,v,o]);return null==y?null:i.createElement(Q.Provider,{value:u},i.createElement(Y.Provider,{children:r,value:y}))}function we(e){let{children:t,location:n}=e;return ie(_e(t),n)}new Promise((()=>{}));i.Component;function _e(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,_e(e.props.children,s));e.type!==ve&&h(!1),e.props.index&&e.props.children&&h(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=_e(e.props.children,s)),n.push(o)})),n}function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},be.apply(this,arguments)}function Ie(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Se=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];const Te=i.createContext({isTransitioning:!1});new Map;const ke=s.startTransition;c.flushSync;function Ce(e){let{basename:t,children:n,future:r,window:s}=e,o=i.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),v((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:m(t)}),null,a)));let c=o.current,[l,u]=i.useState({action:c.action,location:c.location}),{v7_startTransition:h}=r||{},d=i.useCallback((e=>{h&&ke?ke((()=>u(e))):u(e)}),[u,h]);return i.useLayoutEffect((()=>c.listen(d)),[c,d]),i.createElement(ye,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:c})}const xe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ae=i.forwardRef((function(e,t){let n,{onClick:r,relative:s,reloadDocument:o,replace:a,state:c,target:l,to:u,preventScrollReset:d,unstable_viewTransition:f}=e,p=Ie(e,Ee),{basename:g}=i.useContext(Q),v=!1;if("string"===typeof u&&Ne.test(u)&&(n=u,xe))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=D(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:v=!0}catch(_){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;$()||h(!1);let{basename:r,navigator:s}=i.useContext(Q),{hash:o,pathname:a,search:c}=re(e,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:U([r,a])),s.createHref({pathname:l,search:c,hash:o})}(u,{relative:s}),w=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:c}=void 0===t?{}:t,l=te(),u=Z(),h=re(e,{relative:a});return i.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:m(u)===m(h);l(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:c})}}),[u,l,h,r,s,n,e,o,a,c])}(u,{replace:a,state:c,target:l,preventScrollReset:d,relative:s,unstable_viewTransition:f});return i.createElement("a",be({},p,{href:n||y,onClick:v||o?r:function(e){r&&r(e),e.defaultPrevented||w(e)},ref:t,target:l}))}));const Re=i.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:c,unstable_viewTransition:l,children:u}=e,d=Ie(e,Se),f=re(c,{relative:d.relative}),p=Z(),m=i.useContext(W),{navigator:g}=i.useContext(Q),v=null!=m&&function(e,t){void 0===t&&(t={});let n=i.useContext(Te);null==n&&h(!1);let{basename:r}=Oe(Pe.useViewTransitionState),s=re(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=D(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=D(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=R(s.pathname,a)||null!=R(s.pathname,o)}(f)&&!0===l,y=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(w=w.toLowerCase(),_=_?_.toLowerCase():null,y=y.toLowerCase());const b="/"!==y&&y.endsWith("/")?y.length-1:y.length;let I,E=w===y||!o&&w.startsWith(y)&&"/"===w.charAt(b),S=null!=_&&(_===y||!o&&_.startsWith(y)&&"/"===_.charAt(y.length)),T={isActive:E,isPending:S,isTransitioning:v},k=E?n:void 0;I="function"===typeof s?s(T):[s,E?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let C="function"===typeof a?a(T):a;return i.createElement(Ae,be({},d,{"aria-current":k,className:I,ref:t,style:C,to:c,unstable_viewTransition:l}),"function"===typeof u?u(T):u)}));var Pe,De;function Oe(e){let t=i.useContext(K);return t||h(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Pe||(Pe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(De||(De={}));const Le="/login/",Me="/chat",Fe="product/:productId",Ue="/addProduct",je="/profile",Ve="/",ze=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ze(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new qe;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class qe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const He=function(e){return function(e){const t=ze(e);return Be.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ge=function(e){try{return Be.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ke(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ke(e[n],t[n]));return e}const We=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Qe=()=>{try{return We()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Ge(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Ye=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Qe())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Je=()=>{var e;return null===(e=Qe())||void 0===e?void 0:e.config};class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function $e(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[He(JSON.stringify({alg:"none",type:"JWT"})),He(JSON.stringify(s)),""].join(".")}function Ze(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function et(){var e;const t=null===(e=Qe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function tt(){return"object"===typeof self&&self.self===self}function nt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function rt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function it(){const e=Ze();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function st(){return!et()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ot(){try{return"object"===typeof indexedDB}catch(e){return!1}}class at extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,at.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ct.prototype.create)}}class ct{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(lt,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new at(n,s,t)}}const lt=/\{\$([^}]+)}/g;function ut(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ht(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(dt(n)&&dt(s)){if(!ht(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function dt(e){return null!==e&&"object"===typeof e}function ft(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function pt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function mt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function gt(e,t){const n=new vt(e,t);return n.subscribe.bind(n)}class vt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=yt),void 0===r.error&&(r.error=yt),void 0===r.complete&&(r.complete=yt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function yt(){}function wt(e){return e&&e._delegate?e._delegate:e}class _t{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const bt="[DEFAULT]";class It{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Xe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:bt})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===bt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;return this.component?this.component.multipleInstances?e:bt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Et{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new It(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const St=[];var Tt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Tt||(Tt={}));const kt={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},Ct=Tt.INFO,xt={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},Nt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=xt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class At{constructor(e){this.name=e,this._logLevel=Ct,this._logHandler=Nt,this._userLogHandler=null,St.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?kt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...t),this._logHandler(this,Tt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...t),this._logHandler(this,Tt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...t),this._logHandler(this,Tt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...t),this._logHandler(this,Tt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...t),this._logHandler(this,Tt.ERROR,...t)}}const Rt=(e,t)=>t.some((t=>e instanceof t));let Pt,Dt;const Ot=new WeakMap,Lt=new WeakMap,Mt=new WeakMap,Ft=new WeakMap,Ut=new WeakMap;let jt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Lt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Mt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Vt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Dt||(Dt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(qt(this),n),Bt(Ot.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Bt(e.apply(qt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(qt(this),t,...r);return Mt.set(s,t.sort?t.sort():[t]),Bt(s)}}function zt(e){return"function"===typeof e?Vt(e):(e instanceof IDBTransaction&&function(e){if(Lt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Lt.set(e,t)}(e),Rt(e,Pt||(Pt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,jt):e)}function Bt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Bt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Ot.set(t,e)})).catch((()=>{})),Ut.set(t,e),t}(e);if(Ft.has(e))return Ft.get(e);const t=zt(e);return t!==e&&(Ft.set(e,t),Ut.set(t,e)),t}const qt=e=>Ut.get(e);const Ht=["get","getKey","getAll","getAllKeys","count"],Gt=["put","add","delete","clear"],Kt=new Map;function Wt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Kt.get(t))return Kt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Gt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ht.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Kt.set(t,s),s}jt=(e=>({...e,get:(t,n,r)=>Wt(t,n)||e.get(t,n,r),has:(t,n)=>!!Wt(t,n)||e.has(t,n)}))(jt);class Qt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Yt="@firebase/app",Jt="0.10.0",Xt=new At("@firebase/app"),$t="[DEFAULT]",Zt={[Yt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,tn=new Map,nn=new Map;function rn(e,t){try{e.container.addComponent(t)}catch(n){Xt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function sn(e,t){e.container.addOrOverwriteComponent(t)}function on(e){const t=e.name;if(nn.has(t))return Xt.debug("There were multiple attempts to register component ".concat(t,".")),!1;nn.set(t,e);for(const n of en.values())rn(n,e);for(const n of tn.values())rn(n,e);return!0}function an(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function cn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$t;an(e,t).clearInstance(n)}function ln(e){return void 0!==e.options}function un(e){return void 0!==e.settings}function hn(){nn.clear()}const dn=new ct("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class fn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new _t("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}}class pn extends fn{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,bn(Yt,Jt,"serverapp")}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){_n(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw dn.create("server-app-deleted")}}const mn="10.10.0";function gn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:$t,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw dn.create("bad-app-name",{appName:String(i)});if(n||(n=Je()),!n)throw dn.create("no-options");const s=en.get(i);if(s){if(ht(n,s.options)&&ht(r,s.config))return s;throw dn.create("duplicate-app",{appName:i})}const o=new Et(i);for(const c of nn.values())o.addComponent(c);const a=new fn(n,r,o);return en.set(i,a),a}function vn(e,t){if(tt())throw dn.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=ln(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw dn.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=tn.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new Et(i);for(const l of nn.values())a.addComponent(l);const c=new pn(n,t,i,a);return tn.set(i,c),c}function yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t;const t=en.get(e);if(!t&&e===$t&&Je())return gn();if(!t)throw dn.create("no-app",{appName:e});return t}function wn(){return Array.from(en.values())}async function _n(e){let t=!1;const n=e.name;if(en.has(n))t=!0,en.delete(n);else if(tn.has(n)){e.decRefCount()<=0&&(tn.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function bn(e,t,n){var r;let i=null!==(r=Zt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Xt.warn(e.join(" "))}on(new _t("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function In(e,t){if(null!==e&&"function"!==typeof e)throw dn.create("invalid-log-argument");!function(e,t){for(const n of St){let r=null;t&&t.level&&(r=kt[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Tt[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function En(e){var t;t=e,St.forEach((e=>{e.setLogLevel(t)}))}const Sn="firebase-heartbeat-database",Tn=1,kn="firebase-heartbeat-store";let Cn=null;function xn(){return Cn||(Cn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Bt(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Bt(o.result),e.oldVersion,e.newVersion,Bt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Sn,Tn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(kn)}catch(n){console.warn(n)}}}).catch((e=>{throw dn.create("idb-open",{originalErrorMessage:e.message})}))),Cn}async function Nn(e,t){try{const n=(await xn()).transaction(kn,"readwrite"),r=n.objectStore(kn);await r.put(t,An(e)),await n.done}catch(n){if(n instanceof at)Xt.warn(n.message);else{const e=dn.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Xt.warn(e.message)}}}function An(e){return"".concat(e.name,"!").concat(e.options.appId)}class Rn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Dn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Pn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Pn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),On(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),On(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=He(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Pn(){return(new Date).toISOString().substring(0,10)}class Dn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ot()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await xn()).transaction(kn),n=await t.objectStore(kn).get(An(e));return await t.done,n}catch(t){if(t instanceof at)Xt.warn(t.message);else{const e=dn.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Xt.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function On(e){return He(JSON.stringify({version:2,heartbeats:e})).length}var Ln;Ln="",on(new _t("platform-logger",(e=>new Qt(e)),"PRIVATE")),on(new _t("heartbeat",(e=>new Rn(e)),"PRIVATE")),bn(Yt,Jt,Ln),bn(Yt,Jt,"esm2017"),bn("fire-js","");function Mn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Fn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Un="EMAIL_SIGNIN",jn="PASSWORD_RESET",Vn="RECOVER_EMAIL",zn="REVERT_SECOND_FACTOR_ADDITION",Bn="VERIFY_AND_CHANGE_EMAIL",qn="VERIFY_EMAIL";function Hn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gn=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Kn=Hn,Wn=new ct("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qn=new At("@firebase/auth");function Yn(e){if(Qn.logLevel<=Tt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Qn.error("Auth (".concat(mn,"): ").concat(e),...n)}}function Jn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw tr(e,...n)}function Xn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return tr(e,...n)}function $n(e,t,n){const r=Object.assign(Object.assign({},Kn()),{[t]:n});return new ct("auth","Firebase",r).create(t,{appName:e.name})}function Zn(e){return $n(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function er(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Jn(e,"argument-error"),$n(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function tr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Wn.create(e,...n)}function nr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw tr(t,...r)}}function rr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Yn(t),new Error(t)}function ir(e,t){e||rr(t)}function sr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function or(){return"http:"===ar()||"https:"===ar()}function ar(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class cr{constructor(e,t){this.shortDelay=e,this.longDelay=t,ir(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())||rt()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(or()||nt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function lr(e,t){ir(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class ur{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},dr=new cr(3e4,6e4);function fr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function pr(e,t,n,r){return mr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=ft(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),ur.fetch()(vr(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function mr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},hr),t);try{const t=new wr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw _r(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw _r(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw _r(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw _r(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw $n(e,a,o);Jn(e,a)}}catch(i){if(i instanceof at)throw i;Jn(e,"network-request-failed",{message:String(i)})}}async function gr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await pr(e,t,n,r,i);return"mfaPendingCredential"in s&&Jn(e,"multi-factor-auth-required",{_serverResponse:s}),s}function vr(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?lr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function yr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Xn(this.auth,"network-request-failed"))),dr.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function _r(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Xn(e,t,r);return i.customData._tokenResponse=n,i}function br(e){return void 0!==e&&void 0!==e.getResponse}function Ir(e){return void 0!==e&&void 0!==e.enterprise}class Er{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Sr(e,t){return pr(e,"GET","/v2/recaptchaConfig",fr(e,t))}async function Tr(e,t){return pr(e,"POST","/v1/accounts:lookup",t)}function kr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Cr(e){return 1e3*Number(e)}function xr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Yn("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ge(n);return e?JSON.parse(e):(Yn("Failed to decode base64 JWT payload"),null)}catch(i){return Yn("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function Nr(e){const t=xr(e);return nr(t,"internal-error"),nr("undefined"!==typeof t.exp,"internal-error"),nr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Ar(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof at&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Rr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Pr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kr(this.lastLoginAt),this.creationTime=kr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Dr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ar(e,Tr(n,{idToken:r}));nr(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Or(s.providerUserInfo):[],a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Pr(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function Or(e){return e.map((e=>{var{providerId:t}=e,n=Mn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Lr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nr(e.idToken,"internal-error"),nr("undefined"!==typeof e.idToken,"internal-error"),nr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Nr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){nr(0!==e.length,"internal-error");const t=Nr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(nr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await mr(e,{},(async()=>{const n=ft({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=vr(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",ur.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Lr;return n&&(nr("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(nr("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(nr("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lr,this.toJSON())}_performRefresh(){return rr("not implemented")}}function Mr(e,t){nr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Fr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Mn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Pr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ar(this,this.stsTokenManager.getToken(this.auth,e));return nr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=wt(e),r=await n.getIdToken(t),i=xr(r);nr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:kr(Cr(i.auth_time)),issuedAtTime:kr(Cr(i.iat)),expirationTime:kr(Cr(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=wt(e);await Dr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(nr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){nr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Dr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(Zn(this.auth));const e=await this.getIdToken();return await Ar(this,async function(e,t){return pr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:_,providerData:b,stsTokenManager:I}=t;nr(y&&I,e,"internal-error");const E=Lr.fromJSON(this.name,I);nr("string"===typeof y,e,"internal-error"),Mr(u,e.name),Mr(h,e.name),nr("boolean"===typeof w,e,"internal-error"),nr("boolean"===typeof _,e,"internal-error"),Mr(d,e.name),Mr(f,e.name),Mr(p,e.name),Mr(m,e.name),Mr(g,e.name),Mr(v,e.name);const S=new Fr({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:v});return b&&Array.isArray(b)&&(S.providerData=b.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Lr;r.updateFromServerResponse(t);const i=new Fr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Dr(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];nr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Or(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Lr;o.updateFromIdToken(n);const a=new Fr({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Pr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,c),a}}const Ur=new Map;function jr(e){ir(e instanceof Function,"Expected a class definition");let t=Ur.get(e);return t?(ir(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ur.set(e,t),t)}class Vr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Vr.type="NONE";const zr=Vr;function Br(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class qr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Br(this.userKey,r.apiKey,i),this.fullPersistenceKey=Br("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new qr(jr(zr),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||jr(zr);const s=Br(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=Fr._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new qr(i,e,n)):new qr(i,e,n)}}function Hr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Qr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Gr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Jr(t))return"Blackberry";if(Xr(t))return"Webos";if(Kr(t))return"Safari";if((t.includes("chrome/")||Wr(t))&&!t.includes("edge/"))return"Chrome";if(Yr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Gr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/firefox\//i.test(e)}function Kr(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/crios\//i.test(e)}function Qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/iemobile/i.test(e)}function Yr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/android/i.test(e)}function Jr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/blackberry/i.test(e)}function Xr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/webos/i.test(e)}function $r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Zr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return $r(e)||Yr(e)||Xr(e)||Jr(e)||/windows phone/i.test(e)||Qr(e)}function ei(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Hr(Ze());break;case"Worker":t="".concat(Hr(Ze()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(mn,"/").concat(r)}class ti{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ni{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ri{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new si(this),this.idTokenSubscription=new si(this),this.beforeStateQueue=new ti(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jr(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await qr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Tr(this,{idToken:e}),n=await Fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(un(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return nr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dr(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject(Zn(this));const t=e?wt(e):null;return t&&nr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&nr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return un(this.app)?Promise.reject(Zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject(Zn(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(jr(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return pr(e,"GET","/v2/passwordPolicy",fr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ni(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ct("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return pr(e,"POST","/v2/accounts:revokeToken",fr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&jr(e)||this._popupRedirectResolver;nr(t,this,"argument-error"),this.redirectPersistenceManager=await qr.create(this,[jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(nr(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ei(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Qn.logLevel<=Tt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Qn.warn("Auth (".concat(mn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ii(e){return wt(e)}class si{constructor(e){this.auth=e,this.observer=null,this.addObserver=gt((e=>this.observer=e))}get next(){return nr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let oi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ai(e){return oi.loadJS(e)}function ci(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class li{constructor(e){this.type="recaptcha-enterprise",this.auth=ii(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ir(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Sr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Er(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Ir(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=oi.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ai(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ui(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new li(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function hi(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ui(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await ui(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function di(e,t,n){const r=ii(e);nr(r._canInitEmulator,r,"emulator-config-failed"),nr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=fi(t),{host:o,port:a}=function(e){const t=fi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:pi(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:pi(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fi(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function pi(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class mi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,t){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}async function gi(e,t){return pr(e,"POST","/v1/accounts:resetPassword",fr(e,t))}async function vi(e,t){return pr(e,"POST","/v1/accounts:signUp",t)}async function yi(e,t){return gr(e,"POST","/v1/accounts:signInWithPassword",fr(e,t))}async function wi(e,t){return pr(e,"POST","/v1/accounts:sendOobCode",fr(e,t))}async function _i(e,t){return wi(e,t)}async function bi(e,t){return wi(e,t)}class Ii extends mi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ii(e,t,"password")}static _fromEmailAndCode(e,t){return new Ii(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return hi(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",yi);case"emailLink":return async function(e,t){return gr(e,"POST","/v1/accounts:signInWithEmailLink",fr(e,t))}(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return hi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vi);case"emailLink":return async function(e,t){return gr(e,"POST","/v1/accounts:signInWithEmailLink",fr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ei(e,t){return gr(e,"POST","/v1/accounts:signInWithIdp",fr(e,t))}class Si extends mi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Mn(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Si(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ei(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ei(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ei(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ft(t)}return e}}const Ti={USER_NOT_FOUND:"user-not-found"};class ki extends mi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ki({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ki({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return gr(e,"POST","/v1/accounts:signInWithPhoneNumber",fr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await gr(e,"POST","/v1/accounts:signInWithPhoneNumber",fr(e,t));if(n.temporaryProof)throw _r(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return gr(e,"POST","/v1/accounts:signInWithPhoneNumber",fr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ti)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ki({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ci{constructor(e){var t,n,r,i,s,o;const a=pt(mt(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);nr(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=pt(mt(e)).link,n=t?pt(mt(t)).deep_link_id:null,r=pt(mt(e)).deep_link_id;return(r?pt(mt(r)).link:null)||r||n||t||e}(e);try{return new Ci(t)}catch(n){return null}}}class xi{constructor(){this.providerId=xi.PROVIDER_ID}static credential(e,t){return Ii._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ci.parseLink(t);return nr(n,"argument-error"),Ii._fromEmailAndCode(e,n.code,n.tenantId)}}xi.PROVIDER_ID="password",xi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",xi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ni{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ai extends Ni{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ri extends Ai{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return nr("providerId"in t&&"signInMethod"in t,"argument-error"),Si._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return nr(e.idToken||e.accessToken,"argument-error"),Si._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ri.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ri.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Ri(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(c){return null}}}class Pi extends Ai{constructor(){super("facebook.com")}static credential(e){return Si._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Pi.credential(t.oauthAccessToken)}catch(n){return null}}}Pi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Pi.PROVIDER_ID="facebook.com";class Di extends Ai{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Si._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Di.credential(n,r)}catch(i){return null}}}Di.GOOGLE_SIGN_IN_METHOD="google.com",Di.PROVIDER_ID="google.com";class Oi extends Ai{constructor(){super("github.com")}static credential(e){return Si._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Oi.credential(t.oauthAccessToken)}catch(n){return null}}}Oi.GITHUB_SIGN_IN_METHOD="github.com",Oi.PROVIDER_ID="github.com";class Li extends mi{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Ei(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ei(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ei(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Li(n,i):null}static _create(e,t){return new Li(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Mi extends Ni{constructor(e){nr(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Mi.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Mi.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Li.fromJSON(e);return nr(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Li._create(r,n)}catch(i){return null}}}class Fi extends Ai{constructor(){super("twitter.com")}static credential(e,t){return Si._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Fi.credential(n,r)}catch(i){return null}}}async function Ui(e,t){return gr(e,"POST","/v1/accounts:signUp",fr(e,t))}Fi.TWITTER_SIGN_IN_METHOD="twitter.com",Fi.PROVIDER_ID="twitter.com";class ji{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Fr._fromIdTokenResponse(e,n,r),s=Vi(n);return new ji({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Vi(n);return new ji({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Vi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class zi extends at{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,zi.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new zi(e,t,n,r)}}function Bi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw zi._fromErrorAndOperation(e,n,t,r);throw n}))}function qi(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Hi(e,t){const n=wt(e);await Ki(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return pr(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=qi(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Gi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ar(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ji._forOperation(e,"link",r)}async function Ki(e,t,n){await Dr(t);const r=!1===e?"provider-already-linked":"no-such-provider";nr(qi(t.providerData).has(n)===e,t.auth,r)}async function Wi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(un(r.app))return Promise.reject(Zn(r));const i="reauthenticate";try{const s=await Ar(e,Bi(r,i,t,e),n);nr(s.idToken,r,"internal-error");const o=xr(s.idToken);nr(o,r,"internal-error");const{sub:a}=o;return nr(e.uid===a,r,"user-mismatch"),ji._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Jn(r,"user-mismatch"),s}}async function Qi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(un(e.app))return Promise.reject(Zn(e));const r="signIn",i=await Bi(e,r,t),s=await ji._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Yi(e,t){return Qi(ii(e),t)}async function Ji(e,t){const n=wt(e);return await Ki(!1,n,t.providerId),Gi(n,t)}async function Xi(e,t){return Wi(wt(e),t)}async function $i(e,t){if(un(e.app))return Promise.reject(Zn(e));const n=ii(e),r=await async function(e,t){return gr(e,"POST","/v1/accounts:signInWithCustomToken",fr(e,t))}(n,{token:t,returnSecureToken:!0}),i=await ji._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Zi{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?es._fromServerResponse(e,t):"totpInfo"in t?ts._fromServerResponse(e,t):Jn(e,"internal-error")}}class es extends Zi{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new es(t)}}class ts extends Zi{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new ts(t)}}function ns(e,t,n){var r;nr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),nr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(nr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(nr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function rs(e){const t=ii(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function is(e,t){await async function(e,t){return pr(e,"POST","/v1/accounts:update",fr(e,t))}(wt(e),{oobCode:t})}async function ss(e,t){const n=wt(e),r=await gi(n,{oobCode:t}),i=r.requestType;switch(nr(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":nr(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":nr(r.mfaInfo,n,"internal-error");default:nr(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Zi._fromServerResponse(ii(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function os(e,t){const n={identifier:t,continueUri:or()?sr():"http://localhost"},{signinMethods:r}=await async function(e,t){return pr(e,"POST","/v1/accounts:createAuthUri",fr(e,t))}(wt(e),n);return r||[]}async function as(e,t){const n=wt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&ns(n.auth,r,t);const{email:i}=await async function(e,t){return wi(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function cs(e,t,n){const r=wt(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&ns(r.auth,i,n);const{email:s}=await async function(e,t){return wi(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function ls(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=wt(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Ar(i,async function(e,t){return pr(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function us(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Ar(e,async function(e,t){return pr(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class hs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class ds extends hs{constructor(e,t,n,r){super(e,t,n),this.username=r}}class fs extends hs{constructor(e,t){super(e,"facebook.com",t)}}class ps extends ds{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class ms extends hs{constructor(e,t){super(e,"google.com",t)}}class gs extends ds{constructor(e,t,n){super(e,"twitter.com",t,n)}}function vs(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=xr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new hs(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new fs(s,i);case"github.com":return new ps(s,i);case"google.com":return new ms(s,i);case"twitter.com":return new gs(s,i,e.screenName||null);case"custom":case"anonymous":return new hs(s,null);default:return new hs(s,r,i)}}(n)}class ys{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new ys("enroll",e,t)}static _fromMfaPendingCredential(e){return new ys("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return ys._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return ys._fromIdtoken(e.multiFactorSession.idToken)}return null}}class ws{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=ii(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Zi._fromServerResponse(n,e)));nr(r.mfaPendingCredential,n,"internal-error");const s=ys._fromMfaPendingCredential(r.mfaPendingCredential);return new ws(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await ji._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return nr(t.user,n,"internal-error"),ji._forOperation(t.user,t.operationType,o);default:Jn(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class _s{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Zi._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new _s(e)}async getSession(){return ys._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Ar(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Ar(this.user,function(e,t){return pr(e,"POST","/v2/accounts/mfaEnrollment:withdraw",fr(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const bs=new WeakMap;const Is="__sak";class Es{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Is,"1"),this.storage.removeItem(Is),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ss extends Es{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ze();return Kr(e)||$r(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Zr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);it()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ss.type="LOCAL";const Ts=Ss;class ks extends Es{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ks.type="SESSION";const Cs=ks;class xs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new xs(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}xs.receivers=[];class As{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Ns("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Rs(){return window}function Ps(){return"undefined"!==typeof Rs().WorkerGlobalScope&&"function"===typeof Rs().importScripts}const Ds="firebaseLocalStorageDb",Os="firebaseLocalStorage",Ls="fbase_key";class Ms{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Fs(e,t){return e.transaction([Os],t?"readwrite":"readonly").objectStore(Os)}function Us(){const e=indexedDB.open(Ds,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Os,{keyPath:Ls})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Os)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ds);return new Ms(e).toPromise()}(),t(await Us()))}))}))}async function js(e,t,n){const r=Fs(e,!0).put({[Ls]:t,value:n});return new Ms(r).toPromise()}function Vs(e,t){const n=Fs(e,!0).delete(t);return new Ms(n).toPromise()}class zs{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Us()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ps()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xs._getInstance(Ps()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new As(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Us();return await js(e,Is,"1"),await Vs(e,Is),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>js(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Fs(e,!1).get(t),r=await new Ms(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Vs(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Fs(e,!1).getAll();return new Ms(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}zs.type="LOCAL";const Bs=zs;const qs=1e12;class Hs{constructor(e){this.auth=e,this.counter=qs,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Gs(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||qs;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||qs;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||qs;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Gs{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;nr(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ks=ci("rcb"),Ws=new cr(3e4,6e4);class Qs{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Rs().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return nr(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&br(Rs().grecaptcha)?Promise.resolve(Rs().grecaptcha):new Promise(((n,r)=>{const i=Rs().setTimeout((()=>{r(Xn(e,"network-request-failed"))}),Ws.get());Rs()[Ks]=()=>{Rs().clearTimeout(i),delete Rs()[Ks];const s=Rs().grecaptcha;if(!s||!br(s))return void r(Xn(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};ai("".concat(oi.recaptchaV2Script,"?").concat(ft({onload:Ks,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Xn(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Rs().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ys{async load(e){return new Hs(e)}clearedOneInstance(){}}const Js="recaptcha",Xs={theme:"light",type:"image"};class $s{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Xs);this.parameters=n,this.type=Js,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ii(e),this.isInvisible="invisible"===this.parameters.size,nr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;nr(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ys:new Qs,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){nr(!this.parameters.sitekey,this.auth,"argument-error"),nr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),nr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Rs()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){nr(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){nr(or()&&!Ps(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await pr(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);nr(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return nr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zs{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ki._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function eo(e,t,n){var r;const i=await n.verify();try{let s;if(nr("string"===typeof i,e,"argument-error"),nr(n.type===Js,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){nr("enroll"===t.type,e,"internal-error");const n=await function(e,t){return pr(e,"POST","/v2/accounts/mfaEnrollment:start",fr(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{nr("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;nr(n,e,"missing-multi-factor-info");const o=await function(e,t){return pr(e,"POST","/v2/accounts/mfaSignIn:start",fr(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return pr(e,"POST","/v1/accounts:sendVerificationCode",fr(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class to{constructor(e){this.providerId=to.PROVIDER_ID,this.auth=ii(e)}verifyPhoneNumber(e,t){return eo(this.auth,e,wt(t))}static credential(e,t){return ki._fromVerification(e,t)}static credentialFromResult(e){const t=e;return to.credentialFromTaggedObject(t)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?ki._fromTokenResponse(n,r):null}}function no(e,t){return t?jr(t):(nr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}to.PROVIDER_ID="phone",to.PHONE_SIGN_IN_METHOD="phone";class ro extends mi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ei(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ei(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ei(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function io(e){return Qi(e.auth,new ro(e),e.bypassAuthState)}function so(e){const{auth:t,user:n}=e;return nr(n,t,"internal-error"),Wi(n,new ro(e),e.bypassAuthState)}async function oo(e){const{auth:t,user:n}=e;return nr(n,t,"internal-error"),Gi(n,new ro(e),e.bypassAuthState)}class ao{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return io;case"linkViaPopup":case"linkViaRedirect":return oo;case"reauthViaPopup":case"reauthViaRedirect":return so;default:Jn(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const co=new cr(2e3,1e4);class lo extends ao{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,lo.currentPopupAction&&lo.currentPopupAction.cancel(),lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nr(e,this.auth,"internal-error"),e}async onExecution(){ir(1===this.filter.length,"Popup operations only handle one event");const e=Ns();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Xn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,co.get())};e()}}lo.currentPopupAction=null;const uo="pendingRedirect",ho=new Map;class fo extends ao{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ho.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=vo(t),r=go(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}ho.set(this.auth._key(),e)}return this.bypassAuthState||ho.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function po(e,t){return go(e)._set(vo(t),"true")}function mo(e,t){ho.set(e._key(),t)}function go(e){return jr(e._redirectPersistence)}function vo(e){return Br(uo,e.config.apiKey,e.name)}function yo(e,t,n){return async function(e,t,n){if(un(e.app))return Promise.reject(Zn(e));const r=ii(e);er(e,t,Ni),await r._initializationPromise;const i=no(r,n);return await po(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function wo(e,t,n){return async function(e,t,n){const r=wt(e);if(er(r.auth,t,Ni),un(r.auth.app))return Promise.reject(Zn(r.auth));await r.auth._initializationPromise;const i=no(r.auth,n);await po(i,r.auth);const s=await Io(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function _o(e,t,n){return async function(e,t,n){const r=wt(e);er(r.auth,t,Ni),await r.auth._initializationPromise;const i=no(r.auth,n);await Ki(!1,r,t.providerId),await po(i,r.auth);const s=await Io(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function bo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(un(e.app))return Promise.reject(Zn(e));const r=ii(e),i=no(r,t),s=new fo(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Io(e){const t=Ns("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Eo{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return To(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!To(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Xn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(So(e))}saveEventToCache(e){this.cachedEventUids.add(So(e)),this.lastProcessedEventTime=Date.now()}}function So(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function To(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function ko(e){return pr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Co=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xo=/^https?/;function No(e){const t=sr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!xo.test(n))return!1;if(Co.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ao=new cr(3e4,6e4);function Ro(){const e=Rs().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Po(e){return new Promise(((t,n)=>{var r,i,s;function o(){Ro(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ro(),n(Xn(e,"network-request-failed"))},timeout:Ao.get()})}if(null===(i=null===(r=Rs().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Rs().gapi)||void 0===s?void 0:s.load)){const t=ci("iframefcb");return Rs()[t]=()=>{gapi.load?o():n(Xn(e,"network-request-failed"))},ai("".concat(oi.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Do=null,e}))}let Do=null;const Oo=new cr(5e3,15e3),Lo="__/auth/iframe",Mo="emulator/auth/iframe",Fo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jo(e){const t=e.config;nr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?lr(t,Mo):"https://".concat(e.config.authDomain,"/").concat(Lo),r={apiKey:t.apiKey,appName:e.name,v:mn},i=Uo.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(ft(r).slice(1))}async function Vo(e){const t=await function(e){return Do=Do||Po(e),Do}(e),n=Rs().gapi;return nr(n,e,"internal-error"),t.open({where:document.body,url:jo(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fo,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Xn(e,"network-request-failed"),s=Rs().setTimeout((()=>{r(i)}),Oo.get());function o(){Rs().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const zo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bo{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function qo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},zo),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ze().toLowerCase();n&&(a=Wr(l)?"_blank":n),Gr(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return $r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Bo(null);const h=window.open(t||"",a,u);nr(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Bo(h)}const Ho="__/auth/handler",Go="emulator/auth/handler",Ko=encodeURIComponent("fac");async function Wo(e,t,n,r,i,s){nr(e.config.authDomain,e,"auth-domain-config-required"),nr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:mn,eventId:i};if(t instanceof Ni){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Ai){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(Ko,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ho);return lr(t,Go)}(e),"?").concat(ft(a).slice(1)).concat(l)}const Qo="webStorageSupport";const Yo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cs,this._completeRedirectFn=bo,this._overrideRedirectResult=mo}async _openPopup(e,t,n,r){var i;ir(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return qo(e,await Wo(e,t,n,sr(),r),Ns())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Rs().location.href=e}(await Wo(e,t,n,sr(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ir(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Vo(e),n=new Eo(e);return t.register("authEvent",(t=>{nr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qo,{type:Qo},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Qo];void 0!==i&&t(!!i),Jn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ko(e);for(const r of t)try{if(No(r))return}catch(n){}Jn(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Zr()||Kr()||$r()}};class Jo{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return rr("unexpected MultiFactorSessionType")}}}class Xo extends Jo{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Xo(e)}_finalizeEnroll(e,t,n){return function(e,t){return pr(e,"POST","/v2/accounts/mfaEnrollment:finalize",fr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return pr(e,"POST","/v2/accounts/mfaSignIn:finalize",fr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class $o{constructor(){}static assertion(e){return Xo._fromCredential(e)}}$o.FACTOR_ID="phone";var Zo="@firebase/auth",ea="1.7.0";class ta{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){nr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Qe())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var na;function ra(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}function ia(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}!function(e){oi=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Xn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),na="Browser",on(new _t("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;nr(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:na,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ei(na)},l=new ri(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),on(new _t("auth-internal",(e=>(e=>new ta(e))(ii(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),bn(Zo,ea,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(na)),bn(Zo,ea,"esm2017");var sa,oa=function(){return oa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oa.apply(this,arguments)},aa=function(e){return{loading:void 0===e||null===e,value:e}},ca=function(e){var t=e?e():void 0,n=(0,i.useReducer)((function(e,t){switch(t.type){case"error":return oa(oa({},e),{error:t.error,loading:!1,value:void 0});case"reset":return aa(t.defaultValue);case"value":return oa(oa({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),aa(t)),r=n[0],s=n[1],o=(0,i.useCallback)((function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})}),[e]),a=(0,i.useCallback)((function(e){s({type:"error",error:e})}),[]),c=(0,i.useCallback)((function(e){s({type:"value",value:e})}),[]);return(0,i.useMemo)((function(){return{error:r.error,loading:r.loading,reset:o,setError:a,setValue:c,value:r.value}}),[r.error,r.loading,o,a,c,r.value])},la=function(e,t){var n=ca((function(){return e.currentUser})),r=n.error,s=n.loading,o=n.setError,a=n.setValue,c=n.value;return(0,i.useEffect)((function(){var n=function(e,t,n,r){return wt(e).onAuthStateChanged(t,n,r)}(e,(function(e){return ra(void 0,void 0,void 0,(function(){var n;return ia(this,(function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o(n),[3,4];case 4:return a(e),[2]}}))}))}),o);return function(){n()}}),[e]),[c,s,r]},ua="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ha={},da=da||{},fa=ua||self;function pa(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ma(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ga="closure_uid_"+(1e9*Math.random()>>>0),va=0;function ya(e,t,n){return e.call.apply(e.bind,arguments)}function wa(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _a(e,t,n){return(_a=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ya:wa).apply(null,arguments)}function ba(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ia(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Ea(){this.s=this.s,this.o=this.o}Ea.prototype.s=!1,Ea.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ga)&&e[ga]||(e[ga]=++va))},Ea.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Sa=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ta(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ka(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(pa(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Ca(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ca.prototype.h=function(){this.defaultPrevented=!0};var xa=function(){if(!fa.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};fa.addEventListener("test",e,t),fa.removeEventListener("test",e,t)}catch(n){}return e}();function Na(e){return/^[\s\xa0]*$/.test(e)}function Aa(){var e=fa.navigator;return e&&(e=e.userAgent)?e:""}function Ra(e){return-1!=Aa().indexOf(e)}function Pa(e){return Pa[" "](e),e}Pa[" "]=function(){};var Da,Oa,La=Ra("Opera"),Ma=Ra("Trident")||Ra("MSIE"),Fa=Ra("Edge"),Ua=Fa||Ma,ja=Ra("Gecko")&&!(-1!=Aa().toLowerCase().indexOf("webkit")&&!Ra("Edge"))&&!(Ra("Trident")||Ra("MSIE"))&&!Ra("Edge"),Va=-1!=Aa().toLowerCase().indexOf("webkit")&&!Ra("Edge");function za(){var e=fa.document;return e?e.documentMode:void 0}e:{var Ba="",qa=function(){var e=Aa();return ja?/rv:([^\);]+)(\)|;)/.exec(e):Fa?/Edge\/([\d\.]+)/.exec(e):Ma?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Va?/WebKit\/(\S+)/.exec(e):La?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(qa&&(Ba=qa?qa[1]:""),Ma){var Ha=za();if(null!=Ha&&Ha>parseFloat(Ba)){Da=String(Ha);break e}}Da=Ba}if(fa.document&&Ma){var Ga=za();Oa=Ga||(parseInt(Da,10)||void 0)}else Oa=void 0;var Ka=Oa;function Wa(e,t){if(Ca.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ja){e:{try{Pa(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Qa[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Wa.$.h.call(this)}}Ia(Wa,Ca);var Qa={2:"touch",3:"pen",4:"mouse"};Wa.prototype.h=function(){Wa.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ya="closure_listenable_"+(1e6*Math.random()|0),Ja=0;function Xa(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ja,this.fa=this.ia=!1}function $a(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Za(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function ec(e){const t={};for(const n in e)t[n]=e[n];return t}const tc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nc(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<tc.length;t++)n=tc[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function rc(e){this.src=e,this.g={},this.h=0}function ic(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Sa(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&($a(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function sc(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}rc.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=sc(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Xa(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var oc="closure_lm_"+(1e6*Math.random()|0),ac={};function cc(e,t,n,r,i){if(r&&r.once)return uc(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)cc(e,t[s],n,r,i);return null}return n=vc(n),e&&e[Ya]?e.O(t,n,ma(r)?!!r.capture:!!r,i):lc(e,t,n,!1,r,i)}function lc(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=ma(i)?!!i.capture:!!i,a=mc(e);if(a||(e[oc]=a=new rc(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=pc;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)xa||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(fc(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function uc(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)uc(e,t[s],n,r,i);return null}return n=vc(n),e&&e[Ya]?e.P(t,n,ma(r)?!!r.capture:!!r,i):lc(e,t,n,!0,r,i)}function hc(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)hc(e,t[s],n,r,i);else r=ma(r)?!!r.capture:!!r,n=vc(n),e&&e[Ya]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=sc(s=e.g[t],n,r,i))&&($a(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=mc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=sc(t,n,r,i)),(n=-1<e?t[e]:null)&&dc(n))}function dc(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ya])ic(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(fc(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=mc(t))?(ic(n,e),0==n.h&&(n.src=null,t[oc]=null)):$a(e)}}}function fc(e){return e in ac?ac[e]:ac[e]="on"+e}function pc(e,t){if(e.fa)e=!0;else{t=new Wa(t,this);var n=e.listener,r=e.la||e.src;e.ia&&dc(e),e=n.call(r,t)}return e}function mc(e){return(e=e[oc])instanceof rc?e:null}var gc="__closure_events_fn_"+(1e9*Math.random()>>>0);function vc(e){return"function"===typeof e?e:(e[gc]||(e[gc]=function(t){return e.handleEvent(t)}),e[gc])}function yc(){Ea.call(this),this.i=new rc(this),this.S=this,this.J=null}function wc(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Ca(t,e);else if(t instanceof Ca)t.target=t.target||e;else{var i=t;nc(t=new Ca(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=_c(o,r,!0,t)&&i}if(i=_c(o=t.g=e,r,!0,t)&&i,i=_c(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=_c(o=t.g=n[s],r,!1,t)&&i}function _c(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ic(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Ia(yc,Ea),yc.prototype[Ya]=!0,yc.prototype.removeEventListener=function(e,t,n,r){hc(this,e,t,n,r)},yc.prototype.N=function(){if(yc.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$a(n[r]);delete t.g[e],t.h--}}this.J=null},yc.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},yc.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var bc=fa.JSON.stringify;function Ic(){var e=Nc;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ec=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Sc),(e=>e.reset()));class Sc{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Tc(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function kc(e){fa.setTimeout((()=>{throw e}),0)}let Cc,xc=!1,Nc=new class{constructor(){this.h=this.g=null}add(e,t){const n=Ec.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ac=()=>{const e=fa.Promise.resolve(void 0);Cc=()=>{e.then(Rc)}};var Rc=()=>{for(var e;e=Ic();){try{e.h.call(e.g)}catch(n){kc(n)}var t=Ec;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}xc=!1};function Pc(e,t){yc.call(this),this.h=e||1,this.g=t||fa,this.j=_a(this.qb,this),this.l=Date.now()}function Dc(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Oc(e,t,n){if("function"===typeof e)n&&(e=_a(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=_a(e.handleEvent,e)}return 2147483647<Number(t)?-1:fa.setTimeout(e,t||0)}function Lc(e){e.g=Oc((()=>{e.g=null,e.i&&(e.i=!1,Lc(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Ia(Pc,yc),(sa=Pc.prototype).ga=!1,sa.T=null,sa.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),wc(this,"tick"),this.ga&&(Dc(this),this.start()))}},sa.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},sa.N=function(){Pc.$.N.call(this),Dc(this),delete this.g};class Mc extends Ea{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Lc(this)}N(){super.N(),this.g&&(fa.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fc(e){Ea.call(this),this.h=e,this.g={}}Ia(Fc,Ea);var Uc=[];function jc(e,t,n,r){Array.isArray(n)||(n&&(Uc[0]=n.toString()),n=Uc);for(var i=0;i<n.length;i++){var s=cc(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Vc(e){Za(e.g,(function(e,t){this.g.hasOwnProperty(t)&&dc(e)}),e),e.g={}}function zc(){this.g=!0}function Bc(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return bc(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Fc.prototype.N=function(){Fc.$.N.call(this),Vc(this)},Fc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zc.prototype.Ea=function(){this.g=!1},zc.prototype.info=function(){};var qc={},Hc=null;function Gc(){return Hc=Hc||new yc}function Kc(e){Ca.call(this,qc.Ta,e)}function Wc(e){const t=Gc();wc(t,new Kc(t))}function Qc(e,t){Ca.call(this,qc.STAT_EVENT,e),this.stat=t}function Yc(e){const t=Gc();wc(t,new Qc(t,e))}function Jc(e,t){Ca.call(this,qc.Ua,e),this.size=t}function Xc(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return fa.setTimeout((function(){e()}),t)}qc.Ta="serverreachability",Ia(Kc,Ca),qc.STAT_EVENT="statevent",Ia(Qc,Ca),qc.Ua="timingevent",Ia(Jc,Ca);var $c={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Zc={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function el(){}function tl(e){return e.h||(e.h=e.i())}function nl(){}el.prototype.h=null;var rl,il={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function sl(){Ca.call(this,"d")}function ol(){Ca.call(this,"c")}function al(){}function cl(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Fc(this),this.P=ul,e=Ua?125:void 0,this.V=new Pc(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ll}function ll(){this.i=null,this.g="",this.h=!1}Ia(sl,Ca),Ia(ol,Ca),Ia(al,el),al.prototype.g=function(){return new XMLHttpRequest},al.prototype.i=function(){return{}},rl=new al;var ul=45e3,hl={},dl={};function fl(e,t,n){e.L=1,e.A=Pl(Cl(t)),e.u=n,e.S=!0,pl(e,null)}function pl(e,t){e.G=Date.now(),yl(e),e.B=Cl(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Gl(n.i,"t",r),e.o=0,n=e.l.J,e.h=new ll,e.g=Ku(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Mc(_a(e.Pa,e,e.g),e.O)),jc(e.U,e.g,"readystatechange",e.nb),t=e.I?ec(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Wc(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ml(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function gl(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=vl(e,n),r==dl){4==t&&(e.s=4,Yc(14),i=!1),Bc(e.j,e.m,null,"[Incomplete Response]");break}if(r==hl){e.s=4,Yc(15),Bc(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Bc(e.j,e.m,r,null),El(e,r)}ml(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Yc(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Uu(t),t.M=!0,Yc(11))):(Bc(e.j,e.m,n,"[Invalid Chunked Response]"),Il(e),bl(e))}function vl(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?dl:(n=Number(t.substring(n,r)),isNaN(n)?hl:(r+=1)+n>t.length?dl:(t=t.slice(r,r+n),e.o=r+n,t))}function yl(e){e.Y=Date.now()+e.P,wl(e,e.P)}function wl(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Xc(_a(e.lb,e),t)}function _l(e){e.C&&(fa.clearTimeout(e.C),e.C=null)}function bl(e){0==e.l.H||e.J||zu(e.l,e)}function Il(e){_l(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Dc(e.V),Vc(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function El(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||$l(n.i,e)))if(!e.K&&$l(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Vu(n),Au(n)}Fu(n),Yc(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Xc(_a(n.ib,n),6e3));if(1>=Xl(n.i)&&n.oa){try{n.oa()}catch(l){}n.oa=void 0}}else qu(n,11)}else if((e.K||n.g==e)&&Vu(n),!Na(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Zl(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Rl(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Gu(r,r.J?r.pa:null,r.Y),o.K){eu(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(_l(a),yl(a)),r.g=o}else Mu(r);0<n.j.length&&Pu(n)}else"stop"!=l[0]&&"close"!=l[0]||qu(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?qu(n,7):Nu(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Wc()}catch(l){}}function Sl(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(pa(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(pa(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(pa(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(sa=cl.prototype).setTimeout=function(e){this.P=e},sa.nb=function(e){e=e.target;const t=this.M;t&&3==Eu(e)?t.l():this.Pa(e)},sa.Pa=function(e){try{if(e==this.g)e:{const u=Eu(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Ua||this.g&&(this.h.h||this.g.ja()||Su(this.g)))){this.J||4!=u||7==t||Wc(),_l(this);var n=this.g.da();this.ca=n;t:if(ml(this)){var r=Su(this.g);e="";var i=r.length,s=4==Eu(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Il(this),bl(this);var o="";break t}this.h.i=new fa.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Na(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Yc(12),Il(this),bl(this);break e}Bc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,El(this,n)}this.S?(gl(this,u,o),Ua&&this.i&&3==u&&(jc(this.U,this.V,"tick",this.mb),this.V.start())):(Bc(this.j,this.m,o,null),El(this,o)),4==u&&Il(this),this.i&&!this.J&&(4==u?zu(this.l,this):(this.i=!1,yl(this)))}else(function(e){const t={};e=(e.g&&2<=Eu(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Na(e[r]))continue;var n=Tc(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Yc(12)):(this.s=0,Yc(13)),Il(this),bl(this)}}}catch(u){}},sa.mb=function(){if(this.g){var e=Eu(this.g),t=this.g.ja();this.o<t.length&&(_l(this),gl(this,e,t),this.i&&4!=e&&yl(this))}},sa.cancel=function(){this.J=!0,Il(this)},sa.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Wc(),Yc(17)),Il(this),this.s=2,bl(this)):wl(this,this.Y-e)};var Tl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kl(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof kl){this.h=e.h,xl(this,e.j),this.s=e.s,this.g=e.g,Nl(this,e.m),this.l=e.l;var t=e.i,n=new zl;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Al(this,n),this.o=e.o}else e&&(t=String(e).match(Tl))?(this.h=!1,xl(this,t[1]||"",!0),this.s=Dl(t[2]||""),this.g=Dl(t[3]||"",!0),Nl(this,t[4]),this.l=Dl(t[5]||"",!0),Al(this,t[6]||"",!0),this.o=Dl(t[7]||"")):(this.h=!1,this.i=new zl(null,this.h))}function Cl(e){return new kl(e)}function xl(e,t,n){e.j=n?Dl(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Nl(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Al(e,t,n){t instanceof zl?(e.i=t,function(e,t){t&&!e.j&&(Bl(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ql(this,t),Gl(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ol(t,jl)),e.i=new zl(t,e.h))}function Rl(e,t,n){e.i.set(t,n)}function Pl(e){return Rl(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Dl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ol(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ll),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ll(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}kl.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ol(t,Ml,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ol(t,Ml,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ol(n,"/"==n.charAt(0)?Ul:Fl,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ol(n,Vl)),e.join("")};var Ml=/[#\/\?@]/g,Fl=/[#\?:]/g,Ul=/[#\?]/g,jl=/[#\?@]/g,Vl=/#/g;function zl(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Bl(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ql(e,t){Bl(e),t=Kl(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Hl(e,t){return Bl(e),t=Kl(e,t),e.g.has(t)}function Gl(e,t,n){ql(e,t),0<n.length&&(e.i=null,e.g.set(Kl(e,t),Ta(n)),e.h+=n.length)}function Kl(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(sa=zl.prototype).add=function(e,t){Bl(this),this.i=null,e=Kl(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},sa.forEach=function(e,t){Bl(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},sa.ta=function(){Bl(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},sa.Z=function(e){Bl(this);let t=[];if("string"===typeof e)Hl(this,e)&&(t=t.concat(this.g.get(Kl(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},sa.set=function(e,t){return Bl(this),this.i=null,Hl(this,e=Kl(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},sa.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},sa.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Wl=class{constructor(e,t){this.g=e,this.map=t}};function Ql(e){this.l=e||Yl,fa.PerformanceNavigationTiming?e=0<(e=fa.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(fa.g&&fa.g.Ka&&fa.g.Ka()&&fa.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Yl=10;function Jl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xl(e){return e.h?1:e.g?e.g.size:0}function $l(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Zl(e,t){e.g?e.g.add(t):e.h=t}function eu(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function tu(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ta(e.i)}Ql.prototype.cancel=function(){if(this.i=tu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nu,ru=class{stringify(e){return fa.JSON.stringify(e,void 0)}parse(e){return fa.JSON.parse(e,void 0)}};function iu(){this.g=new ru}function su(e,t,n){const r=n||"";try{Sl(e,(function(e,n){let i=e;ma(e)&&(i=bc(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ou(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function au(e){this.l=e.ec||null,this.j=e.ob||!1}function cu(e,t){yc.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=lu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ia(au,el),au.prototype.g=function(){return new cu(this.l,this.j)},au.prototype.i=(nu={},function(){return nu}),Ia(cu,yc);var lu=0;function uu(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function hu(e){e.readyState=4,e.l=null,e.j=null,e.A=null,du(e)}function du(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(sa=cu.prototype).open=function(e,t){if(this.readyState!=lu)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,du(this)},sa.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||fa).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},sa.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hu(this)),this.readyState=lu},sa.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,du(this)),this.g&&(this.readyState=3,du(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof fa.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uu(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},sa.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?hu(this):du(this),3==this.readyState&&uu(this)}},sa.Za=function(e){this.g&&(this.response=this.responseText=e,hu(this))},sa.Ya=function(e){this.g&&(this.response=e,hu(this))},sa.ka=function(){this.g&&hu(this)},sa.setRequestHeader=function(e,t){this.v.append(e,t)},sa.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},sa.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(cu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fu=fa.JSON.parse;function pu(e){yc.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=mu,this.L=this.M=!1}Ia(pu,yc);var mu="",gu=/^https?$/i,vu=["POST","PUT"];function yu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,wu(e),bu(e)}function wu(e){e.F||(e.F=!0,wc(e,"complete"),wc(e,"error"))}function _u(e){if(e.h&&"undefined"!=typeof da&&(!e.C[1]||4!=Eu(e)||2!=e.da()))if(e.v&&4==Eu(e))Oc(e.La,0,e);else if(wc(e,"readystatechange"),4==Eu(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Tl)[1]||null;!i&&fa.self&&fa.self.location&&(i=fa.self.location.protocol.slice(0,-1)),r=!gu.test(i?i.toLowerCase():"")}n=r}if(n)wc(e,"complete"),wc(e,"success");else{e.m=6;try{var s=2<Eu(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",wu(e)}}finally{bu(e)}}}function bu(e,t){if(e.g){Iu(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||wc(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Iu(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(fa.clearTimeout(e.A),e.A=null)}function Eu(e){return e.g?e.g.readyState:0}function Su(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case mu:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Rh){return null}}function Tu(e){let t="";return Za(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ku(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Tu(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Rl(e,t,n))}function Cu(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function xu(e){this.Ga=0,this.j=[],this.l=new zc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Cu("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Cu("baseRetryDelayMs",5e3,e),this.hb=Cu("retryDelaySeedMs",1e4,e),this.eb=Cu("forwardChannelMaxRetries",2,e),this.xa=Cu("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Ql(e&&e.concurrentRequestLimit),this.Ja=new iu,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Nu(e){if(Ru(e),3==e.H){var t=e.W++,n=Cl(e.I);if(Rl(n,"SID",e.K),Rl(n,"RID",t),Rl(n,"TYPE","terminate"),Ou(e,n),(t=new cl(e,e.l,t)).L=2,t.A=Pl(Cl(n)),n=!1,fa.navigator&&fa.navigator.sendBeacon)try{n=fa.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&fa.Image&&((new Image).src=t.A,n=!0),n||(t.g=Ku(t.l,null),t.g.ha(t.A)),t.G=Date.now(),yl(t)}Hu(e)}function Au(e){e.g&&(Uu(e),e.g.cancel(),e.g=null)}function Ru(e){Au(e),e.u&&(fa.clearTimeout(e.u),e.u=null),Vu(e),e.i.cancel(),e.m&&("number"===typeof e.m&&fa.clearTimeout(e.m),e.m=null)}function Pu(e){if(!Jl(e.i)&&!e.m){e.m=!0;var t=e.Na;Cc||Ac(),xc||(Cc(),xc=!0),Nc.add(t,e),e.C=0}}function Du(e,t){var n;n=t?t.m:e.W++;const r=Cl(e.I);Rl(r,"SID",e.K),Rl(r,"RID",n),Rl(r,"AID",e.V),Ou(e,r),e.o&&e.s&&ku(r,e.o,e.s),n=new cl(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Lu(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Zl(e.i,n),fl(n,r,t)}function Ou(e,t){e.na&&Za(e.na,(function(e,n){Rl(t,n,e)})),e.h&&Sl({},(function(e,n){Rl(t,n,e)}))}function Lu(e,t,n){n=Math.min(e.j.length,n);var r=e.h?_a(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{su(a,e,"req"+n+"_")}catch(Wd){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Mu(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Cc||Ac(),xc||(Cc(),xc=!0),Nc.add(t,e),e.A=0}}function Fu(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Xc(_a(e.Ma,e),Bu(e,e.A)),e.A++,!0)}function Uu(e){null!=e.B&&(fa.clearTimeout(e.B),e.B=null)}function ju(e){e.g=new cl(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Cl(e.wa);Rl(t,"RID","rpc"),Rl(t,"SID",e.K),Rl(t,"AID",e.V),Rl(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Rl(t,"TO",e.qa),Rl(t,"TYPE","xmlhttp"),Ou(e,t),e.o&&e.s&&ku(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Pl(Cl(t)),n.u=null,n.S=!0,pl(n,e)}function Vu(e){null!=e.v&&(fa.clearTimeout(e.v),e.v=null)}function zu(e,t){var n=null;if(e.g==t){Vu(e),Uu(e),e.g=null;var r=2}else{if(!$l(e.i,t))return;n=t.F,eu(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;wc(r=Gc(),new Jc(r,n)),Pu(e)}else Mu(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Xl(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Xc(_a(e.Na,e,t),Bu(e,e.C)),e.C++,!0))}(e,t)||2==r&&Fu(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:qu(e,5);break;case 4:qu(e,10);break;case 3:qu(e,6);break;default:qu(e,2)}}function Bu(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function qu(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=_a(e.pb,e);n||(n=new kl("//www.google.com/images/cleardot.gif"),fa.location&&"http"==fa.location.protocol||xl(n,"https"),Pl(n)),function(e,t){const n=new zc;if(fa.Image){const r=new Image;r.onload=ba(ou,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ba(ou,n,r,"TestLoadImage: error",!1,t),r.onabort=ba(ou,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ba(ou,n,r,"TestLoadImage: timeout",!1,t),fa.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Yc(2);e.H=0,e.h&&e.h.za(t),Hu(e),Ru(e)}function Hu(e){if(e.H=0,e.ma=[],e.h){const t=tu(e.i);0==t.length&&0==e.j.length||(ka(e.ma,t),ka(e.ma,e.j),e.i.i.length=0,Ta(e.j),e.j.length=0),e.h.ya()}}function Gu(e,t,n){var r=n instanceof kl?Cl(n):new kl(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Nl(r,r.m);else{var i=fa.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new kl(null);r&&xl(s,r),t&&(s.g=t),i&&Nl(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Rl(r,n,t),Rl(r,"VER",e.ra),Ou(e,r),r}function Ku(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new pu(new au({ob:n})):new pu(e.va)).Oa(e.J),t}function Wu(){}function Qu(){if(Ma&&!(10<=Number(Ka)))throw Error("Environmental error: no available transport.")}function Yu(e,t){yc.call(this),this.g=new xu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Na(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Na(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new $u(this)}function Ju(e){sl.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Xu(){ol.call(this),this.status=1}function $u(e){this.g=e}function Zu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function eh(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function th(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(sa=pu.prototype).Oa=function(e){this.M=e},sa.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():rl.g(),this.C=this.u?tl(this.u):tl(rl),this.g.onreadystatechange=_a(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void yu(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=fa.FormData&&e instanceof fa.FormData,!(0<=Sa(vu,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Iu(this),0<this.B&&((this.L=function(e){return Ma&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_a(this.ua,this)):this.A=Oc(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){yu(this,s)}},sa.ua=function(){"undefined"!=typeof da&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wc(this,"timeout"),this.abort(8))},sa.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,wc(this,"complete"),wc(this,"abort"),bu(this))},sa.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bu(this,!0)),pu.$.N.call(this)},sa.La=function(){this.s||(this.G||this.v||this.l?_u(this):this.kb())},sa.kb=function(){_u(this)},sa.isActive=function(){return!!this.g},sa.da=function(){try{return 2<Eu(this)?this.g.status:-1}catch(nu){return-1}},sa.ja=function(){try{return this.g?this.g.responseText:""}catch(nu){return""}},sa.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fu(t)}},sa.Ia=function(){return this.m},sa.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(sa=xu.prototype).ra=8,sa.H=1,sa.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new cl(this,this.l,e);let s=this.s;if(this.U&&(s?(s=ec(s),nc(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Lu(this,i,t),Rl(n=Cl(this.I),"RID",e),Rl(n,"CVER",22),this.F&&Rl(n,"X-HTTP-Session-Id",this.F),Ou(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Tu(s)))+"&"+t:this.o&&ku(n,this.o,s)),Zl(this.i,i),this.bb&&Rl(n,"TYPE","init"),this.P?(Rl(n,"$req",t),Rl(n,"SID","null"),i.aa=!0,fl(i,n,null)):fl(i,n,t),this.H=2}}else 3==this.H&&(e?Du(this,e):0==this.j.length||Jl(this.i)||Du(this))},sa.Ma=function(){if(this.u=null,ju(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Xc(_a(this.jb,this),e)}},sa.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Yc(10),Au(this),ju(this))},sa.ib=function(){null!=this.v&&(this.v=null,Au(this),Fu(this),Yc(19))},sa.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Yc(2)):(this.l.info("Failed to ping google.com"),Yc(1))},sa.isActive=function(){return!!this.h&&this.h.isActive(this)},(sa=Wu.prototype).Ba=function(){},sa.Aa=function(){},sa.za=function(){},sa.ya=function(){},sa.isActive=function(){return!0},sa.Va=function(){},Qu.prototype.g=function(e,t){return new Yu(e,t)},Ia(Yu,yc),Yu.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Yc(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Gu(e,null,e.Y),Pu(e)},Yu.prototype.close=function(){Nu(this.g)},Yu.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=bc(e),e=n);t.j.push(new Wl(t.fb++,e)),3==t.H&&Pu(t)},Yu.prototype.N=function(){this.g.h=null,delete this.j,Nu(this.g),delete this.g,Yu.$.N.call(this)},Ia(Ju,sl),Ia(Xu,ol),Ia($u,Wu),$u.prototype.Ba=function(){wc(this.g,"a")},$u.prototype.Aa=function(e){wc(this.g,new Ju(e))},$u.prototype.za=function(e){wc(this.g,new Xu)},$u.prototype.ya=function(){wc(this.g,"b")},Ia(Zu,(function(){this.blockSize=-1})),Zu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Zu.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)eh(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){eh(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){eh(this,r),i=0;break}}this.h=i,this.i+=t},Zu.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var nh={};function rh(e){return-128<=e&&128>e?function(e,t){var n=nh;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new th([0|e],0>e?-1:0)})):new th([0|e],0>e?-1:0)}function ih(e){if(isNaN(e)||!isFinite(e))return oh;if(0>e)return hh(ih(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=sh;return new th(t,0)}var sh=4294967296,oh=rh(0),ah=rh(1),ch=rh(16777216);function lh(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function uh(e){return-1==e.h}function hh(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new th(n,~e.h).add(ah)}function dh(e,t){return e.add(hh(t))}function fh(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ph(e,t){this.g=e,this.h=t}function mh(e,t){if(lh(t))throw Error("division by zero");if(lh(e))return new ph(oh,oh);if(uh(e))return t=mh(hh(e),t),new ph(hh(t.g),hh(t.h));if(uh(t))return t=mh(e,hh(t)),new ph(hh(t.g),t.h);if(30<e.g.length){if(uh(e)||uh(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ah,r=t;0>=r.X(e);)n=gh(n),r=gh(r);var i=vh(n,1),s=vh(r,1);for(r=vh(r,2),n=vh(n,2);!lh(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=vh(r,1),n=vh(n,1)}return t=dh(e,i.R(t)),new ph(i,t)}for(i=oh;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=ih(n)).R(t);uh(o)||0<o.X(e);)o=(s=ih(n-=r)).R(t);lh(s)&&(s=ah),i=i.add(s),e=dh(e,o)}return new ph(i,e)}function gh(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new th(n,e.h)}function vh(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new th(i,e.h)}(sa=th.prototype).ea=function(){if(uh(this))return-hh(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:sh+r)*t,t*=sh}return e},sa.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(lh(this))return"0";if(uh(this))return"-"+hh(this).toString(e);for(var t=ih(Math.pow(e,6)),n=this,r="";;){var i=mh(n,t).g,s=((0<(n=dh(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(lh(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},sa.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},sa.X=function(e){return uh(e=dh(this,e))?-1:lh(e)?0:1},sa.abs=function(){return uh(this)?hh(this):this},sa.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new th(n,-2147483648&n[n.length-1]?-1:0)},sa.R=function(e){if(lh(this)||lh(e))return oh;if(uh(this))return uh(e)?hh(this).R(hh(e)):hh(hh(this).R(e));if(uh(e))return hh(this.R(hh(e)));if(0>this.X(ch)&&0>e.X(ch))return ih(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,fh(n,2*r+2*i),n[2*r+2*i+1]+=s*c,fh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,fh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,fh(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new th(n,0)},sa.gb=function(e){return mh(this,e).h},sa.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new th(n,this.h&e.h)},sa.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new th(n,this.h|e.h)},sa.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new th(n,this.h^e.h)},Qu.prototype.createWebChannel=Qu.prototype.g,Yu.prototype.send=Yu.prototype.u,Yu.prototype.open=Yu.prototype.m,Yu.prototype.close=Yu.prototype.close,$c.NO_ERROR=0,$c.TIMEOUT=8,$c.HTTP_ERROR=6,Zc.COMPLETE="complete",nl.EventType=il,il.OPEN="a",il.CLOSE="b",il.ERROR="c",il.MESSAGE="d",yc.prototype.listen=yc.prototype.O,pu.prototype.listenOnce=pu.prototype.P,pu.prototype.getLastError=pu.prototype.Sa,pu.prototype.getLastErrorCode=pu.prototype.Ia,pu.prototype.getStatus=pu.prototype.da,pu.prototype.getResponseJson=pu.prototype.Wa,pu.prototype.getResponseText=pu.prototype.ja,pu.prototype.send=pu.prototype.ha,pu.prototype.setWithCredentials=pu.prototype.Oa,Zu.prototype.digest=Zu.prototype.l,Zu.prototype.reset=Zu.prototype.reset,Zu.prototype.update=Zu.prototype.j,th.prototype.add=th.prototype.add,th.prototype.multiply=th.prototype.R,th.prototype.modulo=th.prototype.gb,th.prototype.compare=th.prototype.X,th.prototype.toNumber=th.prototype.ea,th.prototype.toString=th.prototype.toString,th.prototype.getBits=th.prototype.D,th.fromNumber=ih,th.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return hh(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=ih(Math.pow(n,8)),i=oh,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=ih(Math.pow(n,o)),i=i.R(o).add(ih(a))):i=(i=i.R(r)).add(ih(a))}return i};var yh=ha.createWebChannelTransport=function(){return new Qu},wh=ha.getStatEventTarget=function(){return Gc()},_h=ha.ErrorCode=$c,bh=ha.EventType=Zc,Ih=ha.Event=qc,Eh=ha.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Sh=(ha.FetchXmlHttpFactory=au,ha.WebChannel=nl),Th=ha.XhrIo=pu,kh=ha.Md5=Zu,Ch=ha.Integer=th;const xh="@firebase/firestore";class Nh{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nh.UNAUTHENTICATED=new Nh(null),Nh.GOOGLE_CREDENTIALS=new Nh("google-credentials-uid"),Nh.FIRST_PARTY=new Nh("first-party-uid"),Nh.MOCK_USER=new Nh("mock-user");let Ah="10.10.0";const Rh=new At("@firebase/firestore");function Ph(){return Rh.logLevel}function Dh(e){if(Rh.logLevel<=Tt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Mh);Rh.debug("Firestore (".concat(Ah,"): ").concat(e),...i)}}function Oh(e){if(Rh.logLevel<=Tt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Mh);Rh.error("Firestore (".concat(Ah,"): ").concat(e),...i)}}function Lh(e){if(Rh.logLevel<=Tt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Mh);Rh.warn("Firestore (".concat(Ah,"): ").concat(e),...i)}}function Mh(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Fh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Ah,") INTERNAL ASSERTION FAILED: ")+e;throw Oh(t),new Error(t)}function Uh(e,t){e||Fh()}function jh(e,t){return e}const Vh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zh extends at{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Bh{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class qh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Hh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Nh.UNAUTHENTICATED)))}shutdown(){}}class Gh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Kh{constructor(e){this.t=e,this.currentUser=Nh.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Bh;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bh,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Dh("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Dh("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bh)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Dh("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Uh("string"==typeof t.accessToken),new qh(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Uh(null===e||"string"==typeof e),new Nh(e)}}class Wh{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Nh.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Qh{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Wh(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Nh.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Yh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jh{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Dh("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Dh("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Dh("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Dh("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Uh("string"==typeof e.token),this.R=e.token,new Yh(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Xh(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class $h{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Xh(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Zh(e,t){return e<t?-1:e>t?1:0}function ed(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function td(e){return e+"\0"}class nd{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new zh(Vh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new zh(Vh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new zh(Vh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zh(Vh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nd.fromMillis(Date.now())}static fromDate(e){return nd.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new nd(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zh(this.nanoseconds,e.nanoseconds):Zh(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rd{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rd(e)}static min(){return new rd(new nd(0,0))}static max(){return new rd(new nd(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class id{constructor(e,t,n){void 0===t?t=0:t>e.length&&Fh(),void 0===n?n=e.length-t:n>e.length-t&&Fh(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===id.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof id?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sd extends id{construct(e,t,n){return new sd(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new zh(Vh.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new sd(e)}static emptyPath(){return new sd([])}}const od=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ad extends id{construct(e,t,n){return new ad(e,t,n)}static isValidIdentifier(e){return od.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ad.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ad(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new zh(Vh.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new zh(Vh.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new zh(Vh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new zh(Vh.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ad(t)}static emptyPath(){return new ad([])}}class cd{constructor(e){this.path=e}static fromPath(e){return new cd(sd.fromString(e))}static fromName(e){return new cd(sd.fromString(e).popFirst(5))}static empty(){return new cd(sd.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sd.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sd.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cd(new sd(e.slice()))}}class ld{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function ud(e){return e.fields.find((e=>2===e.kind))}function hd(e){return e.fields.filter((e=>2!==e.kind))}ld.UNKNOWN_ID=-1;class dd{constructor(e,t){this.fieldPath=e,this.kind=t}}class fd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fd(0,gd.min())}}function pd(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=rd.fromTimestamp(1e9===r?new nd(n+1,0):new nd(n,r));return new gd(i,cd.empty(),t)}function md(e){return new gd(e.readTime,e.key,-1)}class gd{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new gd(rd.min(),cd.empty(),-1)}static max(){return new gd(rd.max(),cd.empty(),-1)}}function vd(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=cd.comparator(e.documentKey,t.documentKey),0!==n?n:Zh(e.largestBatchId,t.largestBatchId))}const yd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function _d(e){if(e.code!==Vh.FAILED_PRECONDITION||e.message!==yd)throw e;Dh("LocalStore","Unexpectedly lost primary lease")}class bd{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fh(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new bd(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof bd?t:bd.resolve(t)}catch(e){return bd.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):bd.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):bd.reject(t)}static resolve(e){return new bd(((t,n)=>{t(e)}))}static reject(e){return new bd(((t,n)=>{n(e)}))}static waitFor(e){return new bd(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=bd.resolve(!1);for(const n of e)t=t.next((e=>e?bd.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new bd(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new bd(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Id{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Bh,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Td(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Ad(t.target.error);this.V.reject(new Td(e,n))}}static open(e,t,n,r){try{return new Id(t,e.transaction(r,n))}catch(e){throw new Td(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Dh("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Cd(t)}}class Ed{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Ed.S(Ze())&&Oh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Dh("SimpleDb","Removing database:",e),xd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ot())return!1;if(Ed.C())return!0;const e=Ze(),t=Ed.S(e),n=0<t&&t<10,r=Ed.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Dh("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Td(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new zh(Vh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new zh(Vh.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Td(e,r))},r.onupgradeneeded=e=>{Dh("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Dh("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Id.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),bd.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Dh("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Sd{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return xd(this.k.delete())}}class Td extends zh{constructor(e,t){super(Vh.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function kd(e){return"IndexedDbTransactionError"===e.name}class Cd{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Dh("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Dh("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),xd(n)}add(e){return Dh("SimpleDb","ADD",this.store.name,e,e),xd(this.store.add(e))}get(e){return xd(this.store.get(e)).next((t=>(void 0===t&&(t=null),Dh("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Dh("SimpleDb","DELETE",this.store.name,e),xd(this.store.delete(e))}count(){return Dh("SimpleDb","COUNT",this.store.name),xd(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new bd(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new bd(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Dh("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new bd(((n,r)=>{t.onerror=e=>{const t=Ad(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new bd(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Sd(i),o=t(i.primaryKey,i.value,s);if(o instanceof bd){const e=o.catch((e=>(s.done(),bd.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>bd.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xd(e){return new bd(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Ad(e.target.error);n(t)}}))}let Nd=!1;function Ad(e){const t=Ed.S(Ze());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new zh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Nd||(Nd=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Rd{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Dh("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Dh("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){kd(e)?Dh("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await _d(e)}await this.ee(6e4)}))}}class Pd{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return bd.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Dh("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Dh("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=md(t);vd(r,n)>0&&(n=r)})),new gd(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Dd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Od(e){return null==e}function Ld(e){return 0===e&&1/e==-1/0}function Md(e){return"number"==typeof e&&Number.isInteger(e)&&!Ld(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Fd(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=jd(t)),t=Ud(e.get(n),t);return jd(t)}function Ud(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function jd(e){return e+"\x01\x01"}function Vd(e){const t=e.length;if(Uh(t>=2),2===t)return Uh("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),sd.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Fh(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Fh()}s=t+2}return new sd(r)}Dd._e=-1;const zd=["userId","batchId"];function Bd(e,t){return[e,Fd(t)]}function qd(e,t,n){return[e,Fd(t),n]}const Hd={},Gd=["prefixPath","collectionGroup","readTime","documentId"],Kd=["prefixPath","collectionGroup","documentId"],Wd=["collectionGroup","readTime","prefixPath","documentId"],Qd=["canonicalId","targetId"],Yd=["targetId","path"],Jd=["path","targetId"],Xd=["collectionId","parent"],$d=["indexId","uid"],Zd=["uid","sequenceNumber"],ef=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tf=["indexId","uid","orderedDocumentKey"],nf=["userId","collectionPath","documentId"],rf=["userId","collectionPath","largestBatchId"],sf=["userId","collectionGroup","largestBatchId"],of=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],af=[...of,"documentOverlays"],cf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lf=cf,uf=[...lf,"indexConfiguration","indexState","indexEntries"];class hf extends wd{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function df(e,t){const n=jh(e);return Ed.M(n.ae,t)}function ff(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function pf(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function mf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class gf{constructor(e,t){this.comparator=e,this.root=t||yf.EMPTY}insert(e,t){return new gf(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yf.BLACK,null,null))}remove(e){return new gf(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yf.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vf(this.root,e,this.comparator,!0)}}class vf{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yf{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:yf.RED,this.left=null!=r?r:yf.EMPTY,this.right=null!=i?i:yf.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new yf(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return yf.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return yf.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fh();if(this.right.isRed())throw Fh();const e=this.left.check();if(e!==this.right.check())throw Fh();return e+(this.isRed()?0:1)}}yf.EMPTY=null,yf.RED=!0,yf.BLACK=!1,yf.EMPTY=new class{constructor(){this.size=0}get key(){throw Fh()}get value(){throw Fh()}get color(){throw Fh()}get left(){throw Fh()}get right(){throw Fh()}copy(e,t,n,r,i){return this}insert(e,t,n){return new yf(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wf{constructor(e){this.comparator=e,this.data=new gf(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _f(this.data.getIterator())}getIteratorFrom(e){return new _f(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof wf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new wf(this.comparator);return t.data=e,t}}class _f{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bf(e){return e.hasNext()?e.getNext():void 0}class If{constructor(e){this.fields=e,e.sort(ad.comparator)}static empty(){return new If([])}unionWith(e){let t=new wf(ad.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new If(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ed(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ef extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sf{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ef("Invalid base64 string: "+e):e}}(e);return new Sf(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Sf(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zh(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sf.EMPTY_BYTE_STRING=new Sf("");const Tf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kf(e){if(Uh(!!e),"string"==typeof e){let t=0;const n=Tf.exec(e);if(Uh(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Cf(e.seconds),nanos:Cf(e.nanos)}}function Cf(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function xf(e){return"string"==typeof e?Sf.fromBase64String(e):Sf.fromUint8Array(e)}function Nf(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Af(e){const t=e.mapValue.fields.__previous_value__;return Nf(t)?Af(t):t}function Rf(e){const t=kf(e.mapValue.fields.__local_write_time__.timestampValue);return new nd(t.seconds,t.nanos)}class Pf{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Df{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Df("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Df&&e.projectId===this.projectId&&e.database===this.database}}const Of={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lf={nullValue:"NULL_VALUE"};function Mf(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Nf(e)?4:Jf(e)?9007199254740991:10:Fh()}function Ff(e,t){if(e===t)return!0;const n=Mf(e);if(n!==Mf(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Rf(e).isEqual(Rf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=kf(e.timestampValue),r=kf(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return xf(e.bytesValue).isEqual(xf(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Cf(e.geoPointValue.latitude)===Cf(t.geoPointValue.latitude)&&Cf(e.geoPointValue.longitude)===Cf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Cf(e.integerValue)===Cf(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Cf(e.doubleValue),r=Cf(t.doubleValue);return n===r?Ld(n)===Ld(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ed(e.arrayValue.values||[],t.arrayValue.values||[],Ff);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ff(n)!==ff(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ff(n[i],r[i])))return!1;return!0}(e,t);default:return Fh()}}function Uf(e,t){return void 0!==(e.values||[]).find((e=>Ff(e,t)))}function jf(e,t){if(e===t)return 0;const n=Mf(e),r=Mf(t);if(n!==r)return Zh(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Zh(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Cf(e.integerValue||e.doubleValue),r=Cf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Vf(e.timestampValue,t.timestampValue);case 4:return Vf(Rf(e),Rf(t));case 5:return Zh(e.stringValue,t.stringValue);case 6:return function(e,t){const n=xf(e),r=xf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Zh(n[i],r[i]);if(0!==e)return e}return Zh(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Zh(Cf(e.latitude),Cf(t.latitude));return 0!==n?n:Zh(Cf(e.longitude),Cf(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=jf(n[i],r[i]);if(e)return e}return Zh(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Of.mapValue&&t===Of.mapValue)return 0;if(e===Of.mapValue)return 1;if(t===Of.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Zh(r[o],s[o]);if(0!==e)return e;const t=jf(n[r[o]],i[s[o]]);if(0!==t)return t}return Zh(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Fh()}}function Vf(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Zh(e,t);const n=kf(e),r=kf(t),i=Zh(n.seconds,r.seconds);return 0!==i?i:Zh(n.nanos,r.nanos)}function zf(e){return Bf(e)}function Bf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=kf(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return xf(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return cd.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Bf(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Bf(e.fields[i]));return n+"}"}(e.mapValue):Fh()}function qf(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Hf(e){return!!e&&"integerValue"in e}function Gf(e){return!!e&&"arrayValue"in e}function Kf(e){return!!e&&"nullValue"in e}function Wf(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Qf(e){return!!e&&"mapValue"in e}function Yf(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return pf(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Yf(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Yf(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Jf(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Xf(e){return"nullValue"in e?Lf:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?qf(Df.empty(),cd.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Fh()}function $f(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?qf(Df.empty(),cd.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Of:Fh()}function Zf(e,t){const n=jf(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function ep(e,t){const n=jf(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class tp{constructor(e){this.value=e}static empty(){return new tp({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Qf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yf(t)}setAll(e){let t=ad.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Yf(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Qf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ff(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Qf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){pf(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new tp(Yf(this.value))}}function np(e){const t=[];return pf(e.fields,((e,n)=>{const r=new ad([e]);if(Qf(n)){const e=np(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new If(t)}class rp{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new rp(e,0,rd.min(),rd.min(),rd.min(),tp.empty(),0)}static newFoundDocument(e,t,n,r){return new rp(e,1,t,rd.min(),n,r,0)}static newNoDocument(e,t){return new rp(e,2,t,rd.min(),rd.min(),tp.empty(),0)}static newUnknownDocument(e,t){return new rp(e,3,t,rd.min(),rd.min(),tp.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tp.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tp.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rd.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rp&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rp(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ip{constructor(e,t){this.position=e,this.inclusive=t}}function sp(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?cd.comparator(cd.fromName(o.referenceValue),n.key):jf(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function op(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ff(e.position[n],t.position[n]))return!1;return!0}class ap{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function cp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class lp{}class up extends lp{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new _p(e,t,n):"array-contains"===t?new Sp(e,n):"in"===t?new Tp(e,n):"not-in"===t?new kp(e,n):"array-contains-any"===t?new Cp(e,n):new up(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new bp(e,n):new Ip(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(jf(t,this.value)):null!==t&&Mf(this.value)===Mf(t)&&this.matchesComparison(jf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fh()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hp extends lp{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new hp(e,t)}matches(e){return dp(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function dp(e){return"and"===e.op}function fp(e){return"or"===e.op}function pp(e){return mp(e)&&dp(e)}function mp(e){for(const t of e.filters)if(t instanceof hp)return!1;return!0}function gp(e){if(e instanceof up)return e.field.canonicalString()+e.op.toString()+zf(e.value);if(pp(e))return e.filters.map((e=>gp(e))).join(",");{const t=e.filters.map((e=>gp(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function vp(e,t){return e instanceof up?function(e,t){return t instanceof up&&e.op===t.op&&e.field.isEqual(t.field)&&Ff(e.value,t.value)}(e,t):e instanceof hp?function(e,t){return t instanceof hp&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&vp(n,t.filters[r])),!0)}(e,t):void Fh()}function yp(e,t){const n=e.filters.concat(t);return hp.create(n,e.op)}function wp(e){return e instanceof up?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(zf(e.value))}(e):e instanceof hp?function(e){return e.op.toString()+" {"+e.getFilters().map(wp).join(" ,")+"}"}(e):"Filter"}class _p extends up{constructor(e,t,n){super(e,t,n),this.key=cd.fromName(n.referenceValue)}matches(e){const t=cd.comparator(e.key,this.key);return this.matchesComparison(t)}}class bp extends up{constructor(e,t){super(e,"in",t),this.keys=Ep("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ip extends up{constructor(e,t){super(e,"not-in",t),this.keys=Ep("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ep(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>cd.fromName(e.referenceValue)))}class Sp extends up{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gf(t)&&Uf(t.arrayValue,this.value)}}class Tp extends up{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Uf(this.value.arrayValue,t)}}class kp extends up{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Uf(this.value.arrayValue,t)}}class Cp extends up{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Uf(this.value.arrayValue,e)))}}class xp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Np(e){return new xp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ap(e){const t=jh(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>gp(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Od(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>zf(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>zf(e))).join(",")),t.ce=e}return t.ce}function Rp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!cp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!op(e.startAt,t.startAt)&&op(e.endAt,t.endAt)}function Pp(e){return cd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Dp(e,t){return e.filters.filter((e=>e instanceof up&&e.field.isEqual(t)))}function Op(e,t,n){let r=Lf,i=!0;for(const s of Dp(e,t)){let e=Lf,t=!0;switch(s.op){case"<":case"<=":e=Xf(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Lf}Zf({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Zf({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Lp(e,t,n){let r=Of,i=!0;for(const s of Dp(e,t)){let e=Of,t=!0;switch(s.op){case">=":case">":e=$f(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Of}ep({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];ep({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Mp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Fp(e,t,n,r,i,s,o,a){return new Mp(e,t,n,r,i,s,o,a)}function Up(e){return new Mp(e)}function jp(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Vp(e){return null!==e.collectionGroup}function zp(e){const t=jh(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new wf(ad.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new ap(r,n))})),e.has(ad.keyField().canonicalString())||t.le.push(new ap(ad.keyField(),n))}return t.le}function Bp(e){const t=jh(e);return t.he||(t.he=qp(t,zp(e))),t.he}function qp(e,t){if("F"===e.limitType)return Np(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ap(e.field,t)}));const n=e.endAt?new ip(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ip(e.startAt.position,e.startAt.inclusive):null;return Np(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Hp(e,t){const n=e.filters.concat([t]);return new Mp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Gp(e,t,n){return new Mp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Kp(e,t){return Rp(Bp(e),Bp(t))&&e.limitType===t.limitType}function Wp(e){return"".concat(Ap(Bp(e)),"|lt:").concat(e.limitType)}function Qp(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>wp(e))).join(", "),"]")),Od(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>zf(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>zf(e))).join(",")),"Target(".concat(t,")")}(Bp(e)),"; limitType=").concat(e.limitType,")")}function Yp(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):cd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of zp(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=sp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,zp(e),t))&&!(e.endAt&&!function(e,t,n){const r=sp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,zp(e),t))}(e,t)}function Jp(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Xp(e){return(t,n)=>{let r=!1;for(const i of zp(e)){const e=$p(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function $p(e,t,n){const r=e.field.isKeyField()?cd.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?jf(r,i):Fh()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Fh()}}class Zp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){pf(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return mf(this.inner)}size(){return this.innerSize}}const em=new gf(cd.comparator);function tm(){return em}const nm=new gf(cd.comparator);function rm(){let e=nm;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function im(e){let t=nm;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function sm(){return am()}function om(){return am()}function am(){return new Zp((e=>e.toString()),((e,t)=>e.isEqual(t)))}const cm=new gf(cd.comparator),lm=new wf(cd.comparator);function um(){let e=lm;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const hm=new wf(Zh);function dm(){return hm}function fm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ld(t)?"-0":t}}function pm(e){return{integerValue:""+e}}function mm(e,t){return Md(t)?pm(t):fm(e,t)}class gm{constructor(){this._=void 0}}function vm(e,t,n){return e instanceof _m?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Nf(t)&&(t=Af(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof bm?Im(e,t):e instanceof Em?Sm(e,t):function(e,t){const n=wm(e,t),r=km(n)+km(e.Ie);return Hf(n)&&Hf(e.Ie)?pm(r):fm(e.serializer,r)}(e,t)}function ym(e,t,n){return e instanceof bm?Im(e,t):e instanceof Em?Sm(e,t):n}function wm(e,t){return e instanceof Tm?function(e){return Hf(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class _m extends gm{}class bm extends gm{constructor(e){super(),this.elements=e}}function Im(e,t){const n=Cm(t);for(const r of e.elements)n.some((e=>Ff(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Em extends gm{constructor(e){super(),this.elements=e}}function Sm(e,t){let n=Cm(t);for(const r of e.elements)n=n.filter((e=>!Ff(e,r)));return{arrayValue:{values:n}}}class Tm extends gm{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function km(e){return Cf(e.integerValue||e.doubleValue)}function Cm(e){return Gf(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class xm{constructor(e,t){this.field=e,this.transform=t}}class Nm{constructor(e,t){this.version=e,this.transformResults=t}}class Am{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Am}static exists(e){return new Am(void 0,e)}static updateTime(e){return new Am(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Pm{}function Dm(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new qm(e.key,Am.none()):new Um(e.key,e.data,Am.none());{const n=e.data,r=tp.empty();let i=new wf(ad.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new jm(e.key,r,new If(i.toArray()),Am.none())}}function Om(e,t,n){e instanceof Um?function(e,t,n){const r=e.value.clone(),i=zm(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof jm?function(e,t,n){if(!Rm(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=zm(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Vm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Lm(e,t,n,r){return e instanceof Um?function(e,t,n,r){if(!Rm(e.precondition,t))return n;const i=e.value.clone(),s=Bm(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof jm?function(e,t,n,r){if(!Rm(e.precondition,t))return n;const i=Bm(e.fieldTransforms,r,t),s=t.data;return s.setAll(Vm(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Rm(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Mm(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=wm(r.transform,e||null);null!=i&&(null===n&&(n=tp.empty()),n.set(r.field,i))}return n||null}function Fm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ed(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof bm&&t instanceof bm||e instanceof Em&&t instanceof Em?ed(e.elements,t.elements,Ff):e instanceof Tm&&t instanceof Tm?Ff(e.Ie,t.Ie):e instanceof _m&&t instanceof _m}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Um extends Pm{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jm extends Pm{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Vm(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function zm(e,t,n){const r=new Map;Uh(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,ym(o,a,n[i]))}return r}function Bm(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,vm(e,s,t))}return r}class qm extends Pm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hm extends Pm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gm{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Om(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Lm(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Lm(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=om();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Dm(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(rd.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),um())}isEqual(e){return this.batchId===e.batchId&&ed(this.mutations,e.mutations,((e,t)=>Fm(e,t)))&&ed(this.baseMutations,e.baseMutations,((e,t)=>Fm(e,t)))}}class Km{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Uh(e.mutations.length===n.length);let r=cm;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Km(e,t,n,r)}}class Wm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Qm{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ym,Jm;function Xm(e){switch(e){default:return Fh();case Vh.CANCELLED:case Vh.UNKNOWN:case Vh.DEADLINE_EXCEEDED:case Vh.RESOURCE_EXHAUSTED:case Vh.INTERNAL:case Vh.UNAVAILABLE:case Vh.UNAUTHENTICATED:return!1;case Vh.INVALID_ARGUMENT:case Vh.NOT_FOUND:case Vh.ALREADY_EXISTS:case Vh.PERMISSION_DENIED:case Vh.FAILED_PRECONDITION:case Vh.ABORTED:case Vh.OUT_OF_RANGE:case Vh.UNIMPLEMENTED:case Vh.DATA_LOSS:return!0}}function $m(e){if(void 0===e)return Oh("GRPC error has no .code"),Vh.UNKNOWN;switch(e){case Ym.OK:return Vh.OK;case Ym.CANCELLED:return Vh.CANCELLED;case Ym.UNKNOWN:return Vh.UNKNOWN;case Ym.DEADLINE_EXCEEDED:return Vh.DEADLINE_EXCEEDED;case Ym.RESOURCE_EXHAUSTED:return Vh.RESOURCE_EXHAUSTED;case Ym.INTERNAL:return Vh.INTERNAL;case Ym.UNAVAILABLE:return Vh.UNAVAILABLE;case Ym.UNAUTHENTICATED:return Vh.UNAUTHENTICATED;case Ym.INVALID_ARGUMENT:return Vh.INVALID_ARGUMENT;case Ym.NOT_FOUND:return Vh.NOT_FOUND;case Ym.ALREADY_EXISTS:return Vh.ALREADY_EXISTS;case Ym.PERMISSION_DENIED:return Vh.PERMISSION_DENIED;case Ym.FAILED_PRECONDITION:return Vh.FAILED_PRECONDITION;case Ym.ABORTED:return Vh.ABORTED;case Ym.OUT_OF_RANGE:return Vh.OUT_OF_RANGE;case Ym.UNIMPLEMENTED:return Vh.UNIMPLEMENTED;case Ym.DATA_LOSS:return Vh.DATA_LOSS;default:return Fh()}}(Jm=Ym||(Ym={}))[Jm.OK=0]="OK",Jm[Jm.CANCELLED=1]="CANCELLED",Jm[Jm.UNKNOWN=2]="UNKNOWN",Jm[Jm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jm[Jm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jm[Jm.NOT_FOUND=5]="NOT_FOUND",Jm[Jm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jm[Jm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jm[Jm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jm[Jm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jm[Jm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jm[Jm.ABORTED=10]="ABORTED",Jm[Jm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jm[Jm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jm[Jm.INTERNAL=13]="INTERNAL",Jm[Jm.UNAVAILABLE=14]="UNAVAILABLE",Jm[Jm.DATA_LOSS=15]="DATA_LOSS";let Zm=null;function eg(){return new TextEncoder}const tg=new Ch([4294967295,4294967295],0);function ng(e){const t=eg().encode(e),n=new kh;return n.update(t),new Uint8Array(n.digest())}function rg(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ch([n,r],0),new Ch([i,s],0)]}class ig{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new sg("Invalid padding: ".concat(t));if(n<0)throw new sg("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new sg("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new sg("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Ch.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Ch.fromNumber(n)));return 1===r.compare(tg)&&(r=new Ch([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=ng(e),[n,r]=rg(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ig(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=ng(e),[n,r]=rg(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class sg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class og{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ag.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new og(rd.min(),r,new gf(Zh),tm(),um())}}class ag{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ag(n,t,um(),um(),um())}}class cg{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class lg{constructor(e,t){this.targetId=e,this.fe=t}}class ug{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sf.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class hg{constructor(){this.ge=0,this.pe=pg(),this.ye=Sf.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=um(),t=um(),n=um();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Fh()}})),new ag(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=pg()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Uh(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class dg{constructor(e){this.Be=e,this.ke=new Map,this.qe=tm(),this.Qe=fg(),this.Ke=new gf(Zh)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Fh()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Pp(i))if(0===n){const e=new cd(i.path);this.We(t,e,rp.newNoDocument(e,rd.min()))}else Uh(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Zm||Zm.tt(function(e,t,n,r,i){var s,o,a,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Be.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=xf(n).toUint8Array()}catch(e){if(e instanceof Ef)return Lh("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ig(s,r,i)}catch(e){return Lh(e instanceof sg?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Be.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Be.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Pp(i.target)){const t=new cd(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,rp.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=um();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new og(e,t,this.Ke,this.qe,n);return this.qe=tm(),this.Qe=fg(),this.Ke=new gf(Zh),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new hg,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new wf(Zh),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Dh("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new hg),this.Be.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function fg(){return new gf(cd.comparator)}function pg(){return new gf(cd.comparator)}const mg={asc:"ASCENDING",desc:"DESCENDING"},gg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vg={and:"AND",or:"OR"};class yg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wg(e,t){return e.useProto3Json||Od(t)?t:{value:t}}function _g(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function bg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ig(e,t){return _g(e,t.toTimestamp())}function Eg(e){return Uh(!!e),rd.fromTimestamp(function(e){const t=kf(e);return new nd(t.seconds,t.nanos)}(e))}function Sg(e,t){return Tg(e,t).canonicalString()}function Tg(e,t){const n=function(e){return new sd(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function kg(e){const t=sd.fromString(e);return Uh(Qg(t)),t}function Cg(e,t){return Sg(e.databaseId,t.path)}function xg(e,t){const n=kg(t);if(n.get(1)!==e.databaseId.projectId)throw new zh(Vh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new zh(Vh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cd(Pg(n))}function Ng(e,t){return Sg(e.databaseId,t)}function Ag(e){const t=kg(e);return 4===t.length?sd.emptyPath():Pg(t)}function Rg(e){return new sd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Pg(e){return Uh(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Dg(e,t,n){return{name:Cg(e,t),fields:n.value.mapValue.fields}}function Og(e,t,n){const r=xg(e,t.name),i=Eg(t.updateTime),s=t.createTime?Eg(t.createTime):rd.min(),o=new tp({mapValue:{fields:t.fields}}),a=rp.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Lg(e,t){let n;if(t instanceof Um)n={update:Dg(e,t.key,t.value)};else if(t instanceof qm)n={delete:Cg(e,t.key)};else if(t instanceof jm)n={update:Dg(e,t.key,t.data),updateMask:Wg(t.fieldMask)};else{if(!(t instanceof Hm))return Fh();n={verify:Cg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof _m)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof bm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Em)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Tm)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Fh()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ig(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Fh()}(e,t.precondition)),n}function Mg(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Am.updateTime(Eg(e.updateTime)):void 0!==e.exists?Am.exists(e.exists):Am.none()}(t.currentDocument):Am.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Uh("REQUEST_TIME"===t.setToServerValue),n=new _m;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new bm(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Em(e)}else"increment"in t?n=new Tm(e,t.increment):Fh();const r=ad.fromServerFormat(t.fieldPath);return new xm(r,n)}(e,t))):[];if(t.update){t.update.name;const i=xg(e,t.update.name),s=new tp({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new If(t.map((e=>ad.fromServerFormat(e))))}(t.updateMask);return new jm(i,s,e,n,r)}return new Um(i,s,n,r)}if(t.delete){const r=xg(e,t.delete);return new qm(r,n)}if(t.verify){const r=xg(e,t.verify);return new Hm(r,n)}return Fh()}function Fg(e,t){return{documents:[Ng(e,t.path)]}}function Ug(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ng(e,i);const s=function(e){if(0!==e.length)return Kg(hp.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Hg(e.field),direction:zg(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wg(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function jg(e){let t=Ag(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Uh(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Vg(e);return t instanceof hp&&pp(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new ap(Gg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Od(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new ip(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new ip(n,t)}(n.endAt)),Fp(t,i,o,s,a,"F",c,l)}function Vg(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Gg(e.unaryFilter.field);return up.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Gg(e.unaryFilter.field);return up.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Gg(e.unaryFilter.field);return up.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Gg(e.unaryFilter.field);return up.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fh()}}(e):void 0!==e.fieldFilter?function(e){return up.create(Gg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fh()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return hp.create(e.compositeFilter.filters.map((e=>Vg(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Fh()}}(e.compositeFilter.op))}(e):Fh()}function zg(e){return mg[e]}function Bg(e){return gg[e]}function qg(e){return vg[e]}function Hg(e){return{fieldPath:e.canonicalString()}}function Gg(e){return ad.fromServerFormat(e.fieldPath)}function Kg(e){return e instanceof up?function(e){if("=="===e.op){if(Wf(e.value))return{unaryFilter:{field:Hg(e.field),op:"IS_NAN"}};if(Kf(e.value))return{unaryFilter:{field:Hg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wf(e.value))return{unaryFilter:{field:Hg(e.field),op:"IS_NOT_NAN"}};if(Kf(e.value))return{unaryFilter:{field:Hg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hg(e.field),op:Bg(e.op),value:e.value}}}(e):e instanceof hp?function(e){const t=e.getFilters().map((e=>Kg(e)));return 1===t.length?t[0]:{compositeFilter:{op:qg(e.op),filters:t}}}(e):Fh()}function Wg(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Qg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Yg{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rd.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:rd.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Sf.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Yg(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Yg(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Jg{constructor(e){this.ct=e}}function Xg(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:$g(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Cg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:_g(e,t.version.toTimestamp()),createTime:_g(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Zg(t.version)};else{if(!t.isUnknownDocument())return Fh();r.unknownDocument={path:n.path.toArray(),version:Zg(t.version)}}return r}function $g(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Zg(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ev(e){const t=new nd(e.seconds,e.nanoseconds);return rd.fromTimestamp(t)}function tv(e,t){const n=(t.baseMutations||[]).map((t=>Mg(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Mg(e.ct,t))),i=nd.fromMillis(t.localWriteTimeMs);return new Gm(t.batchId,i,n,r)}function nv(e){const t=ev(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?ev(e.lastLimboFreeSnapshotVersion):rd.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Uh(1===e.documents.length),Bp(Up(Ag(e.documents[0])))}(e.query):function(e){return Bp(jg(e))}(e.query),new Yg(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Sf.fromBase64String(e.resumeToken))}function rv(e,t){const n=Zg(t.snapshotVersion),r=Zg(t.lastLimboFreeSnapshotVersion);let i;i=Pp(t.target)?Fg(e.ct,t.target):Ug(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ap(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function iv(e){const t=jg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Gp(t,t.limit,"L"):t}function sv(e,t){return new Wm(t.largestBatchId,Mg(e.ct,t.overlayMutation))}function ov(e,t){const n=t.path.lastSegment();return[e,Fd(t.path.popLast()),n]}function av(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Zg(r.readTime),documentKey:Fd(r.documentKey.path),largestBatchId:r.largestBatchId}}class cv{getBundleMetadata(e,t){return lv(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:ev(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return lv(e).put(function(e){return{bundleId:e.id,createTime:Zg(Eg(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return uv(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:iv(e.bundledQuery),readTime:ev(e.readTime)}}(e)}))}saveNamedQuery(e,t){return uv(e).put(function(e){return{name:e.name,readTime:Zg(Eg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function lv(e){return df(e,"bundles")}function uv(e){return df(e,"namedQueries")}class hv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new hv(e,n)}getOverlay(e,t){return dv(e).get(ov(this.userId,t)).next((e=>e?sv(this.serializer,e):null))}getOverlays(e,t){const n=sm();return bd.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Wm(t,i);r.push(this.ht(e,s))})),bd.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Fd(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(dv(e).H("collectionPathOverlayIndex",r))})),bd.waitFor(i)}getOverlaysForCollection(e,t,n){const r=sm(),i=Fd(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return dv(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=sv(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=sm();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dv(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=sv(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return dv(e).put(function(e,t,n){const[r,i,s]=ov(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Lg(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function dv(e){return df(e,"documentOverlays")}class fv{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Cf(e.integerValue));else if("doubleValue"in e){const n=Cf(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Ld(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(xf(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Jf(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Fh()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),cd.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function pv(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function mv(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=pv(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}fv.bt=new fv;class gv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=mv(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=mv(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class vv{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class yv{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class wv{constructor(){this.Gt=new gv,this.zt=new vv(this.Gt),this.jt=new yv(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class _v{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new _v(this.indexId,this.documentKey,this.arrayValue,n)}}function bv(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Iv(e.arrayValue,t.arrayValue),0!==n?n:(n=Iv(e.directionalValue,t.directionalValue),0!==n?n:cd.comparator(e.documentKey,t.documentKey)))}function Iv(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Ev{constructor(e){this.Yt=new wf(((e,t)=>ad.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Uh(e.collectionGroup===this.collectionId),this.en)return!1;const t=ud(e);if(void 0!==t&&!this.nn(t))return!1;const n=hd(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new wf(ad.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new dd(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new dd(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new dd(n.field,"asc"===n.dir?0:1)));return new ld(ld.UNKNOWN_ID,this.collectionId,t,fd.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Sv(e){var t,n;if(Uh(e instanceof up||e instanceof hp),e instanceof up){if(e instanceof Tp){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>up.create(e.field,"==",t))))||[];return hp.create(r,"or")}return e}const r=e.filters.map((e=>Sv(e)));return hp.create(r,e.op)}function Tv(e){if(0===e.getFilters().length)return[];const t=Nv(Sv(e));return Uh(xv(t)),kv(t)||Cv(t)?[t]:t.getFilters()}function kv(e){return e instanceof up}function Cv(e){return e instanceof hp&&pp(e)}function xv(e){return kv(e)||Cv(e)||function(e){if(e instanceof hp&&fp(e)){for(const t of e.getFilters())if(!kv(t)&&!Cv(t))return!1;return!0}return!1}(e)}function Nv(e){if(Uh(e instanceof up||e instanceof hp),e instanceof up)return e;if(1===e.filters.length)return Nv(e.filters[0]);const t=e.filters.map((e=>Nv(e)));let n=hp.create(t,e.op);return n=Pv(n),xv(n)?n:(Uh(n instanceof hp),Uh(dp(n)),Uh(n.filters.length>1),n.filters.reduce(((e,t)=>Av(e,t))))}function Av(e,t){let n;return Uh(e instanceof up||e instanceof hp),Uh(t instanceof up||t instanceof hp),n=e instanceof up?t instanceof up?function(e,t){return hp.create([e,t],"and")}(e,t):Rv(e,t):t instanceof up?Rv(t,e):function(e,t){if(Uh(e.filters.length>0&&t.filters.length>0),dp(e)&&dp(t))return yp(e,t.getFilters());const n=fp(e)?e:t,r=fp(e)?t:e,i=n.filters.map((e=>Av(e,r)));return hp.create(i,"or")}(e,t),Pv(n)}function Rv(e,t){if(dp(t))return yp(t,e.getFilters());{const n=t.filters.map((t=>Av(e,t)));return hp.create(n,"or")}}function Pv(e){if(Uh(e instanceof up||e instanceof hp),e instanceof up)return e;const t=e.getFilters();if(1===t.length)return Pv(t[0]);if(mp(e))return e;const n=t.map((e=>Pv(e))),r=[];return n.forEach((t=>{t instanceof up?r.push(t):t instanceof hp&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:hp.create(r,e.op)}class Dv{constructor(){this._n=new Ov}addToCollectionParentIndex(e,t){return this._n.add(t),bd.resolve()}getCollectionParents(e,t){return bd.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return bd.resolve()}deleteFieldIndex(e,t){return bd.resolve()}deleteAllFieldIndexes(e){return bd.resolve()}createTargetIndexes(e,t){return bd.resolve()}getDocumentsMatchingTarget(e,t){return bd.resolve(null)}getIndexType(e,t){return bd.resolve(0)}getFieldIndexes(e,t){return bd.resolve([])}getNextCollectionGroupToUpdate(e){return bd.resolve(null)}getMinOffset(e,t){return bd.resolve(gd.min())}getMinOffsetFromCollectionGroup(e,t){return bd.resolve(gd.min())}updateCollectionGroup(e,t,n){return bd.resolve()}updateIndexEntries(e,t){return bd.resolve()}}class Ov{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new wf(sd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new wf(sd.comparator)).toArray()}}const Lv=new Uint8Array(0);class Mv{constructor(e,t){this.databaseId=t,this.an=new Ov,this.un=new Zp((e=>Ap(e)),((e,t)=>Rp(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Fd(r)};return Fv(e).put(i)}return bd.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[td(t),""],!1,!0);return Fv(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Vd(r.parent))}return n}))}addFieldIndex(e,t){const n=jv(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Vv(e);return i.next((e=>{n.put(av(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=jv(e),r=Vv(e),i=Uv(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=jv(e),n=Uv(e),r=Vv(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return bd.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Ev(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Uv(e);let r=!0;const i=new Map;return bd.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=um();const r=[];return bd.forEach(i,((i,s)=>{Dh("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Ap(t)));const o=function(e,t){const n=ud(t);if(void 0===n)return null;for(const r of Dp(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of hd(t))for(const t of Dp(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of hd(t)){const t=0===i.kind?Op(e,i.fieldPath,e.startAt):Lp(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new ip(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of hd(t)){const t=0===i.kind?Lp(e,i.fieldPath,e.endAt):Op(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new ip(n,r)}(s,i),u=this.hn(i,s,c),h=this.hn(i,s,l),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,c.inclusive,h,l.inclusive,d);return bd.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=cd.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return bd.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Tv(hp.create(e.filters,"and")).map((t=>Np(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/c]):Lv,h=this.En(e,a,n[u%c],r),d=this.dn(e,a,i[u%c],s),f=o.map((t=>this.En(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}En(e,t,n,r){const i=new _v(e,cd.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new _v(e,cd.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new Ev(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return bd.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new wf(ad.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new wv;for(const r of hd(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);fv.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new wv;return fv.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new wv;return fv.bt.Pt(qf(this.databaseId,t),n.Ht(function(e){const t=hd(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new wv);let i=0;for(const s of hd(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&Gf(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);fv.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new wv;n.seed(e.Wt()),fv.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof up&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=jv(e),r=Vv(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return bd.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new fd(t.sequenceNumber,new gd(ev(t.readTime),new cd(Vd(t.documentKey)),t.largestBatchId)):fd.empty(),r=e.fields.map((e=>{let[t,n]=e;return new dd(ad.fromServerFormat(t),n)}));return new ld(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Zh(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=jv(e),i=Vv(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>bd.forEach(t,(t=>i.put(av(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return bd.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?bd.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),bd.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?bd.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Uv(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Uv(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Uv(e);let i=new wf(bv);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new _v(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new wf(bv);const r=this.An(t,e);if(null==r)return n;const i=ud(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Gf(s))for(const i of s.arrayValue.values||[])n=n.add(new _v(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new _v(t.indexId,e.key,Lv,r));return n}wn(e,t,n,r,i){Dh("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=bf(s),c=bf(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=bf(o)):t?(i(a),a=bf(s)):(a=bf(s),c=bf(o))}}(r,i,bv,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),bd.waitFor(s)}gn(e){let t=1;return Vv(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>bv(e,t))).filter(((e,t,n)=>!t||0!==bv(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=bv(s,e),i=bv(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Lv,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Lv,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return bv(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zv)}getMinOffset(e,t){return bd.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Fh())))).next(zv)}}function Fv(e){return df(e,"collectionParents")}function Uv(e){return df(e,"indexEntries")}function jv(e){return df(e,"indexConfiguration")}function Vv(e){return df(e,"indexState")}function zv(e){Uh(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;vd(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new gd(t.readTime,t.documentKey,n)}const Bv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qv{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new qv(e,qv.DEFAULT_COLLECTION_PERCENTILE,qv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Hv(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{Uh(1===a)})));const l=[];for(const u of n.mutations){const e=qd(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return bd.waitFor(s).next((()=>l))}function Gv(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Fh();t=e.noDocument}return JSON.stringify(t).length}qv.DEFAULT_COLLECTION_PERCENTILE=10,qv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qv.DEFAULT=new qv(41943040,qv.DEFAULT_COLLECTION_PERCENTILE,qv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qv.DISABLED=new qv(-1,0,0);class Kv{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Uh(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Kv(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qv(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Yv(e),s=Qv(e);return s.add({}).next((o=>{Uh("number"==typeof o);const a=new Gm(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Lg(e.ct,t))),i=n.mutations.map((t=>Lg(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new wf(((e,t)=>Zh(e.canonicalString(),t.canonicalString())));for(const e of r){const t=qd(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,Hd))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),bd.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return Qv(e).get(t).next((e=>e?(Uh(e.userId===this.userId),tv(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?bd.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Qv(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Uh(t.batchId>=n),i=tv(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Qv(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qv(e).W("userMutationsIndex",t).next((e=>e.map((e=>tv(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Bd(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Yv(e).Y({range:r},((n,r,s)=>{const[o,a,c]=n,l=Vd(a);if(o===this.userId&&t.path.isEqual(l))return Qv(e).get(c).next((e=>{if(!e)throw Fh();Uh(e.userId===this.userId),i.push(tv(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new wf(Zh);const r=[];return t.forEach((t=>{const i=Bd(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Yv(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,c=Vd(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),bd.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Bd(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new wf(Zh);return Yv(e).Y({range:s},((e,t,i)=>{const[s,a,c]=e,l=Vd(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Qv(e).get(t).next((e=>{if(null===e)throw Fh();Uh(e.userId===this.userId),n.push(tv(this.serializer,e))})))})),bd.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Hv(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),bd.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return bd.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Yv(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Vd(e[1]);r.push(t)}else n.done()})).next((()=>{Uh(0===r.length)}))}))}containsKey(e,t){return Wv(e,this.userId,t)}xn(e){return Jv(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Wv(e,t,n){const r=Bd(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Yv(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Qv(e){return df(e,"mutations")}function Yv(e){return df(e,"documentMutations")}function Jv(e){return df(e,"mutationQueues")}class Xv{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Xv(0)}static Ln(){return new Xv(-1)}}class $v{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new Xv(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>rd.fromTimestamp(new nd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Zv(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Uh(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Zv(e).Y(((s,o)=>{const a=nv(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>bd.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Zv(e).Y(((e,n)=>{const r=nv(n);t(r)}))}Bn(e){return ey(e).get("targetGlobalKey").next((e=>(Uh(null!==e),e)))}kn(e,t){return ey(e).put("targetGlobalKey",t)}qn(e,t){return Zv(e).put(rv(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Ap(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Zv(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=nv(n);Rp(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=ty(e);return t.forEach((t=>{const s=Fd(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),bd.waitFor(r)}removeMatchingKeys(e,t,n){const r=ty(e);return bd.forEach(t,(t=>{const i=Fd(t.path);return bd.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=ty(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ty(e);let i=um();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Vd(e[1]),s=new cd(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Fd(t.path),r=IDBKeyRange.bound([n],[td(n)],!1,!0);let i=0;return ty(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Zv(e).get(t).next((e=>e?nv(e):null))}}function Zv(e){return df(e,"targets")}function ey(e){return df(e,"targetGlobal")}function ty(e){return df(e,"targetDocuments")}function ny(e,t){let[n,r]=e,[i,s]=t;const o=Zh(n,i);return 0===o?Zh(r,s):o}class ry{constructor(e){this.Kn=e,this.buffer=new wf(ny),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ny(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iy{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Dh("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){kd(e)?Dh("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await _d(e)}await this.zn(3e5)}))}}class sy{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return bd.resolve(Dd._e);const n=new ry(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Dh("LruGarbageCollector","Garbage collection skipped; disabled"),bd.resolve(Bv)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Dh("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Bv):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Dh("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Ph()<=Tt.DEBUG&&Dh("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),bd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function oy(e,t){return new sy(e,t)}class ay{constructor(e,t){this.db=e,this.garbageCollector=oy(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return cy(e,n)}removeReference(e,t,n){return cy(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return cy(e,t)}er(e,t){return function(e,t){let n=!1;return Jv(e).Z((r=>Wv(e,r,t).next((e=>(e&&(n=!0),bd.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,rd.min()),ty(e).delete(function(e){return[0,Fd(e.path)]}(s)))))}));r.push(t)}})).next((()=>bd.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return cy(e,t)}Xn(e,t){const n=ty(e);let r,i=Dd._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==Dd._e&&t(new cd(Vd(r)),i),i=c,r=a):i=Dd._e})).next((()=>{i!==Dd._e&&t(new cd(Vd(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cy(e,t){return ty(e).put(function(e,t){return{targetId:0,path:Fd(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ly{constructor(){this.changes=new Zp((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rp.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?bd.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uy{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return py(e).put(n)}removeEntry(e,t,n){return py(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],$g(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=rp.newInvalidDocument(t);return py(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(my(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:rp.newInvalidDocument(t)};return py(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(my(t))},((e,r)=>{n={document:this.nr(t,r),size:Gv(r)}})).next((()=>n))}getEntries(e,t){let n=tm();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=tm(),r=new gf(cd.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,Gv(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return bd.resolve();let r=new wf(vy);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(my(r.first()),my(r.last())),s=r.getIterator();let o=s.getNext();return py(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=cd.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&vy(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(my(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),$g(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return py(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=tm();for(const i of e){const e=this.nr(cd.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Yp(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=tm();const s=gy(t,n),o=gy(t,gd.max());return py(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(cd.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new dy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return fy(e).get("remoteDocumentGlobalKey").next((e=>(Uh(!!e),e)))}tr(e,t){return fy(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Og(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=cd.fromSegments(t.noDocument.path),r=ev(t.noDocument.readTime);n=rp.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Fh();{const e=cd.fromSegments(t.unknownDocument.path),r=ev(t.unknownDocument.version);n=rp.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new nd(e[0],e[1]);return rd.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(rd.min()))return e}return rp.newInvalidDocument(e)}}function hy(e){return new uy(e)}class dy extends ly{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Zp((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new wf(((e,t)=>Zh(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Xg(this.ar.serializer,s);r=r.add(i.path.popLast());const c=Gv(a);n+=c-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Xg(this.ar.serializer,s.convertToNoDocument(rd.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),bd.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function fy(e){return df(e,"remoteDocumentGlobal")}function py(e){return df(e,"remoteDocumentsV14")}function my(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function gy(e,t){const n=t.documentKey.path.toArray();return[e,$g(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function vy(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Zh(n[s],r[s]),i)return i;return i=Zh(n.length,r.length),i||(i=Zh(n[n.length-2],r[r.length-2]),i||Zh(n[n.length-1],r[r.length-1]))}class yy{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class wy{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Lm(n.mutation,e,If.empty(),nd.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,um()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:um();const r=sm();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=rm();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=sm();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,um())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=tm();const s=am(),o=am();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof jm)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Lm(o.mutation,t,o.mutation.getFieldMask(),nd.now())):s.set(t.key,If.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new yy(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=am();let r=new gf(((e,t)=>e-t)),i=um();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||If.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||um()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=om();c.forEach((e=>{if(!i.has(e)){const r=Dm(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return bd.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return cd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Vp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):bd.resolve(sm());let o=-1,a=i;return s.next((t=>bd.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?bd.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,um()))).next((e=>({batchId:o,changes:im(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new cd(t)).next((e=>{let t=rm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=rm();return this.indexManager.getCollectionParents(e,i).next((o=>bd.forEach(o,(o=>{const a=function(e,t){return new Mp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,rp.newInvalidDocument(r)))}));let n=rm();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Lm(s.mutation,r,If.empty(),nd.now()),Yp(t,r)&&(n=n.insert(e,r))})),n}))}}class _y{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return bd.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Eg(e.createTime)}}(t)),bd.resolve()}getNamedQuery(e,t){return bd.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:iv(e.bundledQuery),readTime:Eg(e.readTime)}}(t)),bd.resolve()}}class by{constructor(){this.overlays=new gf(cd.comparator),this.hr=new Map}getOverlay(e,t){return bd.resolve(this.overlays.get(t))}getOverlays(e,t){const n=sm();return bd.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),bd.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),bd.resolve()}getOverlaysForCollection(e,t,n){const r=sm(),i=t.length+1,s=new cd(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return bd.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new gf(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=sm(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=sm(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return bd.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Wm(t,n));let i=this.hr.get(t);void 0===i&&(i=um(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Iy{constructor(){this.Pr=new wf(Ey.Ir),this.Tr=new wf(Ey.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Ey(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Ey(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new cd(new sd([])),n=new Ey(t,e),r=new Ey(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new cd(new sd([])),n=new Ey(t,e),r=new Ey(t,e+1);let i=um();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Ey(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ey{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return cd.comparator(e.key,t.key)||Zh(e.pr,t.pr)}static Er(e,t){return Zh(e.pr,t.pr)||cd.comparator(e.key,t.key)}}class Sy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new wf(Ey.Ir)}checkEmpty(e){return bd.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Gm(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new Ey(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return bd.resolve(s)}lookupMutationBatch(e,t){return bd.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return bd.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return bd.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return bd.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ey(t,0),r=new Ey(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),bd.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new wf(Zh);return t.forEach((e=>{const t=new Ey(e,0),r=new Ey(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),bd.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;cd.isDocumentKey(i)||(i=i.child(""));const s=new Ey(new cd(i),0);let o=new wf(Zh);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),bd.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Uh(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return bd.forEach(t.mutations,(r=>{const i=new Ey(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Ey(t,0),r=this.wr.firstAfterOrEqual(n);return bd.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,bd.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ty{constructor(e){this.vr=e,this.docs=new gf(cd.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return bd.resolve(n?n.document.mutableCopy():rp.newInvalidDocument(t))}getEntries(e,t){let n=tm();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():rp.newInvalidDocument(e))})),bd.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=tm();const s=t.path,o=new cd(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||vd(md(o),n)<=0||(r.has(o.key)||Yp(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return bd.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Fh()}Fr(e,t){return bd.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ky(this)}getSize(e){return bd.resolve(this.size)}}class ky extends ly{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),bd.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Cy{constructor(e){this.persistence=e,this.Mr=new Zp((e=>Ap(e)),Rp),this.lastRemoteSnapshotVersion=rd.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Iy,this.targetCount=0,this.Lr=Xv.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),bd.resolve()}getLastRemoteSnapshotVersion(e){return bd.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bd.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),bd.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),bd.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Xv(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,bd.resolve()}updateTargetData(e,t){return this.qn(t),bd.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,bd.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),bd.waitFor(i).next((()=>r))}getTargetCount(e){return bd.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return bd.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),bd.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),bd.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),bd.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return bd.resolve(n)}containsKey(e,t){return bd.resolve(this.Nr.containsKey(t))}}class xy{constructor(e,t){this.Br={},this.overlays={},this.kr=new Dd(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Cy(this),this.indexManager=new Dv,this.remoteDocumentCache=function(e){return new Ty(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Jg(t),this.$r=new _y(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new by,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Sy(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Dh("MemoryPersistence","Starting transaction:",e);const r=new Ny(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return bd.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Ny extends wd{constructor(e){super(),this.currentSequenceNumber=e}}class Ay{constructor(e){this.persistence=e,this.zr=new Iy,this.jr=null}static Hr(e){return new Ay(e)}get Jr(){if(this.jr)return this.jr;throw Fh()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),bd.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),bd.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),bd.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bd.forEach(this.Jr,(n=>{const r=cd.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,rd.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return bd.or([()=>bd.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Ry{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Id("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zd,{unique:!0}),e.createObjectStore("documentMutations")}(e),Py(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=bd.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Py(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zd,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return bd.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:nf});t.createIndex("collectionPathOverlayIndex",rf,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",sf,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Gd});t.createIndex("documentKeyIndex",Kd),t.createIndex("collectionGroupIndex",Wd)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:$d}).createIndex("sequenceNumberIndex",Zd,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ef}).createIndex("documentKeyIndex",tf,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Gv(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>bd.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>bd.forEach(n,(n=>{Uh(n.userId===t.userId);const r=tv(this.serializer,n);return Hv(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new sd(n),o=function(e){return[0,Fd(e)]}(s);r.push(t.get(o).next((n=>n?bd.resolve():(n=>t.put({targetId:0,path:Fd(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>bd.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Xd});const n=t.store("collectionParents"),r=new Ov,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Fd(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new sd(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Vd(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=nv(n),i=rv(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new cd(sd.fromString(e.document.name).popFirst(5)):e.noDocument?cd.fromSegments(e.noDocument.path):e.unknownDocument?cd.fromSegments(e.unknownDocument.path):Fh()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>bd.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=hy(this.serializer),i=new xy(Ay.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:um();tv(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),bd.forEach(n,((e,n)=>{const s=new Nh(n),o=hv.lt(this.serializer,s),a=i.getIndexManager(s),c=Kv.lt(s,this.serializer,a,i.referenceDelegate);return new wy(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new hf(t,Dd._e),e).next()}))}))}}function Py(e){e.createObjectStore("targetDocuments",{keyPath:Yd}).createIndex("documentTargetsIndex",Jd,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qd,{unique:!0}),e.createObjectStore("targetGlobal")}const Dy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Oy{constructor(e,t,n,r,i,s,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=c,this.ai=l,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Oy.D())throw new zh(Vh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ay(this,r),this.Ti=t+"main",this.serializer=new Jg(a),this.Ei=new Ed(this.Ti,this.ui,new Ry(this.serializer)),this.Qr=new $v(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hy(this.serializer),this.$r=new cv,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&Oh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new zh(Vh.FAILED_PRECONDITION,Dy);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Dd(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>My(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(kd(e))return Dh("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Dh("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Ly(e).get("owner").next((e=>bd.resolve(this.Si(e))))}bi(e){return My(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=df(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return bd.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?bd.resolve(!0):Ly(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new zh(Vh.FAILED_PRECONDITION,Dy);return!1}}return!(!this.networkEnabled||!this.inForeground)||My(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Dh("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new hf(e,Dd._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>My(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Kv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Dh("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?uf:14===e?lf:13===e?cf:12===e?af:11===e?of:void Fh()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new hf(r,this.kr?this.kr.next():Dd._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Oh("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new zh(Vh.FAILED_PRECONDITION,yd);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Ly(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new zh(Vh.FAILED_PRECONDITION,Dy)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ly(e).put("owner",t)}static D(){return Ed.D()}yi(e){const t=Ly(e);return t.get("owner").next((e=>this.Si(e)?(Dh("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):bd.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Oh("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;st()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Dh("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Oh("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Oh("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Ly(e){return df(e,"owner")}function My(e){return df(e,"clientMetadata")}function Fy(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Uy{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=um(),r=um();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Uy(e,t.fromCache,n,r)}}class jy{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Vy{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=st()?8:Ed.v(Ze())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new jy;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Ph()<=Tt.DEBUG&&Dh("QueryEngine","SDK will not create cache indexes for query:",Qp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),bd.resolve()):(Ph()<=Tt.DEBUG&&Dh("QueryEngine","Query:",Qp(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Ph()<=Tt.DEBUG&&Dh("QueryEngine","The SDK decides to create cache indexes for query:",Qp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bp(t))):bd.resolve())}ji(e,t){if(jp(t))return bd.resolve(null);let n=Bp(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Gp(t,null,"F"),n=Bp(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=um(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Gp(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return jp(t)||r.isEqual(rd.min())?bd.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?bd.resolve(null):(Ph()<=Tt.DEBUG&&Dh("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qp(t)),this.es(e,s,t,pd(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new wf(Xp(e));return t.forEach(((t,r)=>{Yp(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Ph()<=Tt.DEBUG&&Dh("QueryEngine","Using full collection scan to execute query:",Qp(t)),this.zi.getDocumentsMatchingQuery(e,t,gd.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class zy{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new gf(Zh),this.rs=new Zp((e=>Ap(e)),Rp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wy(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function By(e,t,n,r){return new zy(e,t,n,r)}async function qy(e,t){const n=jh(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=um();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Hy(e){const t=jh(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Gy(e,t,n){let r=um(),i=um();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=tm();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(rd.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Dh("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Ky(e,t){const n=jh(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Wy(e,t){const n=jh(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,bd.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Yg(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Qy(e,t,n){const r=jh(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!kd(e))throw e;Dh("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Yy(e,t,n){const r=jh(e);let i=rd.min(),s=um();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=jh(e),i=r.rs.get(n);return void 0!==i?bd.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Bp(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:rd.min(),n?s:um()))).next((e=>($y(r,Jp(t),e),{documents:e,hs:s})))))}function Jy(e,t){const n=jh(e),r=jh(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Xy(e,t){const n=jh(e),r=n.ss.get(t)||rd.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,pd(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>($y(n,t,e),e)))}function $y(e,t,n){let r=e.ss.get(t)||rd.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Zy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:um();const r=await Wy(e,Bp(iv(t.bundledQuery))),i=jh(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Eg(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(Sf.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function ew(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function tw(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function nw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class rw{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new zh(r.error.code,r.error.message))),s?new rw(e,t,r.state,i):(Oh("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iw{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new zh(n.error.code,n.error.message))),i?new iw(e,n.state,r):(Oh("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=dm();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Md(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new sw(e,i):(Oh("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class ow{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ow(t.clientId,t.onlineState):(Oh("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class aw{constructor(){this.activeTargetIds=dm()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cw{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new gf(Zh),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=ew(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new aw),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(ew(this.persistenceKey,n));if(e){const t=sw.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(nw(this.persistenceKey,e));if(n){const r=iw.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(nw(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Dh("SharedClientState","READ",e,t),t}setItem(e,t){Dh("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Dh("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Dh("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Oh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Dd._e;if(null!=e)try{const n=JSON.parse(e);Uh("number"==typeof n),t=n}catch(e){Oh("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Dd._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new rw(this.currentUser,e,t,n),i=tw(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=tw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=nw(this.persistenceKey,e),i=new iw(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return sw.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return rw.Es(new Nh(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return iw.Es(r,t)}xs(e){return ow.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Dh("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=dm();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class lw{constructor(){this.no=new aw,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new aw,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uw{io(e){}shutdown(){}}class hw{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Dh("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Dh("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let dw=null;function fw(){return null===dw?dw=268435456+Math.round(2147483648*Math.random()):dw++,"0x"+dw.toString(16)}const pw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mw{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const gw="WebChannelConnection";class vw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=fw(),o=this.bo(e,t.toUriEncodedString());Dh("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(Dh("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Lh("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ah,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=pw[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=fw();return new Promise(((s,o)=>{const a=new Th;a.setWithCredentials(!0),a.listenOnce(bh.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case _h.NO_ERROR:const t=a.getResponseJson();Dh(gw,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case _h.TIMEOUT:Dh(gw,"RPC '".concat(e,"' ").concat(i," timed out")),o(new zh(Vh.DEADLINE_EXCEEDED,"Request time out"));break;case _h.HTTP_ERROR:const n=a.getStatus();if(Dh(gw,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Vh).indexOf(t)>=0?t:Vh.UNKNOWN}(t.status);o(new zh(e,t.message))}else o(new zh(Vh.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new zh(Vh.UNAVAILABLE,"Connection failed."));break;default:Fh()}}finally{Dh(gw,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);Dh(gw,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Fo(e,t,n){const r=fw(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=yh(),o=wh(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");Dh(gw,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new mw({lo:t=>{d?Dh(gw,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Dh(gw,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Dh(gw,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Sh.EventType.OPEN,(()=>{d||Dh(gw,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Sh.EventType.CLOSE,(()=>{d||(d=!0,Dh(gw,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,Sh.EventType.ERROR,(t=>{d||(d=!0,Lh(gw,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new zh(Vh.UNAVAILABLE,"The operation could not be completed")))})),p(u,Sh.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Uh(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Dh(gw,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Ym[e];if(void 0!==t)return $m(t)}(t),i=o.message;void 0===n&&(n=Vh.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new zh(n,i)),u.close()}else Dh(gw,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,Ih.STAT_EVENT,(t=>{t.stat===Eh.PROXY?Dh(gw,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Eh.NOPROXY&&Dh(gw,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function yw(){return"undefined"!=typeof window?window:null}function ww(){return"undefined"!=typeof document?document:null}function _w(e){return new yg(e,!0)}class bw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Dh("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class Iw{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new bw(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Vh.RESOURCE_EXHAUSTED?(Oh(t.toString()),Oh("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Vh.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new zh(Vh.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Dh("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Dh("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ew extends Iw{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Fh()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Uh(void 0===t||"string"==typeof t),Sf.fromBase64String(t||"")):(Uh(void 0===t||t instanceof Uint8Array),Sf.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Vh.UNKNOWN:$m(e.code);return new zh(t,e.message||"")}(o);n=new ug(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=xg(e,r.document.name),s=Eg(r.document.updateTime),o=r.document.createTime?Eg(r.document.createTime):rd.min(),a=new tp({mapValue:{fields:r.document.fields}}),c=rp.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new cg(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=xg(e,r.document),s=r.readTime?Eg(r.readTime):rd.min(),o=rp.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cg([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=xg(e,r.document),s=r.removedTargetIds||[];n=new cg([],s,i,null)}else{if(!("filter"in t))return Fh();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Qm(r,i),o=e.targetId;n=new lg(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return rd.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?rd.min():t.readTime?Eg(t.readTime):rd.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Rg(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Pp(r)?{documents:Fg(e,r)}:{query:Ug(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=bg(e,t.resumeToken);const r=wg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(rd.min())>0){n.readTime=_g(e,t.snapshotVersion.toTimestamp());const r=wg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fh()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Rg(this.serializer),t.removeTarget=e,this.t_(t)}}class Sw extends Iw{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Uh(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Uh(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Eg(e.updateTime):Eg(t);return n.isEqual(rd.min())&&(n=Eg(t)),new Nm(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Eg(e.commitTime);return this.listener.T_(n,t)}return Uh(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Rg(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Lg(this.serializer,e)))};this.t_(t)}}class Tw extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new zh(Vh.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Tg(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Vh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zh(Vh.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,Tg(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Vh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zh(Vh.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class kw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Oh(t),this.g_=!1):Dh("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Cw{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{Mw(this)&&(Dh("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=jh(e);t.v_.add(4),await Nw(t),t.x_.set("Unknown"),t.v_.delete(4),await xw(t)}(this))}))})),this.x_=new kw(n,r)}}async function xw(e){if(Mw(e))for(const t of e.F_)await t(!0)}async function Nw(e){for(const t of e.F_)await t(!1)}function Aw(e,t){const n=jh(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Lw(n)?Ow(n):e_(n).Jo()&&Pw(n,t))}function Rw(e,t){const n=jh(e),r=e_(n);n.C_.delete(t),r.Jo()&&Dw(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Mw(n)&&n.x_.set("Unknown"))}function Pw(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rd.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}e_(e).c_(t)}function Dw(e,t){e.O_.Oe(t),e_(e).l_(t)}function Ow(e){e.O_=new dg({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),e_(e).start(),e.x_.p_()}function Lw(e){return Mw(e)&&!e_(e).Ho()&&e.C_.size>0}function Mw(e){return 0===jh(e).v_.size}function Fw(e){e.O_=void 0}async function Uw(e){e.C_.forEach(((t,n)=>{Pw(e,t)}))}async function jw(e,t){Fw(e),Lw(e)?(e.x_.S_(t),Ow(e)):e.x_.set("Unknown")}async function Vw(e,t,n){if(e.x_.set("Online"),t instanceof ug&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Dh("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await zw(e,n)}else if(t instanceof cg?e.O_.$e(t):t instanceof lg?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(rd.min()))try{const t=await Hy(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Sf.EMPTY_BYTE_STRING,r.snapshotVersion)),Dw(e,t);const i=new Yg(r.target,t,n,r.sequenceNumber);Pw(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Dh("RemoteStore","Failed to raise snapshot:",t),await zw(e,t)}}async function zw(e,t,n){if(!kd(t))throw t;e.v_.add(1),await Nw(e),e.x_.set("Offline"),n||(n=()=>Hy(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Dh("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await xw(e)}))}function Bw(e,t){return t().catch((n=>zw(e,n,t)))}async function qw(e){const t=jh(e),n=t_(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Hw(t);)try{const e=await Ky(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,Gw(t,e)}catch(e){await zw(t,e)}Kw(t)&&Ww(t)}function Hw(e){return Mw(e)&&e.D_.length<10}function Gw(e,t){e.D_.push(t);const n=t_(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Kw(e){return Mw(e)&&!t_(e).Ho()&&e.D_.length>0}function Ww(e){t_(e).start()}async function Qw(e){t_(e).d_()}async function Yw(e){const t=t_(e);for(const n of e.D_)t.I_(n.mutations)}async function Jw(e,t,n){const r=e.D_.shift(),i=Km.from(r,t,n);await Bw(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await qw(e)}async function Xw(e,t){t&&t_(e).P_&&await async function(e,t){if(function(e){return Xm(e)&&e!==Vh.ABORTED}(t.code)){const n=e.D_.shift();t_(e).Zo(),await Bw(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await qw(e)}}(e,t),Kw(e)&&Ww(e)}async function $w(e,t){const n=jh(e);n.asyncQueue.verifyOperationInProgress(),Dh("RemoteStore","RemoteStore received new credentials");const r=Mw(n);n.v_.add(3),await Nw(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await xw(n)}async function Zw(e,t){const n=jh(e);t?(n.v_.delete(2),await xw(n)):t||(n.v_.add(2),await Nw(n),n.x_.set("Unknown"))}function e_(e){return e.N_||(e.N_=function(e,t,n){const r=jh(e);return r.R_(),new Ew(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Uw.bind(null,e),To:jw.bind(null,e),u_:Vw.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),Lw(e)?Ow(e):e.x_.set("Unknown")):(await e.N_.stop(),Fw(e))}))),e.N_}function t_(e){return e.L_||(e.L_=function(e,t,n){const r=jh(e);return r.R_(),new Sw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Qw.bind(null,e),To:Xw.bind(null,e),E_:Yw.bind(null,e),T_:Jw.bind(null,e)}),e.F_.push((async t=>{t?(e.L_.Zo(),await qw(e)):(await e.L_.stop(),e.D_.length>0&&(Dh("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.L_}class n_{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Bh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new n_(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zh(Vh.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function r_(e,t){if(Oh("AsyncQueue","".concat(t,": ").concat(e)),kd(e))return new zh(Vh.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class i_{constructor(e){this.comparator=e?(t,n)=>e(t,n)||cd.comparator(t.key,n.key):(e,t)=>cd.comparator(e.key,t.key),this.keyedMap=rm(),this.sortedSet=new gf(this.comparator)}static emptySet(e){return new i_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof i_))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new i_;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class s_{constructor(){this.B_=new gf(cd.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Fh():this.B_=this.B_.insert(t,e)}k_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class o_{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new o_(e,t,i_.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class a_{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((e=>e.U_()))}}class c_{constructor(){this.queries=new Zp((e=>Wp(e)),Kp),this.onlineState="Unknown",this.W_=new Set}}async function l_(e,t){const n=jh(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.K_()&&t.U_()&&(r=2):(s=new a_,r=t.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=r_(e,"Initialization of query '".concat(Qp(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Q_.push(t),t.G_(n.onlineState),s.q_&&t.z_(s.q_)&&f_(n)}async function u_(e,t){const n=jh(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),0===s.Q_.length?i=t.U_()?0:1:!s.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function h_(e,t){const n=jh(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.z_(i)&&(r=!0);t.q_=i}}r&&f_(n)}function d_(e,t,n){const r=jh(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function f_(e){e.W_.forEach((e=>{e.next()}))}var p_,m_;(m_=p_||(p_={})).j_="default",m_.Cache="cache";class g_{constructor(e,t,n){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new o_(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;const n="Offline"!==t;return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Z_(e){if(e.docChanges.length>0)return!0;const t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ea(e){e=o_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==p_.Cache}}class v_{constructor(e,t){this.na=e,this.byteLength=t}ra(){return"metadata"in this.na}}class y_{constructor(e){this.serializer=e}Ps(e){return xg(this.serializer,e)}Is(e){return e.metadata.exists?Og(this.serializer,e.document,!1):rp.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Eg(e)}}class w_{constructor(e,t,n){this.ia=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=__(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++t;const n=sd.fromString(e.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}oa(e){const t=new Map,n=new y_(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||um()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=jh(e);let s=um(),o=tm();for(const l of n){const e=t.Ps(l.metadata.name);l.document&&(s=s.add(e));const n=t.Is(l);n.setReadTime(t.Ts(l.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=await Wy(i,function(e){return Bp(Up(sd.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Gy(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Qr.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new y_(this.serializer),this.documents,this.ia.id),t=this.oa(this.documents);for(const n of this.queries)await Zy(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}}}function __(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class b_{constructor(e){this.key=e}}class I_{constructor(e){this.key=e}}class E_{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=um(),this.mutatedKeys=um(),this.ha=Xp(e),this.Pa=new i_(this.ha)}get Ia(){return this.ua}Ta(e,t){const n=t?t.Ea:new s_,r=t?t.Pa:this.Pa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=Yp(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.da(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ha(u,a)>0||c&&this.ha(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Pa:s,Ea:n,Xi:o,mutatedKeys:i}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const s=e.Ea.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fh()}};return n(e)-n(t)}(e.type,t.type)||this.ha(e.doc,t.doc))),this.Aa(n),r=null!=r&&r;const o=t&&!r?this.Ra():[],a=0===this.la.size&&this.current&&!r?1:0,c=a!==this.ca;return this.ca=a,0!==s.length||c?{snapshot:new o_(this.query,e.Pa,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:o}:{Va:o}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new s_,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach((e=>this.ua=this.ua.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ua=this.ua.delete(e))),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=um(),this.Pa.forEach((e=>{this.ma(e.key)&&(this.la=this.la.add(e.key))}));const t=[];return e.forEach((e=>{this.la.has(e)||t.push(new I_(e))})),this.la.forEach((n=>{e.has(n)||t.push(new b_(n))})),t}fa(e){this.ua=e.hs,this.la=um();const t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return o_.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class S_{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class T_{constructor(e){this.key=e,this.pa=!1}}class k_{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new Zp((e=>Wp(e)),Kp),this.Sa=new Map,this.ba=new Set,this.Da=new gf(cd.comparator),this.Ca=new Map,this.va=new Iy,this.Fa={},this.Ma=new Map,this.xa=Xv.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function C_(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=nb(e);let i;const s=r.wa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await N_(r,t,n,!0),i}async function x_(e,t){const n=nb(e);await N_(n,t,!0,!1)}async function N_(e,t,n,r){const i=await Wy(e.localStore,Bp(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await A_(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Aw(e.remoteStore,i),a}async function A_(e,t,n,r,i){e.Na=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ta(n);i.Xi&&(i=await Yy(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ta(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return B_(e,t.targetId,a.Va),a.snapshot}(e,t,n,r);const s=await Yy(e.localStore,t,!0),o=new E_(t,s.hs),a=o.Ta(s.documents),c=ag.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);B_(e,n,l.Va);const u=new S_(t,n,o);return e.wa.set(t,u),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),l.snapshot}async function R_(e,t,n){const r=jh(e),i=r.wa.get(t),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter((e=>!Kp(e,t)))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Qy(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Rw(r.remoteStore,i.targetId),V_(r,i.targetId)})).catch(_d)):(V_(r,i.targetId),await Qy(r.localStore,i.targetId,!0))}async function P_(e,t){const n=jh(e),r=n.wa.get(t),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rw(n.remoteStore,r.targetId))}async function D_(e,t){const n=jh(e);try{const e=await function(e,t){const n=jh(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Sf.EMPTY_BYTE_STRING,rd.min()).withLastLimboFreeSnapshotVersion(rd.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(e,l))}));let a=tm(),c=um();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Gy(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(rd.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return bd.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ca.get(t);r&&(Uh(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.pa=!0:e.modifiedDocuments.size>0?Uh(r.pa):e.removedDocuments.size>0&&(Uh(r.pa),r.pa=!1))})),await G_(n,e,t)}catch(e){await _d(e)}}function O_(e,t,n){const r=jh(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wa.forEach(((n,r)=>{const i=r.view.G_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=jh(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.G_(t)&&(r=!0)})),r&&f_(n)}(r.eventManager,t),e.length&&r.ya.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function L_(e,t,n){const r=jh(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ca.get(t),s=i&&i.key;if(s){let e=new gf(cd.comparator);e=e.insert(s,rp.newNoDocument(s,rd.min()));const n=um().add(s),i=new og(rd.min(),new Map,new gf(Zh),e,n);await D_(r,i),r.Da=r.Da.remove(s),r.Ca.delete(t),H_(r)}else await Qy(r.localStore,t,!1).then((()=>V_(r,t,n))).catch(_d)}async function M_(e,t){const n=jh(e),r=t.batch.batchId;try{const e=await function(e,t){const n=jh(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=bd.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Uh(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=um();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);j_(n,r,null),U_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await G_(n,e)}catch(e){await _d(e)}}async function F_(e,t,n){const r=jh(e);try{const e=await function(e,t){const n=jh(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Uh(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);j_(r,t,n),U_(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await G_(r,e)}catch(n){await _d(n)}}function U_(e,t){(e.Ma.get(t)||[]).forEach((e=>{e.resolve()})),e.Ma.delete(t)}function j_(e,t,n){const r=jh(e);let i=r.Fa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function V_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((t=>{e.va.containsKey(t)||z_(e,t)}))}function z_(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);null!==n&&(Rw(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),H_(e))}function B_(e,t,n){for(const r of n)r instanceof b_?(e.va.addReference(r.key,t),q_(e,r)):r instanceof I_?(Dh("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||z_(e,r.key)):Fh()}function q_(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(Dh("SyncEngine","New document in limbo: "+n),e.ba.add(r),H_(e))}function H_(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new cd(sd.fromString(t)),r=e.xa.next();e.Ca.set(r,new T_(n)),e.Da=e.Da.insert(n,r),Aw(e.remoteStore,new Yg(Bp(Up(n.path)),r,"TargetPurposeLimboResolution",Dd._e))}}async function G_(e,t,n){const r=jh(e),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach(((e,a)=>{o.push(r.Na(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Uy.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.ya.u_(i),await async function(e,t){const n=jh(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>bd.forEach(t,(t=>bd.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>bd.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!kd(e))throw e;Dh("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function K_(e,t){const n=jh(e);if(!n.currentUser.isEqual(t)){Dh("SyncEngine","User change. New user:",t.toKey());const e=await qy(n.localStore,t);n.currentUser=t,function(e,t){e.Ma.forEach((e=>{e.forEach((e=>{e.reject(new zh(Vh.CANCELLED,t))}))})),e.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await G_(n,e.us)}}function W_(e,t){const n=jh(e),r=n.Ca.get(t);if(r&&r.pa)return um().add(r.key);{let e=um();const r=n.Sa.get(t);if(!r)return e;for(const t of r){const r=n.wa.get(t);e=e.unionWith(r.view.Ia)}return e}}async function Q_(e,t){const n=jh(e),r=await Yy(n.localStore,t.query,!0),i=t.view.fa(r);return n.isPrimaryClient&&B_(n,t.targetId,i.Va),i}async function Y_(e,t){const n=jh(e);return Xy(n.localStore,t).then((e=>G_(n,e)))}async function J_(e,t,n,r){const i=jh(e),s=await function(e,t){const n=jh(e),r=jh(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):bd.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await qw(i.remoteStore):"acknowledged"===n||"rejected"===n?(j_(i,t,r||null),U_(i,t),function(e,t){jh(jh(e).mutationQueue).Mn(t)}(i.localStore,t)):Fh(),await G_(i,s)):Dh("SyncEngine","Cannot apply mutation batch with id: "+t)}async function X_(e,t,n){const r=jh(e),i=[],s=[];for(const o of t){let e;const t=r.Sa.get(o);if(t&&0!==t.length){e=await Wy(r.localStore,Bp(t[0]));for(const e of t){const t=r.wa.get(e),n=await Q_(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Jy(r.localStore,o);e=await Wy(r.localStore,t),await A_(r,$_(t),o,!1,e.resumeToken)}i.push(e)}return r.ya.u_(s),i}function $_(e){return Fp(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Z_(e){return function(e){return jh(jh(e).persistence).Bi()}(jh(e).localStore)}async function eb(e,t,n,r){const i=jh(e);if(i.Oa)return void Dh("SyncEngine","Ignoring unexpected query state notification.");const s=i.Sa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Xy(i.localStore,Jp(s[0])),r=og.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Sf.EMPTY_BYTE_STRING);await G_(i,e,r);break}case"rejected":await Qy(i.localStore,t,!0),V_(i,t,r);break;default:Fh()}}async function tb(e,t,n){const r=nb(e);if(r.Oa){for(const e of t){if(r.Sa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Dh("SyncEngine","Adding an already active target "+e);continue}const t=await Jy(r.localStore,e),n=await Wy(r.localStore,t);await A_(r,$_(t),n.targetId,!1,n.resumeToken),Aw(r.remoteStore,n)}for(const e of n)r.Sa.has(e)&&await Qy(r.localStore,e,!1).then((()=>{Rw(r.remoteStore,e),V_(r,e)})).catch(_d)}}function nb(e){const t=jh(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=D_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=W_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=L_.bind(null,t),t.ya.u_=h_.bind(null,t.eventManager),t.ya.La=d_.bind(null,t.eventManager),t}function rb(e){const t=jh(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=M_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=F_.bind(null,t),t}class ib{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=_w(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return By(this.persistence,new Vy,e.initialUser,this.serializer)}createPersistence(e){return new xy(Ay.Hr,this.serializer)}createSharedClientState(e){return new lw}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sb extends ib{constructor(e,t,n){super(),this.ka=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await rb(this.ka.syncEngine),await qw(this.ka.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return By(this.persistence,new Vy,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new iy(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Pd(t,this.persistence);return new Rd(e.asyncQueue,n)}createPersistence(e){const t=Fy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?qv.withCacheSize(this.cacheSizeBytes):qv.DEFAULT;return new Oy(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,yw(),ww(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new lw}}class ob extends sb{constructor(e,t){super(e,t,!1),this.ka=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ka.syncEngine;this.sharedClientState instanceof cw&&(this.sharedClientState.syncEngine={Zs:J_.bind(null,t),Xs:eb.bind(null,t),eo:tb.bind(null,t),Bi:Z_.bind(null,t),Ys:Y_.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=jh(e);if(nb(n),rb(n),!0===t&&!0!==n.Oa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await X_(n,e.toArray());n.Oa=!0,await Zw(n.remoteStore,!0);for(const r of t)Aw(n.remoteStore,r)}else if(!1===t&&!1!==n.Oa){const e=[];let t=Promise.resolve();n.Sa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(V_(n,i),Qy(n.localStore,i,!0)))),Rw(n.remoteStore,i)})),await t,await X_(n,e),function(e){const t=jh(e);t.Ca.forEach(((e,n)=>{Rw(t.remoteStore,n)})),t.va.mr(),t.Ca=new Map,t.Da=new gf(cd.comparator)}(n),n.Oa=!1,await Zw(n.remoteStore,!1)}}(this.ka.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=yw();if(!cw.D(t))throw new zh(Vh.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Fy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ab{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>O_(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=K_.bind(null,this.syncEngine),await Zw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new c_}createDatastore(e){const t=_w(e.databaseInfo.databaseId),n=function(e){return new vw(e)}(e.databaseInfo);return function(e,t,n,r){return new Tw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Cw(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>O_(this.syncEngine,e,0)),hw.D()?new hw:new uw)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new k_(e,t,n,r,i,s);return o&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=jh(e);Dh("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Nw(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function cb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class lb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Oh("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class ub{constructor(e,t){this.Ka=e,this.serializer=t,this.metadata=new Bh,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then((e=>{e&&e.ra()?this.metadata.resolve(e.na.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.na))))}),(e=>this.metadata.reject(e)))}close(){return this.Ka.cancel()}async getMetadata(){return this.metadata.promise}async Ba(){return await this.getMetadata(),this.Ua()}async Ua(){const e=await this.Wa();if(null===e)return null;const t=this.$a.decode(e),n=Number(t);isNaN(n)&&this.Ga("length string (".concat(t,") is not valid number"));const r=await this.za(n);return new v_(JSON.parse(r),e.length+n)}ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Wa(){for(;this.ja()<0&&!await this.Ha(););if(0===this.buffer.length)return null;const e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async za(e){for(;this.buffer.length<e;)await this.Ha()&&this.Ga("Reached the end of bundle when more is expected.");const t=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Ga(e){throw this.Ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ha(){const e=await this.Ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class hb{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new zh(Vh.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=jh(e),r={documents:t.map((e=>Cg(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,sd.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Uh(!!t.found),t.found.name,t.found.updateTime;const n=xg(e,t.found.name),r=Eg(t.found.updateTime),i=t.found.createTime?Eg(t.found.createTime):rd.min(),s=new tp({mapValue:{fields:t.found.fields}});return rp.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Uh(!!t.missing),Uh(!!t.readTime);const n=xg(e,t.missing),r=Eg(t.readTime);return rp.newNoDocument(n,r)}(e,t):Fh()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Uh(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new qm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=cd.fromPath(t);this.mutations.push(new Hm(n,this.precondition(n)))})),await async function(e,t){const n=jh(e),r={writes:t.map((e=>Lg(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,sd.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Fh();t=rd.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new zh(Vh.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(rd.min())?Am.exists(!1):Am.updateTime(t):Am.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rd.min()))throw new zh(Vh.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Am.updateTime(t)}return Am.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class db{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Ja=n.maxAttempts,this.jo=new bw(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo((async()=>{const e=new hb(this.datastore),t=this.Xa(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.eu(e)}))))})).catch((e=>{this.eu(e)}))}))}Xa(e){try{const t=this.updateFunction(e);return!Od(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget((()=>(this.Za(),Promise.resolve())))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Xm(t)}return!1}}class fb{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Nh.UNAUTHENTICATED,this.clientId=$h.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Dh("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Dh("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new zh(Vh.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=r_(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function pb(e,t){e.asyncQueue.verifyOperationInProgress(),Dh("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await qy(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function mb(e,t){e.asyncQueue.verifyOperationInProgress();const n=await vb(e);Dh("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>$w(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>$w(t.remoteStore,n))),e._onlineComponents=t}function gb(e){return"FirebaseError"===e.name?e.code===Vh.FAILED_PRECONDITION||e.code===Vh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function vb(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Dh("FirestoreClient","Using user provided OfflineComponentProvider");try{await pb(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!gb(n))throw n;Lh("Error using user provided cache. Falling back to memory cache: "+n),await pb(e,new ib)}}else Dh("FirestoreClient","Using default OfflineComponentProvider"),await pb(e,new ib);return e._offlineComponents}async function yb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Dh("FirestoreClient","Using user provided OnlineComponentProvider"),await mb(e,e._uninitializedComponentsProvider._online)):(Dh("FirestoreClient","Using default OnlineComponentProvider"),await mb(e,new ab))),e._onlineComponents}function wb(e){return vb(e).then((e=>e.persistence))}function _b(e){return vb(e).then((e=>e.localStore))}function bb(e){return yb(e).then((e=>e.remoteStore))}function Ib(e){return yb(e).then((e=>e.syncEngine))}function Eb(e){return yb(e).then((e=>e.datastore))}async function Sb(e){const t=await yb(e),n=t.eventManager;return n.onListen=C_.bind(null,t.syncEngine),n.onUnlisten=R_.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=x_.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=P_.bind(null,t.syncEngine),n}function Tb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Bh;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new lb({next:s=>{t.enqueueAndForget((()=>u_(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new zh(Vh.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new zh(Vh.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new g_(Up(n.path),s,{includeMetadataChanges:!0,ta:!0});return l_(e,o)}(await Sb(e),e.asyncQueue,t,n,r))),r.promise}function kb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Bh;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new lb({next:n=>{t.enqueueAndForget((()=>u_(e,o))),n.fromCache&&"server"===r.source?i.reject(new zh(Vh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new g_(n,s,{includeMetadataChanges:!0,ta:!0});return l_(e,o)}(await Sb(e),e.asyncQueue,t,n,r))),r.promise}function Cb(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?eg().encode(e):e,function(e,t){return new ub(e,t)}(function(e,t){if(e instanceof Uint8Array)return cb(e,t);if(e instanceof ArrayBuffer)return cb(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,_w(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=jh(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=jh(e),r=Eg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(__(r));const i=new w_(r,e.localStore,t.serializer);let s=await t.Ba();for(;s;){const e=await i.sa(s);e&&n._updateProgress(e),s=await t.Ba()}const o=await i.complete();return await G_(e,o.aa,void 0),await function(e,t){const n=jh(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o._a)}catch(e){return Lh("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Ib(e),i,r)}))}function xb(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Nb=new Map;function Ab(e,t,n){if(!n)throw new zh(Vh.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Rb(e,t,n,r){if(!0===t&&!0===r)throw new zh(Vh.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Pb(e){if(!cd.isDocumentKey(e))throw new zh(Vh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Db(e){if(cd.isDocumentKey(e))throw new zh(Vh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ob(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Fh()}function Lb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new zh(Vh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ob(e);throw new zh(Vh.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Mb(e,t){if(t<=0)throw new zh(Vh.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Fb{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new zh(Vh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new zh(Vh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xb(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new zh(Vh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new zh(Vh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new zh(Vh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ub{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new zh(Vh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new zh(Vh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fb(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Hh;switch(e.type){case"firstParty":return new Qh(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new zh(Vh.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Nb.get(e);t&&(Dh("ComponentProvider","Removing Datastore"),Nb.delete(e),t.terminate())}(this),Promise.resolve()}}function jb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Lb(e,Ub))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Lh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Nh.MOCK_USER;else{t=$e(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new zh(Vh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Nh(s)}e._authCredentials=new Gh(new qh(t,n))}}class Vb{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Vb(this.firestore,e,this._query)}}class zb{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zb(this.firestore,e,this._key)}}class Bb extends Vb{constructor(e,t,n){super(e,t,Up(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zb(this.firestore,null,new cd(e))}withConverter(e){return new Bb(this.firestore,e,this._path)}}function qb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=wt(e),Ab("collection","path",t),e instanceof Ub){const n=sd.fromString(t,...r);return Db(n),new Bb(e,null,n)}{if(!(e instanceof zb||e instanceof Bb))throw new zh(Vh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(sd.fromString(t,...r));return Db(n),new Bb(e.firestore,null,n)}}function Hb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=wt(e),1===arguments.length&&(t=$h.newId()),Ab("doc","path",t),e instanceof Ub){const n=sd.fromString(t,...r);return Pb(n),new zb(e,null,new cd(n))}{if(!(e instanceof zb||e instanceof Bb))throw new zh(Vh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(sd.fromString(t,...r));return Pb(n),new zb(e.firestore,e instanceof Bb?e.converter:null,new cd(n))}}function Gb(e,t){return e=wt(e),t=wt(t),(e instanceof zb||e instanceof Bb)&&(t instanceof zb||t instanceof Bb)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Kb(e,t){return e=wt(e),t=wt(t),e instanceof Vb&&t instanceof Vb&&e.firestore===t.firestore&&Kp(e._query,t._query)&&e.converter===t.converter}class Wb{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new bw(this,"async_queue_retry"),this.cu=()=>{const e=ww();e&&Dh("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=ww();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=ww();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new Bh;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!kd(e))throw e;Dh("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Oh("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,n){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const r=n_.createAndSchedule(this,e,t,n,(e=>this.Iu(e)));return this.su.push(r),r}lu(){this.ou&&Fh()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}function Qb(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Yb{constructor(){this._progressObserver={},this._taskCompletionResolver=new Bh,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jb extends Ub{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Wb,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||$b(this),this._firestoreClient.terminate()}}function Xb(e){return e._firestoreClient||$b(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function $b(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Pf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,xb(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new fb(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Zb(e,t,n){const r=new Bh;return e.asyncQueue.enqueue((async()=>{try{await pb(e,n),await mb(e,t),r.resolve()}catch(e){const n=e;if(!gb(n))throw n;Lh("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function eI(e){return function(e){const t=new Bh;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=jh(e);Mw(n.remoteStore)||Dh("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=jh(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ma.get(e)||[];r.push(t),n.Ma.set(e,r)}catch(e){const n=r_(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Ib(e),t))),t.promise}(Xb(e=Lb(e,Jb)))}function tI(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await wb(e),n=await bb(e);return t.setNetworkEnabled(!0),function(e){const t=jh(e);return t.v_.delete(0),xw(t)}(n)}))}(Xb(e=Lb(e,Jb)))}function nI(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await wb(e),n=await bb(e);return t.setNetworkEnabled(!1),async function(e){const t=jh(e);t.v_.add(0),await Nw(t),t.x_.set("Offline")}(n)}))}(Xb(e=Lb(e,Jb)))}function rI(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=jh(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await _b(e),t)))}(Xb(e=Lb(e,Jb)),t).then((t=>t?new Vb(e,null,t.query):null))}function iI(e){if(e._initialized||e._terminated)throw new zh(Vh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class sI{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sI(Sf.fromBase64String(e))}catch(e){throw new zh(Vh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new sI(Sf.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class oI{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new zh(Vh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ad(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class aI{constructor(e){this._methodName=e}}class cI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new zh(Vh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new zh(Vh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zh(this._lat,e._lat)||Zh(this._long,e._long)}}const lI=/^__.*__$/;class uI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new jm(e,this.data,this.fieldMask,t,this.fieldTransforms):new Um(e,this.data,t,this.fieldTransforms)}}class hI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new jm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fh()}}class fI{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new fI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.pu(e),r}yu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return DI(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(dI(this.Vu)&&lI.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class pI{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||_w(e)}Cu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fI({Vu:e,methodName:t,Du:n,path:ad.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mI(e){const t=e._freezeSettings(),n=_w(e._databaseId);return new pI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gI(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cu(s.merge||s.mergeFields?2:0,t,n,i);NI("Data must be an object, but it was:",o,r);const a=CI(r,o);let c,l;if(s.merge)c=new If(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=AI(t,r,n);if(!o.contains(i))throw new zh(Vh.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));OI(e,i)||e.push(i)}c=new If(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new uI(new tp(a),c,l)}class vI extends aI{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vI}}function yI(e,t,n){return new fI({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class wI extends aI{_toFieldTransform(e){return new xm(e.path,new _m)}isEqual(e){return e instanceof wI}}class _I extends aI{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=yI(this,e,!0),n=this.vu.map((e=>kI(e,t))),r=new bm(n);return new xm(e.path,r)}isEqual(e){return e instanceof _I&&ht(this.vu,e.vu)}}class bI extends aI{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=yI(this,e,!0),n=this.vu.map((e=>kI(e,t))),r=new Em(n);return new xm(e.path,r)}isEqual(e){return e instanceof bI&&ht(this.vu,e.vu)}}class II extends aI{constructor(e,t){super(e),this.Fu=t}_toFieldTransform(e){const t=new Tm(e.serializer,mm(e.serializer,this.Fu));return new xm(e.path,t)}isEqual(e){return e instanceof II&&this.Fu===e.Fu}}function EI(e,t,n,r){const i=e.Cu(1,t,n);NI("Data must be an object, but it was:",i,r);const s=[],o=tp.empty();pf(r,((e,r)=>{const a=PI(t,e,n);r=wt(r);const c=i.yu(a);if(r instanceof vI)s.push(a);else{const e=kI(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new If(s);return new hI(o,a,i.fieldTransforms)}function SI(e,t,n,r,i,s){const o=e.Cu(1,t,n),a=[AI(t,r,n)],c=[i];if(s.length%2!=0)throw new zh(Vh.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(AI(t,s[d])),c.push(s[d+1]);const l=[],u=tp.empty();for(let d=a.length-1;d>=0;--d)if(!OI(l,a[d])){const e=a[d];let t=c[d];t=wt(t);const n=o.yu(e);if(t instanceof vI)l.push(e);else{const r=kI(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new If(l);return new hI(u,h,o.fieldTransforms)}function TI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return kI(n,e.Cu(r?4:3,t))}function kI(e,t){if(xI(e=wt(e)))return NI("Unsupported field value:",t,e),CI(e,t);if(e instanceof aI)return function(e,t){if(!dI(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=kI(i,t.wu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=wt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mm(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=nd.fromDate(e);return{timestampValue:_g(t.serializer,n)}}if(e instanceof nd){const n=new nd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:_g(t.serializer,n)}}if(e instanceof cI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof sI)return{bytesValue:bg(t.serializer,e._byteString)};if(e instanceof zb){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Su("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Sg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(Ob(e)))}(e,t)}function CI(e,t){const n={};return mf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):pf(e,((e,r)=>{const i=kI(r,t.fu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function xI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nd||e instanceof cI||e instanceof sI||e instanceof zb||e instanceof aI)}function NI(e,t,n){if(!xI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ob(n);throw"an object"===r?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function AI(e,t,n){if((t=wt(t))instanceof oI)return t._internalPath;if("string"==typeof t)return PI(e,t);throw DI("Field path arguments must be of type string or ",e,!1,void 0,n)}const RI=new RegExp("[~\\*/\\[\\]]");function PI(e,t,n){if(t.search(RI)>=0)throw DI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new oI(...t.split("."))._internalPath}catch(Ia){throw DI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function DI(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new zh(Vh.INVALID_ARGUMENT,a+e+c)}function OI(e,t){return e.some((e=>e.isEqual(t)))}class LI{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new zb(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new MI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(FI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class MI extends LI{data(){return super.data()}}function FI(e,t){return"string"==typeof t?PI(e,t):t instanceof oI?t._internalPath:t._delegate._internalPath}function UI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new zh(Vh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jI{}class VI extends jI{}function zI(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof jI&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof qI)).length,n=e.filter((e=>e instanceof BI)).length;if(t>1||t>0&&n>0)throw new zh(Vh.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class BI extends VI{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new BI(e,t,n)}_apply(e){const t=this._parse(e);return XI(e._query,t),new Vb(e.firestore,e.converter,Hp(e._query,t))}_parse(e){const t=mI(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new zh(Vh.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){JI(o,s);const t=[];for(const n of o)t.push(YI(r,e,n));a={arrayValue:{values:t}}}else a=YI(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||JI(o,s),a=TI(n,t,o,"in"===s||"not-in"===s);return up.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class qI extends jI{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qI(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:hp.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)XI(n,i),n=Hp(n,i)}(e._query,t),new Vb(e.firestore,e.converter,Hp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class HI extends VI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new HI(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new zh(Vh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new zh(Vh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ap(t,n)}(e._query,this._field,this._direction);return new Vb(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Mp(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class GI extends VI{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new GI(e,t,n)}_apply(e){return new Vb(e.firestore,e.converter,Gp(e._query,this._limit,this._limitType))}}class KI extends VI{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new KI(e,t,n)}_apply(e){const t=QI(e,this.type,this._docOrFields,this._inclusive);return new Vb(e.firestore,e.converter,function(e,t){return new Mp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class WI extends VI{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new WI(e,t,n)}_apply(e){const t=QI(e,this.type,this._docOrFields,this._inclusive);return new Vb(e.firestore,e.converter,function(e,t){return new Mp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function QI(e,t,n,r){if(n[0]=wt(n[0]),n[0]instanceof LI)return function(e,t,n,r,i){if(!r)throw new zh(Vh.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of zp(e))if(o.field.isKeyField())s.push(qf(t,r.key));else{const e=r.data.field(o.field);if(Nf(e))throw new zh(Vh.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new zh(Vh.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new ip(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=mI(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new zh(Vh.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new zh(Vh.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Vp(e)&&-1!==s.indexOf("/"))throw new zh(Vh.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(sd.fromString(s));if(!cd.isDocumentKey(n))throw new zh(Vh.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new cd(n);a.push(qf(t,i))}else{const e=TI(n,r,s);a.push(e)}}return new ip(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function YI(e,t,n){if("string"==typeof(n=wt(n))){if(""===n)throw new zh(Vh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vp(t)&&-1!==n.indexOf("/"))throw new zh(Vh.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(sd.fromString(n));if(!cd.isDocumentKey(r))throw new zh(Vh.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return qf(e,new cd(r))}if(n instanceof zb)return qf(e,n._key);throw new zh(Vh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ob(n),"."))}function JI(e,t){if(!Array.isArray(e)||0===e.length)throw new zh(Vh.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function XI(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new zh(Vh.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new zh(Vh.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class $I{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Mf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Fh()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return pf(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new cI(Cf(e.latitude),Cf(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Af(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Rf(e));default:return null}}convertTimestamp(e){const t=kf(e);return new nd(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=sd.fromString(e);Uh(Qg(n));const r=new Df(n.get(1),n.get(3)),i=new cd(n.popFirst(5));return r.isEqual(t)||Oh("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function ZI(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class eE extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new sI(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zb(this.firestore,null,t)}}class tE{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nE extends LI{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new rE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(FI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class rE extends nE{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class iE{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new tE(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new rE(this._firestore,this._userDataWriter,n.key,n,new tE(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new zh(Vh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new rE(e._firestore,e._userDataWriter,n.doc.key,n.doc,new tE(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new rE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:sE(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function sE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fh()}}function oE(e,t){return e instanceof nE&&t instanceof nE?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof iE&&t instanceof iE&&e._firestore===t._firestore&&Kb(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function aE(e){e=Lb(e,zb);const t=Lb(e.firestore,Jb);return Tb(Xb(t),e._key).then((n=>gE(t,e,n)))}class cE extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new sI(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zb(this.firestore,null,t)}}function lE(e){e=Lb(e,zb);const t=Lb(e.firestore,Jb),n=Xb(t),r=new cE(t);return function(e,t){const n=new Bh;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=jh(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new zh(Vh.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=r_(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await _b(e),t,n))),n.promise}(n,e._key).then((n=>new nE(t,r,e._key,n,new tE(null!==n&&n.hasLocalMutations,!0),e.converter)))}function uE(e){e=Lb(e,Vb);const t=Lb(e.firestore,Jb),n=Xb(t),r=new cE(t);return function(e,t){const n=new Bh;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Yy(e,t,!0),i=new E_(t,r.hs),s=i.Ta(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=r_(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await _b(e),t,n))),n.promise}(n,e._query).then((n=>new iE(t,r,e,n)))}function hE(e,t,n){e=Lb(e,zb);const r=Lb(e.firestore,Jb),i=ZI(e.converter,t,n);return mE(r,[gI(mI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Am.none())])}function dE(e,t,n){e=Lb(e,zb);const r=Lb(e.firestore,Jb),i=mI(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=wt(t))||t instanceof oI?SI(i,"updateDoc",e._key,t,n,a):EI(i,"updateDoc",e._key,t),mE(r,[s.toMutation(e._key,Am.exists(!0))])}function fE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=wt(e);let a={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||Qb(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Qb(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof zb)h=Lb(e.firestore,Jb),d=Up(e._key.path),u={next:t=>{n[c]&&n[c](gE(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Lb(e,Vb);h=Lb(t.firestore,Jb),d=t._query;const r=new cE(h);u={next:e=>{n[c]&&n[c](new iE(h,r,t,e))},error:n[c+1],complete:n[c+2]},UI(e._query)}return function(e,t,n,r){const i=new lb(r),s=new g_(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>l_(await Sb(e),s))),()=>{i.Qa(),e.asyncQueue.enqueueAndForget((async()=>u_(await Sb(e),s)))}}(Xb(h),d,l,u)}function pE(e,t){return function(e,t){const n=new lb(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){jh(e).W_.add(t),t.next()}(await Sb(e),n))),()=>{n.Qa(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){jh(e).W_.delete(t)}(await Sb(e),n)))}}(Xb(e=Lb(e,Jb)),Qb(t)?t:{next:t})}function mE(e,t){return function(e,t){const n=new Bh;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=rb(e);try{const e=await function(e,t){const n=jh(e),r=nd.now(),i=t.reduce(((e,t)=>e.add(t.key)),um());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=tm(),c=um();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Mm(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new jm(e.key,t,np(t.value.mapValue),Am.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:im(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Fa[e.currentUser.toKey()];r||(r=new gf(Zh)),r=r.insert(t,n),e.Fa[e.currentUser.toKey()]=r}(r,e.batchId,n),await G_(r,e.changes),await qw(r.remoteStore)}catch(e){const t=r_(e,"Failed to persist write");n.reject(t)}}(await Ib(e),t,n))),n.promise}(Xb(e),t)}function gE(e,t,n){const r=n.docs.get(t._key),i=new cE(e);return new nE(e,i,t._key,r,new tE(n.hasPendingWrites,n.fromCache),t.converter)}const vE={maxAttempts:5};class yE{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mI(e)}set(e,t,n){this._verifyNotCommitted();const r=wE(e,this._firestore),i=ZI(r.converter,t,n),s=gI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Am.none())),this}update(e,t,n){this._verifyNotCommitted();const r=wE(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=wt(t))||t instanceof oI?SI(this._dataReader,"WriteBatch.update",r._key,t,n,o):EI(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Am.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wE(e,this._firestore);return this._mutations=this._mutations.concat(new qm(t._key,Am.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new zh(Vh.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wE(e,t){if((e=wt(e)).firestore!==t)throw new zh(Vh.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class _E extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mI(e)}get(e){const t=wE(e,this._firestore),n=new eE(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Fh();const r=e[0];if(r.isFoundDocument())return new LI(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new LI(this._firestore,n,t._key,null,t.converter);throw Fh()}))}set(e,t,n){const r=wE(e,this._firestore),i=ZI(r.converter,t,n),s=gI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=wE(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=wt(t))||t instanceof oI?SI(this._dataReader,"Transaction.update",r._key,t,n,o):EI(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=wE(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=wE(e,this._firestore),n=new cE(this._firestore);return super.get(e).then((e=>new nE(this._firestore,n,t._key,e._document,new tE(!1,!1),t.converter)))}}function bE(){return new wI("serverTimestamp")}function IE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _I("arrayUnion",t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ah=e}(mn),on(new _t("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Jb(new Kh(e.getProvider("auth-internal")),new Jh(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new zh(Vh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Df(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),bn(xh,"4.5.1",e),bn(xh,"4.5.1","esm2017")}();var EE=n(184);function SE(e){let{setChat:t,setSelectedChat:n,currentUserUid:r,selectedChat:s,setCombinedId:o}=e;const{auth:a,db:c}=(0,i.useContext)(QC),[l]=la(a),[u,h]=(0,i.useState)([]);(0,i.useEffect)((()=>{(async()=>{if(l){const e=Hb(c,"usersChats",l.uid),t=await aE(e);if(t.exists()){const e=t.data(),n=Object.entries(e).map((e=>{let[t,n]=e;return{chatId:t,...n.userInfo}}));h(n)}}})()}),[l,c]),(0,i.useEffect)((()=>{if(u.length>0&&s){const e=u.find((e=>e.uid===s.uid));e&&d(e)}}),[u,s]);const d=e=>{const i=r>e.uid?"".concat(r,"_").concat(e.uid):"".concat(e.uid,"_").concat(r);n(e),t(!0),aE(Hb(c,"chats",i)).then((e=>{e.exists()&&t(e.data())}))};return(0,EE.jsxs)("div",{className:"sidebar",children:[(0,EE.jsx)("h1",{children:"\u0427\u0430\u0442\u0438"}),(0,EE.jsx)("ul",{className:"sidebar__list",children:u.map(((e,t)=>(0,EE.jsxs)("li",{onClick:()=>d(e),className:(null===s||void 0===s?void 0:s.uid)===e.uid?"sidebar__item sidebar__item_select":"sidebar__item",children:[(0,EE.jsx)("img",{src:e.photoURL,alt:"avatar"}),e.displayName]},t)))})]})}const TE={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let kE;const CE=new Uint8Array(16);function xE(){if(!kE&&(kE="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!kE))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kE(CE)}const NE=[];for(let n=0;n<256;++n)NE.push((n+256).toString(16).slice(1));function AE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return NE[e[t+0]]+NE[e[t+1]]+NE[e[t+2]]+NE[e[t+3]]+"-"+NE[e[t+4]]+NE[e[t+5]]+"-"+NE[e[t+6]]+NE[e[t+7]]+"-"+NE[e[t+8]]+NE[e[t+9]]+"-"+NE[e[t+10]]+NE[e[t+11]]+NE[e[t+12]]+NE[e[t+13]]+NE[e[t+14]]+NE[e[t+15]]}const RE=function(e,t,n){if(TE.randomUUID&&!t&&!e)return TE.randomUUID();const r=(e=e||{}).random||(e.rng||xE)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return AE(r)},PE="firebasestorage.googleapis.com",DE="storageBucket";class OE extends at{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(FE(e),"Firebase Storage: ".concat(t," (").concat(FE(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,OE.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return FE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var LE,ME;function FE(e){return"storage/"+e}function UE(){return new OE(LE.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function jE(){return new OE(LE.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function VE(){return new OE(LE.CANCELED,"User canceled the upload/download.")}function zE(){return new OE(LE.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function BE(e){return new OE(LE.INVALID_ARGUMENT,e)}function qE(){return new OE(LE.APP_DELETED,"The Firebase app was deleted.")}function HE(e){return new OE(LE.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function GE(e,t){return new OE(LE.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function KE(e){throw new OE(LE.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(LE||(LE={}));class WE{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=WE.makeFromUrl(e,t)}catch(i){return new WE(e,"")}if(""===n.path)return n;throw r=e,new OE(LE.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===PE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let c=0;c<a.length;c++){const t=a[c],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new WE(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new OE(LE.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class QE{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function YE(e){return"string"===typeof e||e instanceof String}function JE(e){return XE()&&e instanceof Blob}function XE(){return"undefined"!==typeof Blob}function $E(e,t,n,r){if(r<t)throw BE("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw BE("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function ZE(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function eS(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function tS(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(ME||(ME={}));class nS{constructor(e,t,n,r,i,s,o,a,c,l,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new rS(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===ME.NO_ERROR,i=n.getStatus();if(!t||tS(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===ME.ABORT;return void e(!1,new rS(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new rS(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=UE();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?qE():VE())}else{r(jE())}};this.canceled_?t(0,new rS(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,c())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(l)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(c()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),l||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class rS{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function iS(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function sS(){const e=iS();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(XE())return new Blob(n);throw new OE(LE.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function oS(e){if("undefined"===typeof atob)throw t="base-64",new OE(LE.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const aS={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cS{constructor(e,t){this.data=e,this.contentType=t||null}}function lS(e,t){switch(e){case aS.RAW:return new cS(uS(t));case aS.BASE64:case aS.BASE64URL:return new cS(hS(e,t));case aS.DATA_URL:return new cS(function(e){const t=new dS(e);return t.base64?hS(aS.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw GE(aS.DATA_URL,"Malformed data URL.")}return uS(t)}(t.rest)}(t),new dS(t).contentType)}throw UE()}function uS(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function hS(e,t){switch(e){case aS.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw GE(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case aS.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw GE(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=oS(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw GE(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class dS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw GE(aS.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class fS{constructor(e,t){let n=0,r="";JE(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(JE(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new fS(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new fS(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(XE()){const e=t.map((e=>e instanceof fS?e.data_:e));return new fS(sS.apply(null,e))}{const e=t.map((e=>YE(e)?lS(aS.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new fS(r,!0)}}uploadData(){return this.data_}}function pS(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function mS(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function gS(e,t){return t}class vS{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||gS}}let yS=null;function wS(){if(yS)return yS;const e=[];e.push(new vS("bucket")),e.push(new vS("generation")),e.push(new vS("metageneration")),e.push(new vS("name","fullPath",!0));const t=new vS("name");t.xform=function(e,t){return function(e){return!YE(e)||e.length<2?e:mS(e)}(t)},e.push(t);const n=new vS("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new vS("timeCreated")),e.push(new vS("updated")),e.push(new vS("md5Hash",null,!0)),e.push(new vS("cacheControl",null,!0)),e.push(new vS("contentDisposition",null,!0)),e.push(new vS("contentEncoding",null,!0)),e.push(new vS("contentLanguage",null,!0)),e.push(new vS("contentType",null,!0)),e.push(new vS("metadata","customMetadata",!0)),yS=e,yS}function _S(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new WE(n,r);return t._makeStorageReference(i)}})}(r,e),r}function bS(e,t,n){const r=pS(t);if(null===r)return null;return _S(e,r,n)}function IS(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const ES="prefixes",SS="items";function TS(e,t,n){const r=pS(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[ES])for(const i of n[ES]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new WE(t,n));r.prefixes.push(s)}if(n[SS])for(const i of n[SS]){const n=e._makeStorageReference(new WE(t,i.name));r.items.push(n)}return r}(e,t,r)}class kS{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function CS(e){if(!e)throw UE()}function xS(e,t){return function(n,r){const i=bS(e,r,t);return CS(null!==i),i}}function NS(e,t){return function(n,r){const i=bS(e,r,t);return CS(null!==i),function(e,t,n,r){const i=pS(t);if(null===i)return null;if(!YE(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return ZE("/b/"+o(i)+"/o/"+o(s),n,r)+eS({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function AS(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new OE(LE.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new OE(LE.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new OE(LE.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new OE(LE.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function RS(e){const t=AS(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new OE(LE.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function PS(e,t,n){const r=ZE(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new kS(r,"GET",xS(e,n),i);return s.errorHandler=RS(t),s}function DS(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=ZE(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,c=new kS(o,"GET",function(e,t){return function(n,r){const i=TS(e,t,r);return CS(null!==i),i}}(e,t.bucket),a);return c.urlParams=s,c.errorHandler=AS(t),c}function OS(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function LS(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const c=OS(t,r,i),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+IS(c,n)+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=fS.getBlob(l,r,u);if(null===h)throw zE();const d={name:c.fullPath},f=ZE(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new kS(f,"POST",xS(e,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=AS(t),m}class MS{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function FS(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){CS(!1)}return CS(!!n&&-1!==(t||["active"]).indexOf(n)),n}const US=262144;function jS(e,t,n,r,i,s,o,a){const c=new MS(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new OE(LE.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const l=c.total-c.current;let u=l;i>0&&(u=Math.min(u,i));const h=c.current,d=h+u;let f="";f=0===u?"finalize":l===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(c.current)},m=r.slice(h,d);if(null===m)throw zE();const g=t.maxUploadRetryTime,v=new kS(n,"POST",(function(e,n){const i=FS(e,["active","final"]),o=c.current+u,a=r.size();let l;return l="final"===i?xS(t,s)(e,n):null,new MS(o,a,"final"===i,l)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=AS(e),v}const VS={STATE_CHANGED:"state_changed"},zS={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function BS(e){switch(e){case"running":case"pausing":case"canceling":return zS.RUNNING;case"paused":return zS.PAUSED;case"success":return zS.SUCCESS;case"canceled":return zS.CANCELED;default:return zS.ERROR}}class qS{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function HS(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let GS=null;class KS{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ME.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=ME.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=ME.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw KE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw KE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw KE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw KE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw KE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class WS extends KS{initXhr(){this.xhr_.responseType="text"}}function QS(){return GS?GS():new WS}class YS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=wS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(LE.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(tS(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=jE()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(LE.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=OS(t,r,i),a={name:o.fullPath},c=ZE(s,e.host,e._protocol),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=IS(o,n),h=e.maxUploadRetryTime,d=new kS(c,"POST",(function(e){let t;FS(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){CS(!1)}return CS(YE(t)),t}),h);return d.urlParams=a,d.headers=l,d.body=u,d.errorHandler=AS(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,QS,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new kS(n,"POST",(function(e){const t=FS(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(s){CS(!1)}n||CS(!1);const i=Number(n);return CS(!isNaN(i)),new MS(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=AS(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,QS,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=US*this._chunkMultiplier,t=new MS(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=jS(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(s,QS,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(US*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=PS(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,QS,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=LS(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,QS,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=VE(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=BS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new qS(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(BS(this._state)){case zS.SUCCESS:HS(this._resolve.bind(null,this.snapshot))();break;case zS.CANCELED:case zS.ERROR:HS(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(BS(this._state)){case zS.RUNNING:case zS.PAUSED:e.next&&HS(e.next.bind(e,this.snapshot))();break;case zS.SUCCESS:e.complete&&HS(e.complete.bind(e))();break;default:e.error&&HS(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class JS{constructor(e,t){this._service=e,this._location=t instanceof WE?t:WE.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new JS(e,t)}get root(){const e=new WE(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mS(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new WE(this._location.bucket,e);return new JS(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw HE(e)}}function XS(e){const t={prefixes:[],items:[]};return $S(e,t).then((()=>t))}async function $S(e,t,n){const r={pageToken:n},i=await ZS(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await $S(e,t,i.nextPageToken)}function ZS(e,t){null!=t&&"number"===typeof t.maxResults&&$E("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=DS(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,QS)}function eT(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=ZE(t.fullServerUrl(),e.host,e._protocol),s=IS(n,r),o=e.maxOperationRetryTime,a=new kS(i,"PATCH",xS(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=RS(t),a}(e.storage,e._location,t,wS());return e.storage.makeRequestWithTokens(n,QS)}function tT(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=ZE(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new kS(r,"GET",NS(e,n),i);return s.errorHandler=RS(t),s}(e.storage,e._location,wS());return e.storage.makeRequestWithTokens(t,QS).then((e=>{if(null===e)throw new OE(LE.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function nT(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=ZE(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new kS(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=RS(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,QS)}function rT(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new WE(e._location.bucket,n);return new JS(e.storage,r)}function iT(e,t){if(e instanceof aT){const n=e;if(null==n._bucket)throw new OE(LE.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DE+"' property when initializing the app?");const r=new JS(n,n._bucket);return null!=t?iT(r,t):r}return void 0!==t?rT(e,t):e}function sT(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof aT)return new JS(e,t);throw BE("To use ref(service, url), the first argument must be a Storage instance.")}return iT(e,t)}function oT(e,t){const n=null===t||void 0===t?void 0:t[DE];return null==n?null:WE.makeFromBucketSpec(n,e)}class aT{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=PE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?WE.makeFromBucketSpec(r,this._host):oT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=WE.makeFromBucketSpec(this._url,e):this._bucket=oT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$E("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$E("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new JS(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new QE(qE());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=eS(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new nS(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const cT="@firebase/storage",lT="0.12.3",uT="storage";function hT(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new YS(e,new fS(t),n)}(e=wt(e),t,n)}function dT(e){return function(e){e._throwIfRoot("getMetadata");const t=PS(e.storage,e._location,wS());return e.storage.makeRequestWithTokens(t,QS)}(e=wt(e))}function fT(e){return tT(e=wt(e))}function pT(e,t){return sT(e=wt(e),t)}function mT(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:$e(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function gT(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new aT(r,i,s,n,mn)}on(new _t(uT,gT,"PUBLIC").setMultipleInstances(!0)),bn(cT,lT,""),bn(cT,lT,"esm2017");var vT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},yT=i.createContext&&i.createContext(vT),wT=function(){return wT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},wT.apply(this,arguments)},_T=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function bT(e){return e&&e.map((function(e,t){return i.createElement(e.tag,wT({key:t},e.attr),bT(e.child))}))}function IT(e){return function(t){return i.createElement(ET,wT({attr:wT({},e.attr)},t),bT(e.child))}}function ET(e){var t=function(t){var n,r=e.attr,s=e.size,o=e.title,a=_T(e,["attr","size","title"]),c=s||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),i.createElement("svg",wT({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:n,style:wT(wT({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&i.createElement("title",null,o),e.children)};return void 0!==yT?i.createElement(yT.Consumer,null,(function(e){return t(e)})):t(vT)}function ST(e){return IT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}}]})(e)}function TT(e){return IT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7a2.5 2.5 0 000 5zM9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5C7.34 5 6 6.34 6 8s1.34 3 3 3zm7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75zM9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13z"}}]})(e)}function kT(e){return IT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"}}]})(e)}function CT(e){return IT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M20 5h-3.2L15 3H9L7.2 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 14h-8v-1c-2.8 0-5-2.2-5-5s2.2-5 5-5V7h8v12zm-3-6c0-2.8-2.2-5-5-5v1.8c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2V18c2.8 0 5-2.2 5-5zm-8.2 0c0 1.8 1.4 3.2 3.2 3.2V9.8c-1.8 0-3.2 1.4-3.2 3.2z"}}]})(e)}function xT(e){let{currentUserUid:t,combinedId:n,db:r,storage:s,userUid:o,chat:a}=e;const[c,l]=(0,i.useState)(""),[u,h]=(0,i.useState)(null);return(0,EE.jsxs)("div",{className:"inputComponent",children:[(0,EE.jsx)("p",{className:"red",children:o}),(0,EE.jsx)("input",{type:"text",placeholder:"Type something...",className:"input inputComponent__input",onChange:e=>l(e.target.value),value:c||""}),(0,EE.jsxs)("div",{className:"inputComponent__send",children:[(0,EE.jsx)("input",{type:"file",style:{display:"none"},id:"file",onChange:e=>h(e.target.files[0])}),(0,EE.jsx)("label",{htmlFor:"file",children:(0,EE.jsx)(kT,{className:"inputComponent__icon"})}),(0,EE.jsx)("button",{onClick:async()=>{if(!c.trim()&&!u)return;if(!n)return;const e={id:RE(),text:c,senderId:t,recipientName:a.displayName,recipientPhoto:a.photoURL,date:nd.now()},i=Hb(r,"chats",n);if(u){const t=hT(pT(s,RE()),u);t.on("state_changed",(e=>{}),(e=>console.error(e)),(async()=>{const n=await fT(t.snapshot.ref);e.img=n,await dE(i,{messages:IE(e)})}))}else await dE(i,{messages:IE(e)});l(""),h(null)},className:"button",children:"\u041d\u0430\u0434\u0456\u0441\u043b\u0430\u0442\u0438"})]})]})}function NT(e){let{chat:t,setCombinedId:n,combinedIdl:r}=e;const{auth:s,db:o}=(0,i.useContext)(QC),[a]=la(s),[c,l]=(0,i.useState)([]),[u,h]=(0,i.useState)(null),d=t.chatId;return n(d),(0,i.useEffect)((()=>{if(!d)return;const e=fE(Hb(o,"chats",d),(e=>{e.exists()&&l(e.data().messages)})),t=fE(Hb(o,"chats",d),(e=>{e.exists()&&h(e.data().recipient)}));return()=>{e(),t()}}),[d,o]),(0,i.useEffect)((()=>{t&&h({name:t.displayName,photo:t.photoURL})}),[t]),(0,EE.jsxs)("div",{className:"messages",children:[t&&(0,EE.jsx)("div",{className:"messages__info",children:u&&(0,EE.jsxs)(EE.Fragment,{children:[(0,EE.jsx)("img",{src:u.photo,alt:"avatar"}),(0,EE.jsx)("p",{children:u.name})]})}),(0,EE.jsx)("div",{className:"messages__container",children:c.map((e=>(0,EE.jsxs)("div",{className:"message ".concat(e.senderId===(null===a||void 0===a?void 0:a.uid)?"myMessage":"otherMessage"),children:[e.text,e.img&&(0,EE.jsx)("img",{src:e.img,alt:"Message Attachment"})]},e.id)))})]})}function AT(e){return IT({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 10a1 1 0 0 1 2 0v2a1 1 0 0 1-2 0v-2zm3 0a1 1 0 0 1 2 0v2a1 1 0 0 1-2 0v-2zm3 0a1 1 0 1 1 2 0v2a1 1 0 0 1-2 0v-2z"}},{tag:"path",attr:{d:"M5.757 1.071a.5.5 0 0 1 .172.686L3.383 6h9.234L10.07 1.757a.5.5 0 1 1 .858-.514L13.783 6H15.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-.623l-1.844 6.456a.75.75 0 0 1-.722.544H3.69a.75.75 0 0 1-.722-.544L1.123 8H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 6h1.717L5.07 1.243a.5.5 0 0 1 .686-.172zM2.163 8l1.714 6h8.246l1.714-6H2.163z"}}]})(e)}function RT(e){return IT({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"}}]})(e)}function PT(){return(0,EE.jsx)("div",{className:"loader-container",children:(0,EE.jsx)("div",{className:"loader"})})}const DT=e=>{const{seconds:t,nanoseconds:n}=e,r=1e3*t+Math.floor(n/1e6),i=new Date(r),s=new Date,o=e=>(e<10?"0":"")+e;if(i.getDate()===s.getDate()&&i.getMonth()===s.getMonth()&&i.getFullYear()===s.getFullYear()){return"\u0441\u044c\u043e\u0433\u043e\u0434\u043d\u0456 \u043e "+(o(i.getHours())+":"+o(i.getMinutes()))}return i.getDate()+" "+["\u0441\u0456\u0447","\u043b\u044e\u0442","\u0431\u0435\u0440","\u043a\u0432\u0456\u0442","\u0442\u0440\u0430\u0432","\u0447\u0435\u0440","\u043b\u0438\u043f","\u0441\u0435\u0440","\u0432\u0435\u0440","\u0436\u043e\u0432","\u043b\u0438\u0441","\u0433\u0440\u0443\u0434"][i.getMonth()]+" "+i.getFullYear()};class OT{constructor(e,t){this._delegate=e,this.firebase=t,rn(e,new _t("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),_n(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){rn(this._delegate,e)}_addOrOverwriteComponent(e){sn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const LT=new ct("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const MT=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=gn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ut(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:bn,setLogLevel:En,onLog:In,apps:null,SDK_VERSION:mn,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(on(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw LT.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Ke(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ut(n,e=e||$t))throw LT.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(OT);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ke(n,e)},createSubscribe:gt,ErrorFactory:ct,deepExtend:Ke}),n}(),FT=new At("@firebase/app-compat");if(tt()&&void 0!==self.firebase){FT.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&FT.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const UT=MT;!function(e){bn("@firebase/app-compat","0.2.30",e)}();UT.registerVersion("firebase","10.10.0","app-compat");const jT=async(e,t,n,r,i,s,o)=>{if(e.stopPropagation(),!i)return o(!0),void console.error("\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 \u043d\u0435 \u0432\u0432\u0456\u0439\u0448\u043e\u0432 \u0443 \u0441\u0438\u0441\u0442\u0435\u043c\u0443.");try{const e=s.collection("carts").doc(i.uid),o=await e.get();if(o.exists){const i=o.data(),a=i.products.includes(t.uid)?i.products.filter((e=>e!==t.uid)):[...i.products,t.uid];if(await e.update({products:a}),n(!r),!i.products.includes(t.uid)){const e=s.collection("products").doc(t.uid);await e.update({basket:1}),console.log("\u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e.")}}else await e.set({products:[t.uid]}),n(!0),console.log("\u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u0434\u043e\u0434\u0430\u043d\u043e \u0434\u043e \u043a\u043e\u0448\u0438\u043a\u0430.")}catch(a){o(!0),console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043a\u043e\u0448\u0438\u043a\u0430 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430:",a)}};function VT(e){const{setError:t,text:n}=e;return(0,EE.jsx)("div",{className:"frame",children:(0,EE.jsxs)("div",{className:"modall",children:[(0,EE.jsxs)("div",{children:[(0,EE.jsx)("img",{src:"https://100dayscss.com/codepen/alert.png",width:"44",height:"38",alt:"message"}),(0,EE.jsx)("span",{className:"title",children:"\u041e\u0445 \u0445\u0430\u043b\u0435\u043f\u0430!"})]}),(0,EE.jsx)("p",{children:n}),(0,EE.jsx)("div",{className:"button",onClick:e=>(e=>{e.stopPropagation(),t(!1)})(e),children:"\u0417\u0440\u043e\u0437\u0443\u043c\u0456\u043b\u043e"})]})})}function zT(e){let{product:t,loading:n}=e;const{auth:r,firestore:s,storage:o}=(0,i.useContext)(QC),[a]=la(r),[c,l]=(0,i.useState)(!1),[u,h]=(0,i.useState)(null),[d,f]=(0,i.useState)(!1),p=te();(0,i.useEffect)((()=>{t.product.photos&&t.product.photos.length>0&&(async()=>{try{const e=o.refFromURL(t.product.photos[0]),n=await e.getDownloadURL();h(n)}catch(d){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u043d\u044f URL-\u0430\u0434\u0440\u0435\u0441\u0438 \u0444\u043e\u0442\u043e \u0437 Firebase Storage:",d)}})();a&&t&&(async()=>{try{const e=s.collection("carts").doc(a.uid),n=await e.get();n.exists&&n.data().products.includes(t.uid)?l(!0):l(!1)}catch(d){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0443 \u0443 \u043a\u043e\u0448\u0438\u043a\u0443 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430:",d)}})()}),[t,a,s,o]);return(0,EE.jsx)("li",{className:"product",onClick:()=>{p("product/".concat(encodeURIComponent(t.product.title)),{state:{product:t}})},children:n?(0,EE.jsx)(PT,{}):(0,EE.jsxs)(EE.Fragment,{children:[d&&(0,EE.jsx)(VT,{setError:f,text:"\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043c\u043e\u0436\u043b\u0438\u0432\u043e \u0432\u0438 \u043d\u0435 \u0432\u0432\u0456\u0439\u0448\u043b\u0438"}),u&&(0,EE.jsx)("img",{src:u,alt:t.product.title,className:"product__img"}),(0,EE.jsxs)("div",{className:"product__info",children:[(0,EE.jsx)("h3",{className:"product__infoTitle",children:t.product.title}),(0,EE.jsx)(AT,{onClick:e=>jT(e,t,l,c,a,s,f),className:c?"basket__active basket-icon":"basket-icon"}),(0,EE.jsxs)("p",{className:"product__price",children:[t.product.price," \u0433\u0440\u043d"]}),(0,EE.jsxs)("span",{className:"product__place-data",children:[(0,EE.jsx)("p",{children:t.product.categori}),(0,EE.jsx)("p",{children:DT(t.createdAt)})]})]})]})})}function BT(e){const{sizeTitle:t,maxSize:n,minSize:r,inputFocused:i}=e;return(0,EE.jsxs)("p",{className:"sizeInput",children:[(0,EE.jsxs)("span",{className:i&&t<r?"red":"",children:["\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0449\u043e\u043d\u0430\u0439\u043c\u0435\u043d\u0448\u0435 ",r," \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432"]}),(0,EE.jsxs)("span",{className:i&&t>n?"red":"",children:[t,"/",n]})]})}const qT=[{title:"\u0412\u0441\u0435",alt:"all"},{title:"\u041a\u043e\u0442\u0438",alt:"cat"},{title:"\u0421\u043e\u0431\u0430\u043a\u0438",alt:"dog"},{title:"\u041f\u0442\u0430\u0445\u0438",alt:"bird"},{title:"\u0420\u0438\u0431\u043a\u0438",alt:"fish"},{title:"\u0413\u0440\u0438\u0437\u0443\u043d\u0438",alt:"rodents"},{title:"\u0420\u0435\u043f\u0442\u0438\u043b\u0456\u0457",alt:"reptiles"}];function HT(e){const{setProductData:t,productData:n}=e,[r,s]=(0,i.useState)(!1),[o,a]=(0,i.useState)("");(0,i.useEffect)((()=>(document.addEventListener("click",c),()=>{document.removeEventListener("click",c)})),[]),(0,i.useEffect)((()=>{}),[n]);const c=e=>{e.target.closest(".dropdown")||s(!1)};return(0,EE.jsxs)("div",{className:"dropdown",children:[(0,EE.jsx)("button",{type:"button",className:"button",onClick:()=>{s(!r)},children:o?o.title:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e"}),(0,EE.jsx)("div",{className:"dropdown-content ".concat(r?"dropdown-content-click":""),children:qT.map((e=>"all"!==e.alt?(0,EE.jsx)("li",{onClick:()=>(e=>{a(e),t((t=>({...t,category:e}))),s(!1)})(e),children:e.title},e.alt):null))})]})}function GT(e){const{setProductData:t,productData:n}=e,[r,s]=(0,i.useState)(0),[o,a]=(0,i.useState)(""),[c,l]=(0,i.useState)(!1);return(0,EE.jsxs)(EE.Fragment,{children:[(0,EE.jsxs)("div",{className:"addProduct__group",children:[(0,EE.jsx)("label",{htmlFor:"title",children:"\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443*"}),(0,EE.jsx)("input",{type:"text",id:"title",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434, \u041b\u0430\u0431\u0440\u0430\u0434\u043e\u0440\u2010\u0440\u0435\u0442\u0440\u0438\u0432\u0435\u0440 \u0446\u0443\u0446\u0435\u043d\u044f\u0442\u043a\u0430",className:"input",onChange:e=>{const n=e.target.value;s(n.length),n.length>=16&&n.length<=70?t((e=>({...e,title:n}))):t((e=>({...e,title:""})))},maxLength:"70",onFocus:()=>{l(!0)},required:!0}),(0,EE.jsx)(BT,{sizeTitle:r,maxSize:70,minSize:16,inputFocused:c})]}),(0,EE.jsxs)("div",{className:"addProduct__group",children:[(0,EE.jsx)("label",{htmlFor:"price",children:"\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u0446\u0456\u043d\u0443*"}),(0,EE.jsxs)("div",{className:"addProduct__price-container",children:[(0,EE.jsx)("input",{type:"number",id:"price",placeholder:"",className:"input addProduct__price",onChange:e=>{let n=e.target.value;n.length>6&&(n=n.slice(0,6),e.target.value=n),(e=>{let n=e.target.value;if(/[^\d.]/.test(n))a("");else{const e=n.split(".");e[1]&&e[1].length>1&&(e[1]=e[1].substring(0,1),n=e.join(".")),a(n),t((e=>({...e,price:n})))}})(e)},required:!0}),(0,EE.jsx)("p",{children:"\u0433\u0440\u043d."})]})]}),(0,EE.jsxs)("div",{className:"addProduct__group",children:[(0,EE.jsx)("label",{htmlFor:"category",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f*"}),(0,EE.jsx)(HT,{setProductData:t,productData:n})]})]})}function KT(e){return IT({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 277.333H277.333V416h-42.666V277.333H96v-42.666h138.667V96h42.666v138.667H416v42.666z"}}]})(e)}function WT(e){return IT({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C140.559 48 48 140.559 48 256c0 115.436 92.559 208 208 208 115.435 0 208-92.564 208-208 0-115.441-92.564-208-208-208zm104.002 282.881l-29.12 29.117L256 285.117l-74.881 74.881-29.121-29.117L226.881 256l-74.883-74.881 29.121-29.116L256 226.881l74.881-74.878 29.12 29.116L285.119 256l74.883 74.881z"}}]})(e)}function QT(e){const{url:t,onImageSelected:n,onImageDeleted:r}=e,[s,o]=(0,i.useState)(null);return(0,EE.jsx)("div",{className:"addProduct__Photo",children:(0,EE.jsxs)("div",{className:"addProduct__content",children:[t?(0,EE.jsxs)("div",{className:"addProduct__imgContainer",children:[(0,EE.jsx)("img",{src:t,alt:"animal",className:"addProduct__image"}),(0,EE.jsx)("div",{className:"addProduct__blur",children:(0,EE.jsx)(ST,{className:"addProduct__delete wave-animation",onClick:()=>{r(t,s)}})})]}):(0,EE.jsxs)("div",{children:[(0,EE.jsx)(CT,{className:"icons addProduct__icon"}),(0,EE.jsxs)("div",{className:"addProduct__hoverPhoto",children:[(0,EE.jsx)(KT,{className:"icons wave-animation"}),(0,EE.jsx)("p",{children:"Add Photo"})]})]}),(0,EE.jsx)("input",{type:"file",accept:"image/*",className:"input",onChange:async e=>{const t=e.target.files[0];if(t){const e=URL.createObjectURL(t);o(t),n(e,t)}}})]})})}function YT(e){const{setProductData:t}=e,[n,r]=(0,i.useState)(0),[s,o]=(0,i.useState)(!1);return(0,EE.jsxs)("div",{className:"description",children:[(0,EE.jsx)("p",{children:"\u041e\u043f\u0438\u0441*"}),(0,EE.jsx)("textarea",{type:"text",className:"description__input input",placeholder:"\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435, \u0449\u043e \u0432\u0438 \u0445\u043e\u0442\u0456\u043b\u0438 \u0431\u0438 \u0434\u0456\u0437\u043d\u0430\u0442\u0438\u0441\u044c \u0437 \u043e\u0433\u043e\u043b\u043e\u0448\u0435\u043d\u043d\u044f",maxLength:"3000",onChange:e=>{const n=e.target.value;r(n.length),n.length>=40&&n.length<=3e3?t((e=>({...e,description:n}))):t((e=>({...e,description:""})))},rows:10,cols:3,onFocus:()=>{o(!0)},required:!0}),(0,EE.jsx)(BT,{sizeTitle:n,maxSize:3e3,minSize:40,inputFocused:s})]})}function JT(e){let{setProductData:t}=e;return(0,EE.jsxs)("div",{children:[(0,EE.jsx)("h2",{className:"title-h2",children:"\u0412\u0430\u0448\u0456 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0456 \u0434\u0430\u043d\u0456"}),(0,EE.jsx)("label",{htmlFor:"Name",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0430 \u043e\u0441\u043e\u0431\u0430*"}),(0,EE.jsx)("input",{type:"text",id:"Name",placeholder:"\u042f\u043a \u0434\u043e \u0432\u0430\u0441 \u0437\u0432\u0435\u0440\u0442\u0430\u0442\u0438\u0441\u044c",className:"input",required:!0,onChange:e=>{const n=e.target.value;t((e=>({...e,contactPerson:n})))},maxLength:20}),(0,EE.jsx)("label",{htmlFor:"telephone",children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443"}),(0,EE.jsx)("input",{type:"number",id:"telephone",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u0443 \u0444\u043e\u0440\u043c\u0430\u0442\u0456 (0XX) XXX-XXXX",className:"input",onChange:e=>{const n=e.target.value;t((e=>({...e,telephone:n})))},pattern:"[0]-[0-9]{2}-[0-9]{3}-[0-9]{4}"})]})}function XT(e){let{description:t,basket:n}=e;return(0,EE.jsxs)("div",{className:"descriptionProduct",children:[(0,EE.jsx)("h2",{className:"descriptionProduct__title",children:"\u041e\u043f\u0438\u0441"}),(0,EE.jsx)("p",{className:"descriptionProduct__description",children:t}),(0,EE.jsx)("div",{className:"descriptionProduct__line"}),(0,EE.jsxs)("div",{className:"descriptionProduct__statistics",children:[(0,EE.jsxs)("p",{className:"descriptionProduct__like",children:["\u0414\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443: ",n.length]}),(0,EE.jsx)("p",{className:"descriptionProduct__views",children:"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u0434\u0456\u0432: 2"})]})]})}function $T(e){let{product:t}=e;const{auth:n,firestore:r}=(0,i.useContext)(QC),[s]=la(n),[o,a]=(0,i.useState)(!1),[c,l]=(0,i.useState)(!1),[u,h]=(0,i.useState)("\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"),d=te();return(0,EE.jsxs)("div",{className:"salesMan",children:[c&&(0,EE.jsx)(VT,{setError:l,text:"\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043c\u043e\u0436\u043b\u0438\u0432\u043e \u0432\u0438 \u043d\u0435 \u0432\u0432\u0456\u0439\u0448\u043b\u0438"}),(0,EE.jsxs)("div",{className:"salesMan__container-dataIcon",children:[(0,EE.jsxs)("p",{className:"salesMan__data",children:["\u041e\u043f\u0443\u0431\u043b\u0456\u043a\u043e\u0432\u0430\u043d\u043e ",DT(t.createdAt)]}),(0,EE.jsx)(AT,{onClick:e=>jT(e,t,a,o,s,r,l),className:o?"basket-icon basket__active":"basket-icon"})]}),(0,EE.jsxs)("h1",{className:"salesMan__title",children:[" ",t.product.title]}),(0,EE.jsxs)("p",{className:"salesMan__price",children:[t.product.price," \u0433\u0440\u043d."]}),(0,EE.jsxs)("div",{className:"salesMan__container-button",children:[(0,EE.jsx)("button",{type:"salesMan__button_message button",className:"button",onClick:()=>{d(Me,{state:{product:t}})},children:"\u041f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f"}),(0,EE.jsx)("button",{className:"salesMan__button_tel button",onClick:()=>h(t.product.telephone),children:u})]})]})}var ZT=n(464);function ek(e){const t=e.disabled?" arrow--disabled":"";return(0,EE.jsxs)("svg",{onClick:e.onClick,className:"arrow ".concat(e.left?"arrow--left":"arrow--right"," ").concat(t),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[e.left&&(0,EE.jsx)("path",{d:"M16.67 0l2.83 2.829-9.339 9.175 9.339 9.167-2.83 2.829-12.17-11.996z"}),!e.left&&(0,EE.jsx)("path",{d:"M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"})]})}function tk(e){let{listPhotoSrc:t}=e;const[n,r]=(0,i.useState)(0),[s,o]=(0,i.useState)(!1),[a,c]=(0,i.useState)(0),[l,u]=(0,ZT.E)({initial:0,slideChanged(e){r(e.track.details.rel)},created(){o(!0)}}),h=(0,i.useMemo)((()=>t.map(((e,t)=>t))),[t]);return(0,EE.jsxs)("div",{className:"slider__container",children:[(0,EE.jsxs)("div",{className:"navigation-wrapper",children:[(0,EE.jsx)("div",{ref:l,className:"keen-slider",children:t.map(((e,t)=>(0,EE.jsx)("img",{src:e,alt:e,className:"keen-slider__slide number-slide".concat(t)},h[t])))},h[0]+h.length),s&&t.length>1&&u.current&&(0,EE.jsxs)(EE.Fragment,{children:[(0,EE.jsx)(ek,{left:!0,onClick:e=>{var t;return e.stopPropagation()||(null===(t=u.current)||void 0===t?void 0:t.prev())},disabled:0===n}),(0,EE.jsx)(ek,{onClick:e=>{var t;return e.stopPropagation()||(null===(t=u.current)||void 0===t?void 0:t.next())},disabled:n===u.current.track.details.slides.length-1})]})]}),s&&u.current&&t.length>1&&(0,EE.jsx)("div",{className:"dots",children:h.map((e=>(0,EE.jsx)("button",{onClick:()=>{var t;null===(t=u.current)||void 0===t||t.moveToIdx(e)},className:"dot"+(n===e?" active":"")},e)))})]})}function nk(){const e=Z(),t=e.state&&e.state.product,[n,r]=(0,i.useState)(!1);return t?(0,EE.jsxs)("div",{className:"productPages",children:[(0,EE.jsxs)("div",{className:"productPages__container",children:[(0,EE.jsx)(tk,{listPhotoSrc:t.product.photos}),(0,EE.jsx)($T,{product:t})]}),(0,EE.jsx)(XT,{description:t.product.description,basket:t.product.basket})]}):n&&(0,EE.jsx)(VT,{text:"\u0421\u0442\u043e\u0440\u0456\u043d\u043a\u0430 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u0430",setError:r})}function rk(e){return IT({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]})(e)}function ik(e){const{setSearchTerm:t,setMaxPrice:n,setMinPrice:r,setSortBy:s}=e,[o,a]=(0,i.useState)(""),[c,l]=(0,i.useState)(""),[u,h]=(0,i.useState)(!1),d=["\u043d\u0435 \u0441\u043e\u0440\u0442\u0443\u0432\u0430\u0442\u0438","\u0434\u0435\u0448\u0435\u0432\u0448\u0456","\u0434\u043e\u0440\u043e\u0436\u0447\u0456"];(0,i.useEffect)((()=>(document.addEventListener("click",f),()=>{document.removeEventListener("click",f)})),[]);const f=e=>{e.target.closest(".dropdown")||h(!1)};return(0,EE.jsx)("div",{className:"search",children:(0,EE.jsx)("form",{autoComplete:"on",children:(0,EE.jsxs)("div",{children:[(0,EE.jsxs)("div",{className:"search__container",children:[(0,EE.jsx)("input",{type:"text",placeholder:"\u0429\u043e \u0448\u0443\u043a\u0430\u0454\u0442\u0435?",className:"search__input input",onChange:e=>a(e.target.value)}),(0,EE.jsx)("input",{className:"search__input input ",type:"text",placeholder:"\u0423\u0441\u044f \u0423\u043a\u0440\u0430\u0457\u043d\u0430"}),(0,EE.jsxs)("button",{type:"submit",onClick:e=>(e=>{e.preventDefault(),t(o);const n=document.getElementById("productsList");n&&n.scrollIntoView({behavior:"smooth",block:"start"})})(e),className:"search__button_search button",children:[(0,EE.jsx)("span",{children:"\u041f\u043e\u0448\u0443\u043a"}),(0,EE.jsx)(rk,{})]})]}),(0,EE.jsxs)("div",{className:"search__container",children:[(0,EE.jsx)("p",{children:"\u0446\u0456\u043d\u0430: "}),(0,EE.jsx)("input",{className:"input search__price",type:"number",placeholder:"\u0432\u0456\u0434:",onChange:e=>r(e.target.value)}),(0,EE.jsx)("input",{className:"input search__price",type:"number",placeholder:"\u0434\u043e:",onChange:e=>n(e.target.value)}),(0,EE.jsxs)("div",{className:"dropdown",children:[(0,EE.jsx)("button",{type:"button",className:"button",onClick:()=>{h(!u)},children:c||"\u043f\u043e\u043a\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0441\u043f\u043e\u0447\u0430\u0442\u043a\u0443"}),(0,EE.jsx)("div",{className:"dropdown-content ".concat(u?"dropdown-content-click":""),children:d.map((e=>"all"!==e.alt?(0,EE.jsx)("li",{onClick:()=>(e=>{l(e),e===d[1]?s("cheap"):e===d[2]?s("dear"):l(""),h(!1)})(e),children:e},e):null))})]})]})]})})})}function sk(e){let{title:t,alt:r,handleCategoryClick:s,selectedCategory:o}=e;const[a,c]=(0,i.useState)(!1);(0,i.useEffect)((()=>{c(o===r)}),[o,r]);return(0,EE.jsxs)("div",{className:"categories__item",onClick:()=>{s(r),c(a)},children:[(0,EE.jsx)("img",{className:"categories__img ".concat(a?"categories__active":""),src:n(628)("./".concat(r,".jpg")),alt:r}),(0,EE.jsx)("p",{className:"categories__text",children:t})]})}function ok(e){let{handleCategoryClick:t,selectedCategory:n}=e;return(0,EE.jsxs)("div",{className:"categories",children:[(0,EE.jsx)("p",{className:"categories__title",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457"}),(0,EE.jsx)("div",{className:"categories__items",children:qT.map((e=>(0,EE.jsx)(sk,{alt:e.alt,title:e.title,handleCategoryClick:t,selectedCategory:n},e.title)))})]})}const ak=10;function ck(e){let{selectedCategory:t,filterProducts:n}=e;const[r,s]=(0,i.useState)(0),o=n,a=t&&"all"!==t?o.filter((e=>e.product.category.alt&&e.product.category.alt===t)):o,{pagItems:c,pagStart:l,pagEnd:u}=(0,i.useMemo)((()=>{if(!a)return{pagItems:[],pagStart:0,pagEnd:0};const e=Math.ceil(a.length/ak),t=[];for(let i=0;i<e;i++)t.push((0,EE.jsx)("button",{onClick:()=>s(i),className:r===i?"active":"",children:i+1},i));const n=r*ak;return{pagItems:t,pagStart:n,pagEnd:n+ak}}));return(0,EE.jsx)("div",{className:"productsList",id:"productsList",children:(0,EE.jsxs)("div",{className:"productsList__container",children:[(0,EE.jsx)("h1",{className:"productsList__title",children:"\u041e\u0433\u043e\u043b\u043e\u0448\u0435\u043d\u043d\u044f"}),(null===a||void 0===a?void 0:a.length)>0?(0,EE.jsxs)(EE.Fragment,{children:[(0,EE.jsx)("ul",{className:"productsList__products",children:a.slice(l,u).map((e=>(0,EE.jsx)(zT,{product:e},e.uid)))}),(0,EE.jsx)("p",{className:"productsList__pagination",children:c})]}):(0,EE.jsx)("h2",{className:"productsList__title-h2 title-h2",children:"\u041e\u0433\u043e\u043b\u043e\u0448\u0435\u043d\u044c \u043d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]})})}var lk=function(){return lk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},lk.apply(this,arguments)},uk=function(e){return{loading:void 0===e||null===e,value:e}},hk=function(e){var t=e?e():void 0,n=(0,i.useReducer)((function(e,t){switch(t.type){case"error":return lk(lk({},e),{error:t.error,loading:!1,value:void 0});case"reset":return uk(t.defaultValue);case"value":return lk(lk({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),uk(t)),r=n[0],s=n[1],o=(0,i.useCallback)((function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})}),[e]),a=(0,i.useCallback)((function(e){s({type:"error",error:e})}),[]),c=(0,i.useCallback)((function(e){s({type:"value",value:e})}),[]);return(0,i.useMemo)((function(){return{error:r.error,loading:r.loading,reset:o,setError:a,setValue:c,value:r.value}}),[r.error,r.loading,o,a,c,r.value])},dk=function(e,t,n){var r=(0,i.useRef)(e);return(0,i.useEffect)((function(){t(e,r.current)||(r.current=e,n&&n())})),r},fk=function(e,t){var n=!e&&!t,r=!!e&&!!t&&Kb(e,t);return n||r},pk=function(e,t){return dk(e,fk,t)},mk=function(e,t){var n=function(e,t){var n=hk(),r=n.error,s=n.loading,o=n.reset,a=n.setError,c=n.setValue,l=n.value,u=pk(e,o);return(0,i.useEffect)((function(){if(u.current){var e=(null===t||void 0===t?void 0:t.snapshotListenOptions)?fE(u.current,t.snapshotListenOptions,c,a):fE(u.current,c,a);return function(){e()}}c(void 0)}),[u.current]),[l,s,r]}(e,t),r=n[0],s=n[1],o=n[2];return[gk(r,null===t||void 0===t?void 0:t.snapshotOptions,null===t||void 0===t?void 0:t.initialValue),s,o,r]},gk=function(e,t,n){return(0,i.useMemo)((function(){var r;return null!==(r=null===e||void 0===e?void 0:e.docs.map((function(e){return e.data(t)})))&&void 0!==r?r:n}),[e,t])};function vk(){const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(""),{firestore:s}=(0,i.useContext)(QC),[o,a]=(0,i.useState)(""),[c,l]=(0,i.useState)(""),[u,h]=(0,i.useState)(""),[d,f]=mk(s.collection("products").orderBy("createdAt"));let p=((e,t)=>e?t.filter((t=>t.product.title.toLowerCase().includes(e.toLowerCase()))):t)(n,d);return o&&(p=p.filter((e=>e.product.price<=parseInt(o))),console.log(p)),c&&(p=p.filter((e=>e.product.price>=parseInt(c)))),"dear"===u?p.sort(((e,t)=>t.product.price-e.product.price)):"cheap"===u&&p.sort(((e,t)=>e.product.price-t.product.price)),f?(0,EE.jsx)(PT,{}):(0,EE.jsxs)(EE.Fragment,{children:[(0,EE.jsx)(ik,{setSearchTerm:r,searchTerm:n,setMaxPrice:a,setMinPrice:l,setSortBy:h}),(0,EE.jsx)(ok,{handleCategoryClick:e=>{t(e)},selectedCategory:e}),(0,EE.jsx)(ck,{selectedCategory:e,filterProducts:p})]})}const yk=[{path:Fe,Component:nk},{path:Ve,Component:vk},{path:Fe,Component:nk}],wk=[{path:Me,Component:function(){const{auth:e,storage:t,db:n}=(0,i.useContext)(QC),r=Z(),s=r.state&&r.state.product,[o]=la(e),[a,c]=(0,i.useState)(null),[l,u]=(0,i.useState)(null),h=null===o||void 0===o?void 0:o.uid,d=null===s||void 0===s?void 0:s.uidUser,[f,p]=(0,i.useState)("");return(0,i.useEffect)((()=>{if(!h||!d)return;(async e=>{const t=h>e?"".concat(h,"_").concat(e):"".concat(e,"_").concat(h);p(t);try{const r=await aE(Hb(n,"chats",t));if(!r.exists()){if(!s)return void console.error("\u0414\u0430\u043d\u0456 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0443 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456 \u0443 location.state");if(!s.displayName||!s.photoURL)return console.log(s),void console.error("\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043d\u044c\u043e \u0434\u0430\u043d\u0438\u0445 \u0434\u043b\u044f \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u0447\u0430\u0442\u0443");await hE(Hb(n,"chats",t),{messages:[],recipient:{name:s.displayName,photo:s.photoURL}});const r=Hb(n,"usersChats",h),i=Hb(n,"usersChats",e);(await aE(r)).exists()||await hE(r,{}),(await aE(i)).exists()||await hE(i,{}),await dE(r,{["".concat(t,".userInfo")]:{uid:e,displayName:s.displayName,photoURL:s.photoURL},["".concat(t,".date")]:bE()}),await dE(i,{["".concat(t,".userInfo")]:{uid:h,displayName:null===o||void 0===o?void 0:o.displayName,photoURL:null===o||void 0===o?void 0:o.photoURL},["".concat(t,".date")]:bE()})}c(r.data()),u({displayName:s.displayName,photoURL:s.photoURL,uid:e})}catch(r){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u0456 \u0447\u0430\u0442\u0443: ",r)}})(d)}),[h,d,s,n,null===o||void 0===o?void 0:o.displayName,null===o||void 0===o?void 0:o.photoURL]),(0,EE.jsx)("div",{className:"chat",children:(0,EE.jsxs)("div",{className:"chat__container",children:[(0,EE.jsx)(SE,{setChat:c,setCombinedId:p,selectedChat:l,setSelectedChat:u,currentUserUid:h}),a?(0,EE.jsxs)("div",{className:"chat__messagesInput",children:[(0,EE.jsx)(NT,{chat:l,setCombinedId:p,combinedId:f}),(0,EE.jsx)(xT,{currentUserUid:h,chat:l,db:n,storage:t,combinedId:f})]}):(0,EE.jsx)("h1",{children:"\u0412\u0456\u0434\u043a\u0440\u0438\u0439\u0442\u0435 \u0447\u0430\u0442"})]})})}},{path:Ue,Component:function(){const{auth:e,firestore:t,storage:n}=(0,i.useContext)(QC),[r]=la(e),s=te(),[o,a]=(0,i.useState)([]),[c,l]=(0,i.useState)(!1),[u,h]=(0,i.useState)([]),[d,f]=(0,i.useState)(!1),[p,m]=(0,i.useState)({title:"",price:"",description:"",telephone:"",contactPerson:"",category:"",photos:[],view:0,basket:[]}),g=Math.max(6-o.length,0),v=Array.from({length:g},((e,t)=>(0,EE.jsx)(QT,{onImageSelected:y,onImageDeleted:w},t)));function y(e,t){a((n=>{const r=[...n,e];return m((e=>({...e,photos:r}))),h((e=>[...e,t])),r}))}function w(e,t){a((t=>t.filter((t=>t!==e)))),m((t=>({...t,photos:t.photos.filter((t=>t!==e))}))),h((e=>e.filter((e=>e!==t))))}return(0,EE.jsx)("div",{className:"addProduct",children:c?(0,EE.jsx)(PT,{}):(0,EE.jsxs)(EE.Fragment,{children:[(0,EE.jsx)("h1",{className:"addProduct__title title",children:"\u0421\u0432\u043e\u0440\u0438\u0442\u0438 \u043e\u0433\u043e\u043b\u043e\u0448\u0435\u043d\u043d\u044f"}),d&&(0,EE.jsx)(VT,{setError:f,text:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0443\u0441\u0456 \u043f\u043e\u043b\u044f"}),(0,EE.jsxs)("div",{className:"addProduct__container",children:[(0,EE.jsx)("h2",{className:"title-h2",children:"\u041e\u043f\u0438\u0448\u0456\u0442\u044c \u0443 \u043f\u043e\u0434\u0440\u043e\u0431\u0438\u0446\u044f\u0445"}),(0,EE.jsxs)("form",{autoComplete:"on",children:[(0,EE.jsx)(GT,{setProductData:m,productData:p}),(0,EE.jsxs)("div",{children:[(0,EE.jsx)("h2",{className:"title-h2 addProduct__title_margin",children:"Photos"}),(0,EE.jsxs)("div",{className:"addProduct__containerPhoto",children:[o.map(((e,t)=>(0,EE.jsx)(QT,{url:e,index:t,onImageDeleted:w},t))),v]})]}),(0,EE.jsx)(YT,{setProductData:m}),(0,EE.jsx)(JT,{setProductData:m}),(0,EE.jsx)("button",{type:"submit",className:"button maxContent",onClick:async e=>{e.preventDefault();let i=!1;if(Object.entries(p).forEach((e=>{let[t,n]=e;"view"!==t&&"basket"!==t&&(""===n||Array.isArray(n)&&0===n.length)&&(i=!0)})),i)f(!0);else{f(!1);const e=[];try{l(!0),await Promise.all(u.map((async t=>{const r=pT(n,"photos/".concat(RE()));await hT(r,t);const i=await fT(r);e.push(i)})));const i=RE();await t.collection("products").doc(i).set({uid:i,uidUser:r.uid,displayName:r.displayName,photoURL:r.photoURL,product:{...p,photos:e},createdAt:UT.firestore.Timestamp.now()}),await t.collection("users").doc(r.uid).collection("products").doc(i).set({uid:i,uidUser:r.uid,displayName:r.displayName,photoURL:r.photoURL,product:{...p,photos:e},createdAt:UT.firestore.Timestamp.now()}),s(Ve),l(!1)}catch(d){console.error("Error uploading photos or adding product:",d),f(!0)}}},children:"\u041e\u043f\u0443\u0431\u043b\u0456\u043a\u0443\u0432\u0430\u0442\u0438"})]})]})]})})}},{path:je,Component:function(){const{auth:e,firestore:t}=(0,i.useContext)(QC),[n]=la(e),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)([]),[c,l]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{if(n){const e=async()=>{try{const e=t.collection("users").doc(n.uid).collection("products"),r=(await e.get()).docs.map((e=>({id:e.id,...e.data()}))),i=t.collection("carts").doc(n.uid),o=(await i.get()).data(),c=o?o.products:[],u=await Promise.all(c.map((async e=>{const n=await t.collection("products").doc(e).get();return{id:n.id,...n.data()}})));s(r),a(u),l(!1)}catch(e){console.error("Error fetching user data: ",e),l(!1)}};e()}}),[n,t]),c?(0,EE.jsx)(PT,{}):(0,EE.jsx)("div",{className:"profilePages",children:(0,EE.jsxs)("div",{className:"profilePages__ti",children:[(0,EE.jsx)("h1",{className:"profilePages__title",children:n.displayName}),(0,EE.jsx)("img",{src:n.photoURL,alt:"avatar"}),(0,EE.jsxs)("div",{className:"productsList",id:"productsList",children:[(0,EE.jsxs)("div",{className:"productsList__container",children:[(0,EE.jsx)("h1",{className:"productsList__title",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),o.length>0?(0,EE.jsx)("ul",{className:"productsList__products",children:o.map((e=>(0,EE.jsx)(zT,{product:e},e.id)))}):(0,EE.jsx)("h2",{className:"productsList__title-h2 title-h2",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u043e\u0440\u043e\u0436\u043d\u044f"})]}),(0,EE.jsxs)("div",{className:"productsList__container",children:[(0,EE.jsx)("h1",{className:"productsList__title",children:"\u0412\u0430\u0448\u0456 \u043e\u0433\u043e\u043b\u043e\u0448\u0435\u043d\u043d\u044f"}),r.length>0?(0,EE.jsx)("ul",{className:"productsList__products",children:r.map((e=>(0,EE.jsx)(zT,{product:e},e.id)))}):(0,EE.jsx)("h2",{className:"productsList__title-h2 title-h2",children:"\u041e\u0433\u043e\u043b\u043e\u0448\u0435\u043d\u044c \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]})]})]})})}},{path:Ve,Component:vk},{path:Fe,Component:nk}];function _k(){const{auth:e}=(0,i.useContext)(QC);return(0,EE.jsx)("div",{className:"login",children:(0,EE.jsxs)("div",{className:"login__container",children:[["bird2.jpeg","birds.jpeg","cat.jpeg","dog.jpeg","pexels.jpeg","sova.jpeg","tiger.jpeg"].map((e=>(0,EE.jsx)("img",{src:e,alt:e},e))),(0,EE.jsxs)("div",{children:[(0,EE.jsx)("h1",{children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043e\u0431\u043b\u0456\u043a\u043e\u0432\u0438\u0439 \u0437\u0430\u043f\u0438\u0441"}),(0,EE.jsx)("h2",{children:"\u0449\u043e\u0431 \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0434\u043e\u0434\u0430\u0442\u043e\u043a"})]}),(0,EE.jsx)("button",{onClick:async()=>{const t=new UT.auth.GoogleAuthProvider,{user:n}=await e.signInWithPopup(t)},className:"button",children:"\u0423\u0432\u0456\u0439\u0442\u0438 \u0437\u0430 \u0434\u043e\u043f\u043e\u043c\u043e\u0433\u043e\u044e Google"})]})})}function bk(e){return IT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 16c0 1.103.897 2 2 2h3.586L12 21.414 15.414 18H19c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2H5c-1.103 0-2 .897-2 2v12zM5 4h14v12h-4.414L12 18.586 9.414 16H5V4z"}},{tag:"path",attr:{d:"M11 14h2v-3h3V9h-3V6h-2v3H8v2h3z"}}]})(e)}function Ik(e){return IT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Login"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M20.944,18.432a2.577,2.577,0,0,1-2.729,2.5c-2.153.012-4.307,0-6.46,0a.5.5,0,0,1,0-1c2.2,0,4.4.032,6.6,0,1.107-.016,1.589-.848,1.589-1.838V5.63a1.545,1.545,0,0,0-.969-1.471,3.027,3.027,0,0,0-1.061-.095H11.755a.5.5,0,0,1,0-1c2.225,0,4.465-.085,6.688,0a2.566,2.566,0,0,1,2.5,2.67Z"}},{tag:"path",attr:{d:"M15.794,12.354a.459.459,0,0,0,.138-.312A.3.3,0,0,0,15.938,12a.29.29,0,0,0-.006-.041.455.455,0,0,0-.138-.313L12.125,7.978a.5.5,0,0,0-.707.707L14.234,11.5H3.492a.5.5,0,0,0,0,1H14.234l-2.816,2.815a.5.5,0,0,0,.707.707Z"}}]}]}]})(e)}function Ek(e){let{productsArr:t,handleRemoveFromCart:n,handleClose:r,setShowBasket:s}=e;const o=te();(0,i.useEffect)((()=>(document.addEventListener("click",a),()=>{document.removeEventListener("click",a)})),[]);const a=e=>{e.target.closest(".header")||s(!1)};return(0,EE.jsxs)("div",{className:"basket",onClick:e=>{e.stopPropagation()},children:[(0,EE.jsx)(WT,{className:"basket__icon",onClick:e=>r(e)}),(0,EE.jsxs)("h1",{className:"basket__title-h1",children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430 ",0===t.length&&"\u043f\u0443\u0441\u0442\u0430"]}),t.map((e=>(0,EE.jsxs)("div",{className:"basket__product",onClick:t=>((e,t)=>{r(e),o("product/".concat(encodeURIComponent(t.product.title)),{state:{product:t}})})(t,e),children:[(0,EE.jsx)("div",{className:"basket__title",children:e.product.title}),(0,EE.jsxs)("div",{className:"basket__price",children:[e.product.price," \u0433\u0440\u043d."]}),(0,EE.jsx)("img",{className:"basket__img",src:e.product.photos[0],alt:"\u0424\u043e\u0442\u043e"}),(0,EE.jsx)("button",{className:"button basket__delete",type:"button",onClick:t=>n(t,e.id),children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]},e.id)))]})}function Sk(){const[e,t]=(0,i.useState)(!1),{auth:n}=(0,i.useContext)(QC),[r]=la(n),[s,o]=(0,i.useState)([]),{firestore:a}=(0,i.useContext)(QC),[c,l]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(async()=>{try{const t=await a.collection("carts").doc(r.uid).get();if(t.exists){const e=t.data().products,n=await Promise.all(e.map((async e=>{const t=await a.collection("products").doc(e).get();return t.exists?(console.log("products",t.data(),"products",t.id),{id:t.id,...t.data()}):(console.log("Product does not exist with id:",e),null)})));console.log(n,"Produc"),o(n)}else e&&l(!0),console.log(c,"true1")}catch(c){e&&l(!0),console.log(c,"true")}})()}),[e]);return(0,EE.jsx)(EE.Fragment,{children:(0,EE.jsxs)("header",{className:"header",children:[c&&(0,EE.jsx)(VT,{setError:l,text:"\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043c\u043e\u0436\u043b\u0438\u0432\u043e \u0432\u0438 \u043d\u0435 \u0432\u0432\u0456\u0439\u0448\u043b\u04381"}),(0,EE.jsxs)("div",{className:"header__content",children:[(0,EE.jsx)(Ae,{to:"/",className:"header__functional_item",children:(0,EE.jsx)("div",{className:"header__logo",children:"Shop"})}),(0,EE.jsxs)("div",{className:"header__functional",children:[(0,EE.jsxs)(Re,{to:Me,className:"header__functional_item",children:[(0,EE.jsx)(RT,{className:"header__icon"}),(0,EE.jsx)("span",{children:"\u041f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f"})]}),(0,EE.jsxs)("div",{className:"header__functional_item relative",onClick:()=>t(!e),children:[(0,EE.jsx)(AT,{className:"header__icon"}),(0,EE.jsx)("span",{children:"\u041a\u043e\u0440\u0438\u0437\u043d\u0430"}),e&&(0,EE.jsx)(Ek,{setShowBasket:t,handleClose:e=>{e.stopPropagation(),t(!1)},productsArr:s,handleRemoveFromCart:async(e,t)=>{e.stopPropagation();try{await a.collection("carts").doc(r.uid).update({products:UT.firestore.FieldValue.arrayRemove(t)});const e=(await a.collection("carts").doc(r.uid).get()).data(),n=await Promise.all(e.products.map((async e=>{const t=await a.collection("products").doc(e).get();return{id:t.id,...t.data()}})));o(n)}catch(c){console.log(c,"true"),l(!0)}}})]}),(0,EE.jsxs)(Re,{to:je,className:"header__functional_item",children:[(0,EE.jsx)(TT,{className:"header__icon"}),(0,EE.jsx)("span",{children:"\u0412\u0430\u0448 \u043f\u0440\u043e\u0444\u0456\u043b\u044c"})]}),(0,EE.jsxs)(Re,{to:Ue,className:"header__functional_item",children:[(0,EE.jsx)(bk,{className:"header__icon"}),(0,EE.jsx)("span",{children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043e\u0433\u043e\u043b\u043e\u0448\u0435\u043d\u043d\u044f"})]}),r?(0,EE.jsxs)("div",{className:"header__functional_item",children:[(0,EE.jsx)(Ik,{className:"header__icon"}),(0,EE.jsx)("span",{onClick:()=>n.signOut(),children:"\u0412\u0438\u0439\u0442\u0438"})]}):(0,EE.jsxs)(Re,{to:Le,className:"header__functional_item",children:[(0,EE.jsx)(Ik,{className:"header__icon"}),(0,EE.jsx)("span",{children:"\u041b\u043e\u0433\u0438\u043d"})]})]})]})]})})}function Tk(){return(0,EE.jsxs)(EE.Fragment,{children:[(0,EE.jsx)(Sk,{}),(0,EE.jsx)("div",{style:{maxWidth:"1200px",margin:"100px auto",background:"#fff",marginBottom:"100px"},children:(0,EE.jsx)(ge,{})})]})}function kk(){const{auth:e}=(0,i.useContext)(QC),[t]=la(e);return(0,EE.jsx)(we,{children:t?(0,EE.jsxs)(ve,{path:"/",element:(0,EE.jsx)(Tk,{}),children:[wk.map((e=>{let{path:t,Component:n}=e;return(0,EE.jsx)(ve,{path:t,element:(0,EE.jsx)(n,{}),exact:!0},t)})),(0,EE.jsx)(ve,{path:"*",element:(0,EE.jsx)(me,{to:Ve})}),(0,EE.jsx)(ve,{index:!0,element:(0,EE.jsx)(vk,{})})]}):(0,EE.jsxs)(EE.Fragment,{children:[(0,EE.jsxs)(ve,{path:"/",element:(0,EE.jsx)(Tk,{}),children:[yk.map((e=>{let{path:t,Component:n}=e;return(0,EE.jsx)(ve,{path:t,element:(0,EE.jsx)(n,{}),exact:!0},t)})),(0,EE.jsx)(ve,{path:"*",element:(0,EE.jsx)(me,{to:Le})}),(0,EE.jsx)(ve,{index:!0,element:(0,EE.jsx)(vk,{})})]}),(0,EE.jsx)(ve,{path:Le,element:(0,EE.jsx)(_k,{})})]})})}const Ck=function(){const{auth:e}=(0,i.useContext)(QC),[t]=la(e);return(0,EE.jsx)("div",{className:"App",children:(0,EE.jsx)(Ce,{children:(0,EE.jsx)(kk,{})})})};function xk(){return window}async function Nk(e,t,n){var r;const{BuildInfo:i}=xk();ir(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(ir(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return $r()?o.ibi=i.packageName:Yr()?o.apn=i.packageName:Jn(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Wo(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Ak(e){const{cordova:t}=xk();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Rk=20;class Pk extends Eo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Dk(e){const t=await Mk()._get(Fk(e));return t&&await Mk()._remove(Fk(e)),t}function Ok(e,t){var n,r;const i=function(e){const t=Uk(e),n=t.link?decodeURIComponent(t.link):void 0,r=Uk(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Uk(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Uk(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Xn(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Lk(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Rk;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Mk(){return jr(Ts)}function Fk(e){return Br("authEvent",e.config.apiKey,e.name)}function Uk(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return pt(n.join("?"))}const jk=class{constructor(){this._redirectPersistence=Cs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bo,this._overrideRedirectResult=mo}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Pk(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Jn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=xk();nr("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),nr("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),nr("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),nr("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),nr("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),ho.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Lk(),postBody:null,tenantId:e.tenantId,error:Xn(e,"no-auth-event")}}(e,n,r);await function(e,t){return Mk()._set(Fk(e),t)}(e,s);const o=await Nk(e,s,t);return async function(e,t,n){const{cordova:r}=xk();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(Xn(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),Yr()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Ak(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=xk(),n={};$r()?n.iosBundleId=t.packageName:Yr()?n.androidPackageName=t.packageName:Jn(e,"operation-not-supported-in-this-environment"),await ko(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=xk(),s=setTimeout((async()=>{await Dk(e),t.onEvent(Vk())}),500),o=async n=>{clearTimeout(s);const r=await Dk(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Ok(r,n.url)),t.onEvent(i||Vk())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");xk().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function Vk(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Xn("no-auth-event")}}function zk(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Bk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return!("file:"!==zk()&&"ionic:"!==zk()&&"capacitor:"!==zk()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function qk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return it()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/Edge\/\d+/.test(e)}(e)}function Hk(){try{const e=self.localStorage,t=Ns();if(e)return e.setItem(t,"1"),e.removeItem(t),!qk()||ot()}catch(e){return Gk()&&ot()}return!1}function Gk(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Kk(){return("http:"===zk()||"https:"===zk()||nt()||Bk())&&!(rt()||et())&&Hk()&&!Gk()}function Wk(){return Bk()&&"undefined"!==typeof document}const Qk={LOCAL:"local",NONE:"none",SESSION:"session"},Yk=nr,Jk="persistence";async function Xk(e){await e._initializationPromise;const t=$k(),n=Br(Jk,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function $k(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const Zk=nr;class eC{constructor(){this.browserResolver=jr(Yo),this.cordovaResolver=jr(jk),this.underlyingResolver=null,this._redirectPersistence=Cs,this._completeRedirectFn=bo,this._overrideRedirectResult=mo}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Wk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Zk(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Wk()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function tC(e){return e.unwrap()}function nC(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new oC(e,function(e,t){var n;const r=wt(e),i=t;return nr(t.customData.operationType,r,"argument-error"),nr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ws._fromError(r,i)}(e,t))}else if(r){const e=rC(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function rC(e){const{_tokenResponse:t}=e instanceof at?e.customData:e;if(!t)return null;if(!(e instanceof at)&&"temporaryProof"in t&&"phoneNumber"in t)return to.credentialFromResult(e);const n=t.providerId;if(!n||n===Fn.PASSWORD)return null;let r;switch(n){case Fn.GOOGLE:r=Di;break;case Fn.FACEBOOK:r=Pi;break;case Fn.GITHUB:r=Oi;break;case Fn.TWITTER:r=Fi;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Li._create(n,o):Si._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Ri(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof at?r.credentialFromError(e):r.credentialFromResult(e)}function iC(e,t){return t.catch((t=>{throw t instanceof at&&nC(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,rC(r)),additionalUserInfo:vs(e),user:aC.getOrCreate(n)};var r}))}async function sC(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>iC(e,n.confirm(t))}}class oC{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return iC(tC(this.auth),this.resolver.resolveSignIn(e))}}class aC{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=wt(e);return bs.has(t)||bs.set(t,_s._fromUser(t)),bs.get(t)}(e)}static getOrCreate(e){return aC.USER_MAP.has(e)||aC.USER_MAP.set(e,new aC(e)),aC.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return iC(this.auth,Ji(this._delegate,e))}async linkWithPhoneNumber(e,t){return sC(this.auth,async function(e,t,n){const r=wt(e);await Ki(!1,r,"phone");const i=await eo(r.auth,t,wt(n));return new Zs(i,(e=>Ji(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return iC(this.auth,async function(e,t,n){const r=wt(e);er(r.auth,t,Ni);const i=no(r.auth,n);return new lo(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,eC))}async linkWithRedirect(e){return await Xk(ii(this.auth)),_o(this._delegate,e,eC)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return iC(this.auth,Xi(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return sC(this.auth,async function(e,t,n){const r=wt(e);if(un(r.auth.app))return Promise.reject(Zn(r.auth));const i=await eo(r.auth,t,wt(n));return new Zs(i,(e=>Xi(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return iC(this.auth,async function(e,t,n){const r=wt(e);if(un(r.auth.app))return Promise.reject(Xn(r.auth,"operation-not-supported-in-this-environment"));er(r.auth,t,Ni);const i=no(r.auth,n);return new lo(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,eC))}async reauthenticateWithRedirect(e){return await Xk(ii(this.auth)),wo(this._delegate,e,eC)}sendEmailVerification(e){return as(this._delegate,e)}async unlink(e){return await Hi(this._delegate,e),this}updateEmail(e){return function(e,t){const n=wt(e);return un(n.auth.app)?Promise.reject(Zn(n.auth)):us(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return us(wt(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=wt(e);if(un(n.auth.app))return Promise.reject(Zn(n.auth));await Gi(n,t)}(this._delegate,e)}updateProfile(e){return ls(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return cs(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}aC.USER_MAP=new WeakMap;const cC=nr;class lC{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;cC(n,"invalid-api-key",{appName:e.name}),cC(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?eC:void 0;this._delegate=t.initialize({options:{persistence:hC(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Gn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?aC.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){di(this._delegate,e,t)}applyActionCode(e){return is(this._delegate,e)}checkActionCode(e){return ss(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await gi(wt(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&rs(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return iC(this._delegate,async function(e,t,n){if(un(e.app))return Promise.reject(Zn(e));const r=ii(e),i=hi(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ui),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&rs(e),t})),o=await ji._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return os(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Ci.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){cC(Kk(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await ii(e)._initializationPromise,bo(e,t,!1)}(this._delegate,eC);return e?iC(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){ii(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=uC(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=uC(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=ii(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){nr(t.handleCodeInApp,r,"argument-error"),t&&ns(r,e,t)}(i,n),await hi(r,i,"getOobCode",bi)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=ii(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&ns(r,i,n),await hi(r,i,"getOobCode",_i)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Yk(Object.values(Qk).includes(t),e,"invalid-persistence-type"),rt()?Yk(t!==Qk.SESSION,e,"unsupported-persistence-type"):et()?Yk(t===Qk.NONE,e,"unsupported-persistence-type"):Gk()?Yk(t===Qk.NONE||t===Qk.LOCAL&&ot(),e,"unsupported-persistence-type"):Yk(t===Qk.NONE||Hk(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Qk.SESSION:t=Cs;break;case Qk.LOCAL:t=await jr(Bs)._isAvailable()?Bs:Ts;break;case Qk.NONE:t=zr;break;default:return Jn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return iC(this._delegate,async function(e){var t;if(un(e.app))return Promise.reject(Zn(e));const n=ii(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new ji({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Ui(n,{returnSecureToken:!0}),i=await ji._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return iC(this._delegate,Yi(this._delegate,e))}signInWithCustomToken(e){return iC(this._delegate,$i(this._delegate,e))}signInWithEmailAndPassword(e,t){return iC(this._delegate,function(e,t,n){return un(e.app)?Promise.reject(Zn(e)):Yi(wt(e),xi.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&rs(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return iC(this._delegate,async function(e,t,n){if(un(e.app))return Promise.reject(Zn(e));const r=wt(e),i=xi.credentialWithLink(t,n||sr());return nr(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Yi(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return sC(this._delegate,async function(e,t,n){if(un(e.app))return Promise.reject(Zn(e));const r=ii(e),i=await eo(r,t,wt(n));return new Zs(i,(e=>Yi(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return cC(Kk(),this._delegate,"operation-not-supported-in-this-environment"),iC(this._delegate,async function(e,t,n){if(un(e.app))return Promise.reject(Xn(e,"operation-not-supported-in-this-environment"));const r=ii(e);er(e,t,Ni);const i=no(r,n);return new lo(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,eC))}async signInWithRedirect(e){return cC(Kk(),this._delegate,"operation-not-supported-in-this-environment"),await Xk(this._delegate),yo(this._delegate,e,eC)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await ss(wt(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function uC(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&aC.getOrCreate(e)),error:t,complete:n}}function hC(e,t){const n=function(e,t){const n=$k();if(!n)return[];const r=Br(Jk,e,t);switch(n.getItem(r)){case Qk.NONE:return[zr];case Qk.LOCAL:return[Bs,Cs];case Qk.SESSION:return[Cs];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Bs)||n.push(Bs),"undefined"!==typeof window)for(const r of[Ts,Cs])n.includes(r)||n.push(r);return n.includes(zr)||n.push(zr),n}lC.Persistence=Qk;class dC{constructor(){this.providerId="phone",this._delegate=new to(tC(UT.auth()))}static credential(e,t){return to.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}dC.PHONE_SIGN_IN_METHOD=to.PHONE_SIGN_IN_METHOD,dC.PROVIDER_ID=to.PROVIDER_ID;const fC=nr;class pC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:UT.app();var r;fC(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new $s(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var mC;(mC=UT).INTERNAL.registerComponent(new _t("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new lC(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Un,PASSWORD_RESET:jn,RECOVER_EMAIL:Vn,REVERT_SECOND_FACTOR_ADDITION:zn,VERIFY_AND_CHANGE_EMAIL:Bn,VERIFY_EMAIL:qn}},EmailAuthProvider:xi,FacebookAuthProvider:Pi,GithubAuthProvider:Oi,GoogleAuthProvider:Di,OAuthProvider:Ri,SAMLAuthProvider:Mi,PhoneAuthProvider:dC,PhoneMultiFactorGenerator:$o,RecaptchaVerifier:pC,TwitterAuthProvider:Fi,Auth:lC,AuthCredential:mi,Error:at}).setInstantiationMode("LAZY").setMultipleInstances(!1)),mC.registerVersion("@firebase/auth-compat","0.5.5");function gC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new zh("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function vC(){if("undefined"===typeof Uint8Array)throw new zh("unimplemented","Uint8Arrays are not available in this environment.")}function yC(){if("undefined"==typeof atob)throw new zh("unimplemented","Blobs are unavailable in Firestore in this environment.")}class wC{constructor(e){this._delegate=e}static fromBase64String(e){return yC(),new wC(sI.fromBase64String(e))}static fromUint8Array(e){return vC(),new wC(sI.fromUint8Array(e))}toBase64(){return yC(),this._delegate.toBase64()}toUint8Array(){return vC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _C(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class bC{enableIndexedDbPersistence(e,t){return function(e,t){iI(e=Lb(e,Jb));const n=Xb(e);if(n._uninitializedComponentsProvider)throw new zh(Vh.FAILED_PRECONDITION,"SDK cache is already specified.");Lh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new ab;return Zb(n,i,new sb(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){iI(e=Lb(e,Jb));const t=Xb(e);if(t._uninitializedComponentsProvider)throw new zh(Vh.FAILED_PRECONDITION,"SDK cache is already specified.");Lh("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new ab;return Zb(t,r,new ob(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new zh(Vh.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Bh;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ed.D())return Promise.resolve();const t=e+"main";await Ed.delete(t)}(Fy(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class IC{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Df||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Lh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jb(this._delegate,e,t,n)}enableNetwork(){return tI(this._delegate)}disableNetwork(){return nI(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Rb("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return eI(this._delegate)}onSnapshotsInSync(e){return pE(this._delegate,e)}get app(){if(!this._appCompat)throw new zh("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new MC(this,qb(this._delegate,e))}catch(t){throw xC(t,"collection()","Firestore.collection()")}}doc(e){try{return new CC(this,Hb(this._delegate,e))}catch(t){throw xC(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new DC(this,function(e,t){if(e=Lb(e,Ub),Ab("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new zh(Vh.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Vb(e,null,function(e){return new Mp(sd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw xC(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Lb(e,Jb);const r=Object.assign(Object.assign({},vE),n);return function(e){if(e.maxAttempts<1)throw new zh(Vh.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Bh;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Eb(e);new db(e.asyncQueue,i,n,t,r).Ya()})),r.promise}(Xb(e),(n=>t(new _E(e,n))),r)}(this._delegate,(t=>e(new SC(this,t))))}batch(){return Xb(this._delegate),new TC(new yE(this._delegate,(e=>mE(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Xb(e=Lb(e,Jb)),r=new Yb;return Cb(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return rI(this._delegate,e).then((e=>e?new DC(this,e):null))}}class EC extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new wC(new sI(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return CC.forKey(t,this.firestore,null)}}class SC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new EC(e)}get(e){const t=FC(e);return this._delegate.get(t).then((e=>new RC(this._firestore,new nE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=FC(e);return n?(gC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=FC(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=FC(e);return this._delegate.delete(t),this}}class TC{constructor(e){this._delegate=e}set(e,t,n){const r=FC(e);return n?(gC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=FC(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=FC(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class kC{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new rE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new PC(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=kC.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new kC(e,new EC(e),t),r.set(t,i)),i}}kC.INSTANCES=new WeakMap;class CC{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new EC(e)}static forPath(e,t,n){if(e.length%2!==0)throw new zh("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new CC(t,new zb(t._delegate,n,new cd(e)))}static forKey(e,t,n){return new CC(t,new zb(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new MC(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new MC(this.firestore,qb(this._delegate,e))}catch(t){throw xC(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=wt(e))instanceof zb&&Gb(this._delegate,e)}set(e,t){t=gC("DocumentReference.set",t);try{return t?hE(this._delegate,e,t):hE(this._delegate,e)}catch(n){throw xC(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?dE(this._delegate,e):dE(this._delegate,e,t,...r)}catch(s){throw xC(s,"updateDoc()","DocumentReference.update()")}}delete(){return mE(Lb((e=this._delegate).firestore,Jb),[new qm(e._key,Am.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=NC(t),i=AC(t,(e=>new RC(this.firestore,new nE(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return fE(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?lE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Lb(e,zb);const t=Lb(e.firestore,Jb);return Tb(Xb(t),e._key,{source:"server"}).then((n=>gE(t,e,n)))}(this._delegate):aE(this._delegate),t.then((e=>new RC(this.firestore,new nE(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new CC(this.firestore,e?this._delegate.withConverter(kC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function xC(e,t,n){return e.message=e.message.replace(t,n),e}function NC(e){for(const t of e)if("object"===typeof t&&!_C(t))return t;return{}}function AC(e,t){var n,r;let i;return i=_C(e[0])?e[0]:_C(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class RC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new CC(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return oE(this._delegate,e._delegate)}}class PC extends RC{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Fh(),t}}class DC{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new EC(e)}where(e,t,n){try{return new DC(this.firestore,zI(this._delegate,function(e,t,n){const r=t,i=FI("where",e);return BI._create(i,r,n)}(e,t,n)))}catch(r){throw xC(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new DC(this.firestore,zI(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=FI("orderBy",e);return HI._create(n,t)}(e,t)))}catch(n){throw xC(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new DC(this.firestore,zI(this._delegate,(Mb("limit",t=e),GI._create("limit",t,"F"))))}catch(t){throw xC(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new DC(this.firestore,zI(this._delegate,(Mb("limitToLast",t=e),GI._create("limitToLast",t,"L"))))}catch(t){throw xC(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new DC(this.firestore,zI(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return KI._create("startAt",t,!0)}(...arguments)))}catch(e){throw xC(e,"startAt()","Query.startAt()")}}startAfter(){try{return new DC(this.firestore,zI(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return KI._create("startAfter",t,!1)}(...arguments)))}catch(e){throw xC(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new DC(this.firestore,zI(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return WI._create("endBefore",t,!1)}(...arguments)))}catch(e){throw xC(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new DC(this.firestore,zI(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return WI._create("endAt",t,!0)}(...arguments)))}catch(e){throw xC(e,"endAt()","Query.endAt()")}}isEqual(e){return Kb(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?uE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Lb(e,Vb);const t=Lb(e.firestore,Jb),n=Xb(t),r=new cE(t);return kb(n,e._query,{source:"server"}).then((n=>new iE(t,r,e,n)))}(this._delegate):function(e){e=Lb(e,Vb);const t=Lb(e.firestore,Jb),n=Xb(t),r=new cE(t);return UI(e._query),kb(n,e._query).then((n=>new iE(t,r,e,n)))}(this._delegate),t.then((e=>new LC(this.firestore,new iE(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=NC(t),i=AC(t,(e=>new LC(this.firestore,new iE(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return fE(this._delegate,r,i)}withConverter(e){return new DC(this.firestore,e?this._delegate.withConverter(kC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class OC{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new PC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class LC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new DC(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new PC(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new OC(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new PC(this._firestore,n))}))}isEqual(e){return oE(this._delegate,e._delegate)}}class MC extends DC{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new CC(this.firestore,e):null}doc(e){try{return new CC(this.firestore,void 0===e?Hb(this._delegate):Hb(this._delegate,e))}catch(t){throw xC(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Lb(e.firestore,Jb),r=Hb(e),i=ZI(e.converter,t);return mE(n,[gI(mI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Am.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new CC(this.firestore,e)))}isEqual(e){return Gb(this._delegate,e._delegate)}withConverter(e){return new MC(this.firestore,e?this._delegate.withConverter(kC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function FC(e){return Lb(e,zb)}class UC{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new oI(...t)}static documentId(){return new UC(ad.keyField().canonicalString())}isEqual(e){return(e=wt(e))instanceof oI&&this._delegate._internalPath.isEqual(e._internalPath)}}class jC{constructor(e){this._delegate=e}static serverTimestamp(){const e=bE();return e._methodName="FieldValue.serverTimestamp",new jC(e)}static delete(){const e=new vI("deleteField");return e._methodName="FieldValue.delete",new jC(e)}static arrayUnion(){const e=IE(...arguments);return e._methodName="FieldValue.arrayUnion",new jC(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bI("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new jC(e)}static increment(e){const t=new II("increment",e);return t._methodName="FieldValue.increment",new jC(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const VC={Firestore:IC,GeoPoint:cI,Timestamp:nd,Blob:wC,Transaction:SC,WriteBatch:TC,DocumentReference:CC,DocumentSnapshot:RC,Query:DC,QueryDocumentSnapshot:PC,QuerySnapshot:LC,CollectionReference:MC,FieldPath:UC,FieldValue:jC,setLogLevel:function(e){var t;t=e,Rh.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new _t("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},VC)))}(e,((e,t)=>new IC(e,t,new bC))),e.registerVersion("@firebase/firestore-compat","0.3.28")}(UT);class zC{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class BC{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new zC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new zC(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new zC(e,this,this._ref)):{next:t.next?e=>t.next(new zC(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class qC{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new HC(e,this._service)))}get items(){return this._delegate.items.map((e=>new HC(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class HC{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return rT(e,t)}(this._delegate,e);return new HC(t,this.storage)}get root(){return new HC(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new HC(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new BC(hT(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aS.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=lS(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new BC(new YS(this._delegate,new fS(r.data,!0),i),this)}listAll(){return function(e){return XS(e=wt(e))}(this._delegate).then((e=>new qC(e,this.storage)))}list(e){return function(e,t){return ZS(e=wt(e),t)}(this._delegate,e||void 0).then((e=>new qC(e,this.storage)))}getMetadata(){return dT(this._delegate)}updateMetadata(e){return function(e,t){return eT(e=wt(e),t)}(this._delegate,e)}getDownloadURL(){return fT(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return nT(e=wt(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw HE(e)}}class GC{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(KC(e))throw BE("ref() expected a child path but got a URL, use refFromURL instead.");return new HC(pT(this._delegate,e),this)}refFromURL(e){if(!KC(e))throw BE("refFromURL() expected a full URL but got a child path, use ref() instead.");try{WE.makeFromUrl(e,this._delegate.host)}catch(t){throw BE("refFromUrl() expected a valid full URL but got an invalid one.")}return new HC(pT(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};mT(this._delegate,e,t,n)}}function KC(e){return/^[A-Za-z]+:\/\//.test(e)}function WC(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new GC(r,i)}!function(e){const t={TaskState:zS,TaskEvent:VS,StringFormat:aS,Storage:GC,Reference:HC};e.INTERNAL.registerComponent(new _t("storage-compat",WC,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.6")}(UT),UT.initializeApp({apiKey:"AIzaSyBIXPOEZrN_FzFqfT_AnoEhlzk_4LVCiMo",authDomain:"shopchik-3c85d.firebaseapp.com",projectId:"shopchik-3c85d",storageBucket:"shopchik-3c85d.appspot.com",messagingSenderId:"789231623692",appId:"1:789231623692:web:16b94872b79d0920ce9829",measurementId:"G-7RV0JVBQJ2"});const QC=(0,i.createContext)(null),YC=UT.auth(),JC=UT.firestore(),XC=UT.storage(),$C=function(e,t){const n="string"==typeof e?e:t||"(default)",r=an("object"==typeof e?e:yn(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Ye("firestore");e&&jb(r,...e)}return r}();o.createRoot(document.getElementById("root")).render((0,EE.jsx)(QC.Provider,{value:{firebase:UT,auth:YC,firestore:JC,storage:XC,db:$C},children:(0,EE.jsx)(Ck,{})}))})()})();
//# sourceMappingURL=main.409034f1.js.map